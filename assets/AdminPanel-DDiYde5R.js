import{c as Ke,r as d,R as Ec,u as At,t as Se,a as fa,s as cr,b as Ra,g as Ss,m as Tc,d as Ic,e as O,f as A,j as s,h as ce,P as xe,i as Pc,k as Ye,l as ya,B as ee,n as ma,o as Ne,p as xa,q as Fn,v as Zt,w as Un,x as ea,y as Ln,V as Rc,A as Tr,z as Y,C as Ir,D as uo,E as Pr,F as Rr,G as Vn,H as Cs,I as Bn,J as Ot,K as Oc,X as Fc,L as Uc,M as Ct,N as Ge,O as Lc,Q as $n,S as Vc,T as Bc,U as fo,W as Ms,Y as vn,Z as $c,_ as Wc,$ as mo,a0 as zc,a1 as Gc}from"./index-G5k0Nb5n.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ho=Ke("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const po=Ke("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const go=Ke("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hc=Ke("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vo=Ke("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zc=Ke("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kc=Ke("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $a=Ke("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yc=Ke("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qc=Ke("CloudDownload",[["path",{d:"M12 13v8l-4-4",key:"1f5nwf"}],["path",{d:"m12 21 4-4",key:"1lfcce"}],["path",{d:"M4.393 15.269A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.436 8.284",key:"ui1hmy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ba=Ke("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _a=Ke("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yo=Ke("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jc=Ke("Youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]]);var Xc=Ec[" useId ".trim().toString()]||(()=>{}),Qc=0;function _t(e){const[t,a]=d.useState(Xc());return At(()=>{a(r=>r??String(Qc++))},[e]),e||(t?`radix-${t}`:"")}function Ve(e,t){const a=Se(e);return isNaN(t)?fa(e,NaN):(t&&a.setDate(a.getDate()+t),a)}function mt(e,t){const a=Se(e);if(isNaN(t))return fa(e,NaN);if(!t)return a;const r=a.getDate(),n=fa(e,a.getTime());n.setMonth(a.getMonth()+t+1,0);const o=n.getDate();return r>=o?n:(a.setFullYear(n.getFullYear(),n.getMonth(),r),a)}function yn(e,t){const a=t*7;return Ve(e,a)}function ed(e,t){return mt(e,t*12)}function td(e){let t;return e.forEach(function(a){const r=Se(a);(t===void 0||t<r||isNaN(Number(r)))&&(t=r)}),t||new Date(NaN)}function ad(e){let t;return e.forEach(a=>{const r=Se(a);(!t||t>r||isNaN(+r))&&(t=r)}),t||new Date(NaN)}function ze(e,t){const a=cr(e),r=cr(t);return+a==+r}function Oa(e,t){const a=Se(e),r=Se(t),n=a.getFullYear()-r.getFullYear(),o=a.getMonth()-r.getMonth();return n*12+o}function rd(e,t,a){const r=Ra(e,a),n=Ra(t,a),o=+r-Ss(r),i=+n-Ss(n);return Math.round((o-i)/Tc)}function Wn(e){const t=Se(e),a=t.getMonth();return t.setFullYear(t.getFullYear(),a+1,0),t.setHours(23,59,59,999),t}function He(e){const t=Se(e);return t.setDate(1),t.setHours(0,0,0,0),t}function zn(e,t){var l,c,u,f;const a=Ic(),r=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??a.weekStartsOn??((f=(u=a.locale)==null?void 0:u.options)==null?void 0:f.weekStartsOn)??0,n=Se(e),o=n.getDay(),i=(o<r?-7:0)+6-(o-r);return n.setDate(n.getDate()+i),n.setHours(23,59,59,999),n}function xo(e){return zn(e,{weekStartsOn:1})}function nd(e){const t=Se(e),a=t.getFullYear(),r=t.getMonth(),n=fa(e,0);return n.setFullYear(a,r+1,0),n.setHours(0,0,0,0),n.getDate()}function sd(e){return Math.trunc(+Se(e)/1e3)}function od(e){const t=Se(e),a=t.getMonth();return t.setFullYear(t.getFullYear(),a+1,0),t.setHours(0,0,0,0),t}function id(e,t){return rd(od(e),He(e),t)+1}function xn(e,t){const a=Se(e),r=Se(t);return a.getTime()>r.getTime()}function bo(e,t){const a=Se(e),r=Se(t);return+a<+r}function Gn(e,t){const a=Se(e),r=Se(t);return a.getFullYear()===r.getFullYear()&&a.getMonth()===r.getMonth()}function ld(e,t){const a=Se(e),r=Se(t);return a.getFullYear()===r.getFullYear()}function Jr(e,t){return Ve(e,-t)}function Xr(e,t){const a=Se(e),r=a.getFullYear(),n=a.getDate(),o=fa(e,0);o.setFullYear(r,t,15),o.setHours(0,0,0,0);const i=nd(o);return a.setMonth(t,Math.min(n,i)),a}function As(e,t){const a=Se(e);return isNaN(+a)?fa(e,NaN):(a.setFullYear(t),a)}const cd=async()=>{try{const{error:e}=await O.auth.signOut();if(e){console.error("Error signing out:",e),A.error(`Gagal logout: ${e.message}`);return}for(let t=0;t<localStorage.length;t++){const a=localStorage.key(t);a&&a.startsWith("sb-dectagjljgxcwsequkdt")&&localStorage.removeItem(a)}A.success("Berhasil logout dan membersihkan sesi."),console.log("User signed out and session cleared from local storage.")}catch(e){console.error("Unexpected error during sign out and session clear:",e),A.error("Terjadi kesalahan saat logout.")}},Xe=d.forwardRef(({className:e,...t},a)=>s.jsx("div",{ref:a,className:ce("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));Xe.displayName="Card";const Qe=d.forwardRef(({className:e,...t},a)=>s.jsx("div",{ref:a,className:ce("flex flex-col space-y-1.5 p-6",e),...t}));Qe.displayName="CardHeader";const et=d.forwardRef(({className:e,...t},a)=>s.jsx("h3",{ref:a,className:ce("text-2xl font-semibold leading-none tracking-tight",e),...t}));et.displayName="CardTitle";const dd=d.forwardRef(({className:e,...t},a)=>s.jsx("p",{ref:a,className:ce("text-sm text-muted-foreground",e),...t}));dd.displayName="CardDescription";const tt=d.forwardRef(({className:e,...t},a)=>s.jsx("div",{ref:a,className:ce("p-6 pt-0",e),...t}));tt.displayName="CardContent";const ud=d.forwardRef(({className:e,...t},a)=>s.jsx("div",{ref:a,className:ce("flex items-center p-6 pt-0",e),...t}));ud.displayName="CardFooter";const le=d.forwardRef(({className:e,type:t,...a},r)=>s.jsx("input",{type:t,className:ce("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...a}));le.displayName="Input";var fd="Label",_o=d.forwardRef((e,t)=>s.jsx(xe.label,{...e,ref:t,onMouseDown:a=>{var n;a.target.closest("button, input, select, textarea")||((n=e.onMouseDown)==null||n.call(e,a),!a.defaultPrevented&&a.detail>1&&a.preventDefault())}}));_o.displayName=fd;var wo=_o;const md=Pc("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Z=d.forwardRef(({className:e,...t},a)=>s.jsx(wo,{ref:a,className:ce(md(),e),...t}));Z.displayName=wo.displayName;const Or=d.forwardRef(({className:e,...t},a)=>s.jsx("textarea",{className:ce("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:a,...t}));Or.displayName="Textarea";var Wa=e=>e.type==="checkbox",Ht=e=>e instanceof Date,Be=e=>e==null;const jo=e=>typeof e=="object";var Me=e=>!Be(e)&&!Array.isArray(e)&&jo(e)&&!Ht(e),hd=e=>Me(e)&&e.target?Wa(e.target)?e.target.checked:e.target.value:e,pd=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,gd=(e,t)=>e.has(pd(t)),vd=e=>{const t=e.constructor&&e.constructor.prototype;return Me(t)&&t.hasOwnProperty("isPrototypeOf")},Hn=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Ue(e){let t;const a=Array.isArray(e),r=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(!(Hn&&(e instanceof Blob||r))&&(a||Me(e)))if(t=a?[]:{},!a&&!vd(e))t=e;else for(const n in e)e.hasOwnProperty(n)&&(t[n]=Ue(e[n]));else return e;return t}var Fr=e=>Array.isArray(e)?e.filter(Boolean):[],Ee=e=>e===void 0,W=(e,t,a)=>{if(!t||!Me(e))return a;const r=Fr(t.split(/[,[\].]+?/)).reduce((n,o)=>Be(n)?n:n[o],e);return Ee(r)||r===e?Ee(e[t])?a:e[t]:r},vt=e=>typeof e=="boolean",Zn=e=>/^\w*$/.test(e),No=e=>Fr(e.replace(/["|']|\]/g,"").split(/\.|\[/)),we=(e,t,a)=>{let r=-1;const n=Zn(t)?[t]:No(t),o=n.length,i=o-1;for(;++r<o;){const l=n[r];let c=a;if(r!==i){const u=e[l];c=Me(u)||Array.isArray(u)?u:isNaN(+n[r+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;e[l]=c,e=e[l]}};const Ds={BLUR:"blur",FOCUS_OUT:"focusout"},ct={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Nt={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};Ye.createContext(null);var yd=(e,t,a,r=!0)=>{const n={defaultValues:t._defaultValues};for(const o in e)Object.defineProperty(n,o,{get:()=>{const i=o;return t._proxyFormState[i]!==ct.all&&(t._proxyFormState[i]=!r||ct.all),e[i]}});return n},xt=e=>typeof e=="string",xd=(e,t,a,r,n)=>xt(e)?(r&&t.watch.add(e),W(a,e,n)):Array.isArray(e)?e.map(o=>(r&&t.watch.add(o),W(a,o))):(r&&(t.watchAll=!0),a),ko=(e,t,a,r,n)=>t?{...a[e],types:{...a[e]&&a[e].types?a[e].types:{},[r]:n||!0}}:{},Ea=e=>Array.isArray(e)?e:[e],Es=()=>{let e=[];return{get observers(){return e},next:n=>{for(const o of e)o.next&&o.next(n)},subscribe:n=>(e.push(n),{unsubscribe:()=>{e=e.filter(o=>o!==n)}}),unsubscribe:()=>{e=[]}}},bn=e=>Be(e)||!jo(e);function Lt(e,t){if(bn(e)||bn(t))return e===t;if(Ht(e)&&Ht(t))return e.getTime()===t.getTime();const a=Object.keys(e),r=Object.keys(t);if(a.length!==r.length)return!1;for(const n of a){const o=e[n];if(!r.includes(n))return!1;if(n!=="ref"){const i=t[n];if(Ht(o)&&Ht(i)||Me(o)&&Me(i)||Array.isArray(o)&&Array.isArray(i)?!Lt(o,i):o!==i)return!1}}return!0}var Le=e=>Me(e)&&!Object.keys(e).length,Kn=e=>e.type==="file",dt=e=>typeof e=="function",dr=e=>{if(!Hn)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},So=e=>e.type==="select-multiple",Yn=e=>e.type==="radio",bd=e=>Yn(e)||Wa(e),Qr=e=>dr(e)&&e.isConnected;function _d(e,t){const a=t.slice(0,-1).length;let r=0;for(;r<a;)e=Ee(e)?r++:e[t[r++]];return e}function wd(e){for(const t in e)if(e.hasOwnProperty(t)&&!Ee(e[t]))return!1;return!0}function Ie(e,t){const a=Array.isArray(t)?t:Zn(t)?[t]:No(t),r=a.length===1?e:_d(e,a),n=a.length-1,o=a[n];return r&&delete r[o],n!==0&&(Me(r)&&Le(r)||Array.isArray(r)&&wd(r))&&Ie(e,a.slice(0,-1)),e}var Co=e=>{for(const t in e)if(dt(e[t]))return!0;return!1};function ur(e,t={}){const a=Array.isArray(e);if(Me(e)||a)for(const r in e)Array.isArray(e[r])||Me(e[r])&&!Co(e[r])?(t[r]=Array.isArray(e[r])?[]:{},ur(e[r],t[r])):Be(e[r])||(t[r]=!0);return t}function Mo(e,t,a){const r=Array.isArray(e);if(Me(e)||r)for(const n in e)Array.isArray(e[n])||Me(e[n])&&!Co(e[n])?Ee(t)||bn(a[n])?a[n]=Array.isArray(e[n])?ur(e[n],[]):{...ur(e[n])}:Mo(e[n],Be(t)?{}:t[n],a[n]):a[n]=!Lt(e[n],t[n]);return a}var Na=(e,t)=>Mo(e,t,ur(t));const Ts={value:!1,isValid:!1},Is={value:!0,isValid:!0};var Ao=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(a=>a&&a.checked&&!a.disabled).map(a=>a.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Ee(e[0].attributes.value)?Ee(e[0].value)||e[0].value===""?Is:{value:e[0].value,isValid:!0}:Is:Ts}return Ts},Do=(e,{valueAsNumber:t,valueAsDate:a,setValueAs:r})=>Ee(e)?e:t?e===""?NaN:e&&+e:a&&xt(e)?new Date(e):r?r(e):e;const Ps={isValid:!1,value:null};var Eo=e=>Array.isArray(e)?e.reduce((t,a)=>a&&a.checked&&!a.disabled?{isValid:!0,value:a.value}:t,Ps):Ps;function Rs(e){const t=e.ref;return Kn(t)?t.files:Yn(t)?Eo(e.refs).value:So(t)?[...t.selectedOptions].map(({value:a})=>a):Wa(t)?Ao(e.refs).value:Do(Ee(t.value)?e.ref.value:t.value,e)}var jd=(e,t,a,r)=>{const n={};for(const o of e){const i=W(t,o);i&&we(n,o,i._f)}return{criteriaMode:a,names:[...e],fields:n,shouldUseNativeValidation:r}},fr=e=>e instanceof RegExp,ka=e=>Ee(e)?e:fr(e)?e.source:Me(e)?fr(e.value)?e.value.source:e.value:e,Os=e=>({isOnSubmit:!e||e===ct.onSubmit,isOnBlur:e===ct.onBlur,isOnChange:e===ct.onChange,isOnAll:e===ct.all,isOnTouch:e===ct.onTouched});const Fs="AsyncFunction";var Nd=e=>!!e&&!!e.validate&&!!(dt(e.validate)&&e.validate.constructor.name===Fs||Me(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===Fs)),kd=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),Us=(e,t,a)=>!a&&(t.watchAll||t.watch.has(e)||[...t.watch].some(r=>e.startsWith(r)&&/^\.\w+/.test(e.slice(r.length))));const Ta=(e,t,a,r)=>{for(const n of a||Object.keys(e)){const o=W(e,n);if(o){const{_f:i,...l}=o;if(i){if(i.refs&&i.refs[0]&&t(i.refs[0],n)&&!r)return!0;if(i.ref&&t(i.ref,i.name)&&!r)return!0;if(Ta(l,t))break}else if(Me(l)&&Ta(l,t))break}}};function Ls(e,t,a){const r=W(e,a);if(r||Zn(a))return{error:r,name:a};const n=a.split(".");for(;n.length;){const o=n.join("."),i=W(t,o),l=W(e,o);if(i&&!Array.isArray(i)&&a!==o)return{name:a};if(l&&l.type)return{name:o,error:l};n.pop()}return{name:a}}var Sd=(e,t,a,r)=>{a(e);const{name:n,...o}=e;return Le(o)||Object.keys(o).length>=Object.keys(t).length||Object.keys(o).find(i=>t[i]===(!r||ct.all))},Cd=(e,t,a)=>!e||!t||e===t||Ea(e).some(r=>r&&(a?r===t:r.startsWith(t)||t.startsWith(r))),Md=(e,t,a,r,n)=>n.isOnAll?!1:!a&&n.isOnTouch?!(t||e):(a?r.isOnBlur:n.isOnBlur)?!e:(a?r.isOnChange:n.isOnChange)?e:!0,Ad=(e,t)=>!Fr(W(e,t)).length&&Ie(e,t),Dd=(e,t,a)=>{const r=Ea(W(e,a));return we(r,"root",t[a]),we(e,a,r),e},nr=e=>xt(e);function Vs(e,t,a="validate"){if(nr(e)||Array.isArray(e)&&e.every(nr)||vt(e)&&!e)return{type:a,message:nr(e)?e:"",ref:t}}var sa=e=>Me(e)&&!fr(e)?e:{value:e,message:""},Bs=async(e,t,a,r,n,o)=>{const{ref:i,refs:l,required:c,maxLength:u,minLength:f,min:m,max:p,pattern:v,validate:b,name:h,valueAsNumber:_,mount:k}=e._f,x=W(a,h);if(!k||t.has(h))return{};const M=l?l[0]:i,w=H=>{n&&M.reportValidity&&(M.setCustomValidity(vt(H)?"":H||""),M.reportValidity())},j={},D=Yn(i),y=Wa(i),S=D||y,L=(_||Kn(i))&&Ee(i.value)&&Ee(x)||dr(i)&&i.value===""||x===""||Array.isArray(x)&&!x.length,q=ko.bind(null,h,r,j),X=(H,z,re,de=Nt.maxLength,J=Nt.minLength)=>{const R=H?z:re;j[h]={type:H?de:J,message:R,ref:i,...q(H?de:J,R)}};if(o?!Array.isArray(x)||!x.length:c&&(!S&&(L||Be(x))||vt(x)&&!x||y&&!Ao(l).isValid||D&&!Eo(l).isValid)){const{value:H,message:z}=nr(c)?{value:!!c,message:c}:sa(c);if(H&&(j[h]={type:Nt.required,message:z,ref:M,...q(Nt.required,z)},!r))return w(z),j}if(!L&&(!Be(m)||!Be(p))){let H,z;const re=sa(p),de=sa(m);if(!Be(x)&&!isNaN(x)){const J=i.valueAsNumber||x&&+x;Be(re.value)||(H=J>re.value),Be(de.value)||(z=J<de.value)}else{const J=i.valueAsDate||new Date(x),R=P=>new Date(new Date().toDateString()+" "+P),I=i.type=="time",$=i.type=="week";xt(re.value)&&x&&(H=I?R(x)>R(re.value):$?x>re.value:J>new Date(re.value)),xt(de.value)&&x&&(z=I?R(x)<R(de.value):$?x<de.value:J<new Date(de.value))}if((H||z)&&(X(!!H,re.message,de.message,Nt.max,Nt.min),!r))return w(j[h].message),j}if((u||f)&&!L&&(xt(x)||o&&Array.isArray(x))){const H=sa(u),z=sa(f),re=!Be(H.value)&&x.length>+H.value,de=!Be(z.value)&&x.length<+z.value;if((re||de)&&(X(re,H.message,z.message),!r))return w(j[h].message),j}if(v&&!L&&xt(x)){const{value:H,message:z}=sa(v);if(fr(H)&&!x.match(H)&&(j[h]={type:Nt.pattern,message:z,ref:i,...q(Nt.pattern,z)},!r))return w(z),j}if(b){if(dt(b)){const H=await b(x,a),z=Vs(H,M);if(z&&(j[h]={...z,...q(Nt.validate,z.message)},!r))return w(z.message),j}else if(Me(b)){let H={};for(const z in b){if(!Le(H)&&!r)break;const re=Vs(await b[z](x,a),M,z);re&&(H={...re,...q(z,re.message)},w(re.message),r&&(j[h]=H))}if(!Le(H)&&(j[h]={ref:M,...H},!r))return j}}return w(!0),j};const Ed={mode:ct.onSubmit,reValidateMode:ct.onChange,shouldFocusError:!0};function Td(e={}){let t={...Ed,...e},a={submitCount:0,isDirty:!1,isLoading:dt(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1};const r={};let n=Me(t.defaultValues)||Me(t.values)?Ue(t.values||t.defaultValues)||{}:{},o=t.shouldUnregister?{}:Ue(n),i={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,u=0;const f={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let m={...f};const p={array:Es(),state:Es()},v=Os(t.mode),b=Os(t.reValidateMode),h=t.criteriaMode===ct.all,_=g=>N=>{clearTimeout(u),u=setTimeout(g,N)},k=async g=>{if(!t.disabled&&(f.isValid||m.isValid||g)){const N=t.resolver?Le((await L()).errors):await X(r,!0);N!==a.isValid&&p.state.next({isValid:N})}},x=(g,N)=>{!t.disabled&&(f.isValidating||f.validatingFields||m.isValidating||m.validatingFields)&&((g||Array.from(l.mount)).forEach(C=>{C&&(N?we(a.validatingFields,C,N):Ie(a.validatingFields,C))}),p.state.next({validatingFields:a.validatingFields,isValidating:!Le(a.validatingFields)}))},M=(g,N=[],C,V,F=!0,T=!0)=>{if(V&&C&&!t.disabled){if(i.action=!0,T&&Array.isArray(W(r,g))){const G=C(W(r,g),V.argA,V.argB);F&&we(r,g,G)}if(T&&Array.isArray(W(a.errors,g))){const G=C(W(a.errors,g),V.argA,V.argB);F&&we(a.errors,g,G),Ad(a.errors,g)}if((f.touchedFields||m.touchedFields)&&T&&Array.isArray(W(a.touchedFields,g))){const G=C(W(a.touchedFields,g),V.argA,V.argB);F&&we(a.touchedFields,g,G)}(f.dirtyFields||m.dirtyFields)&&(a.dirtyFields=Na(n,o)),p.state.next({name:g,isDirty:z(g,N),dirtyFields:a.dirtyFields,errors:a.errors,isValid:a.isValid})}else we(o,g,N)},w=(g,N)=>{we(a.errors,g,N),p.state.next({errors:a.errors})},j=g=>{a.errors=g,p.state.next({errors:a.errors,isValid:!1})},D=(g,N,C,V)=>{const F=W(r,g);if(F){const T=W(o,g,Ee(C)?W(n,g):C);Ee(T)||V&&V.defaultChecked||N?we(o,g,N?T:Rs(F._f)):J(g,T),i.mount&&k()}},y=(g,N,C,V,F)=>{let T=!1,G=!1;const ve={name:g};if(!t.disabled){if(!C||V){(f.isDirty||m.isDirty)&&(G=a.isDirty,a.isDirty=ve.isDirty=z(),T=G!==ve.isDirty);const De=Lt(W(n,g),N);G=!!W(a.dirtyFields,g),De?Ie(a.dirtyFields,g):we(a.dirtyFields,g,!0),ve.dirtyFields=a.dirtyFields,T=T||(f.dirtyFields||m.dirtyFields)&&G!==!De}if(C){const De=W(a.touchedFields,g);De||(we(a.touchedFields,g,C),ve.touchedFields=a.touchedFields,T=T||(f.touchedFields||m.touchedFields)&&De!==C)}T&&F&&p.state.next(ve)}return T?ve:{}},S=(g,N,C,V)=>{const F=W(a.errors,g),T=(f.isValid||m.isValid)&&vt(N)&&a.isValid!==N;if(t.delayError&&C?(c=_(()=>w(g,C)),c(t.delayError)):(clearTimeout(u),c=null,C?we(a.errors,g,C):Ie(a.errors,g)),(C?!Lt(F,C):F)||!Le(V)||T){const G={...V,...T&&vt(N)?{isValid:N}:{},errors:a.errors,name:g};a={...a,...G},p.state.next(G)}},L=async g=>{x(g,!0);const N=await t.resolver(o,t.context,jd(g||l.mount,r,t.criteriaMode,t.shouldUseNativeValidation));return x(g),N},q=async g=>{const{errors:N}=await L(g);if(g)for(const C of g){const V=W(N,C);V?we(a.errors,C,V):Ie(a.errors,C)}else a.errors=N;return N},X=async(g,N,C={valid:!0})=>{for(const V in g){const F=g[V];if(F){const{_f:T,...G}=F;if(T){const ve=l.array.has(T.name),De=F._f&&Nd(F._f);De&&f.validatingFields&&x([V],!0);const Fe=await Bs(F,l.disabled,o,h,t.shouldUseNativeValidation&&!N,ve);if(De&&f.validatingFields&&x([V]),Fe[T.name]&&(C.valid=!1,N))break;!N&&(W(Fe,T.name)?ve?Dd(a.errors,Fe,T.name):we(a.errors,T.name,Fe[T.name]):Ie(a.errors,T.name))}!Le(G)&&await X(G,N,C)}}return C.valid},H=()=>{for(const g of l.unMount){const N=W(r,g);N&&(N._f.refs?N._f.refs.every(C=>!Qr(C)):!Qr(N._f.ref))&&ye(g)}l.unMount=new Set},z=(g,N)=>!t.disabled&&(g&&N&&we(o,g,N),!Lt(me(),n)),re=(g,N,C)=>xd(g,l,{...i.mount?o:Ee(N)?n:xt(g)?{[g]:N}:N},C,N),de=g=>Fr(W(i.mount?o:n,g,t.shouldUnregister?W(n,g,[]):[])),J=(g,N,C={})=>{const V=W(r,g);let F=N;if(V){const T=V._f;T&&(!T.disabled&&we(o,g,Do(N,T)),F=dr(T.ref)&&Be(N)?"":N,So(T.ref)?[...T.ref.options].forEach(G=>G.selected=F.includes(G.value)):T.refs?Wa(T.ref)?T.refs.length>1?T.refs.forEach(G=>(!G.defaultChecked||!G.disabled)&&(G.checked=Array.isArray(F)?!!F.find(ve=>ve===G.value):F===G.value)):T.refs[0]&&(T.refs[0].checked=!!F):T.refs.forEach(G=>G.checked=G.value===F):Kn(T.ref)?T.ref.value="":(T.ref.value=F,T.ref.type||p.state.next({name:g,values:Ue(o)})))}(C.shouldDirty||C.shouldTouch)&&y(g,F,C.shouldTouch,C.shouldDirty,!0),C.shouldValidate&&se(g)},R=(g,N,C)=>{for(const V in N){const F=N[V],T=`${g}.${V}`,G=W(r,T);(l.array.has(g)||Me(F)||G&&!G._f)&&!Ht(F)?R(T,F,C):J(T,F,C)}},I=(g,N,C={})=>{const V=W(r,g),F=l.array.has(g),T=Ue(N);we(o,g,T),F?(p.array.next({name:g,values:Ue(o)}),(f.isDirty||f.dirtyFields||m.isDirty||m.dirtyFields)&&C.shouldDirty&&p.state.next({name:g,dirtyFields:Na(n,o),isDirty:z(g,T)})):V&&!V._f&&!Be(T)?R(g,T,C):J(g,T,C),Us(g,l)&&p.state.next({...a}),p.state.next({name:i.mount?g:void 0,values:Ue(o)})},$=async g=>{i.mount=!0;const N=g.target;let C=N.name,V=!0;const F=W(r,C),T=G=>{V=Number.isNaN(G)||Ht(G)&&isNaN(G.getTime())||Lt(G,W(o,C,G))};if(F){let G,ve;const De=N.type?Rs(F._f):hd(g),Fe=g.type===Ds.BLUR||g.type===Ds.FOCUS_OUT,Mc=!kd(F._f)&&!t.resolver&&!W(a.errors,C)&&!F._f.deps||Md(Fe,W(a.touchedFields,C),a.isSubmitted,b,v),Yr=Us(C,l,Fe);we(o,C,De),Fe?(F._f.onBlur&&F._f.onBlur(g),c&&c(0)):F._f.onChange&&F._f.onChange(g);const qr=y(C,De,Fe),Ac=!Le(qr)||Yr;if(!Fe&&p.state.next({name:C,type:g.type,values:Ue(o)}),Mc)return(f.isValid||m.isValid)&&(t.mode==="onBlur"?Fe&&k():Fe||k()),Ac&&p.state.next({name:C,...Yr?{}:qr});if(!Fe&&Yr&&p.state.next({...a}),t.resolver){const{errors:Ns}=await L([C]);if(T(De),V){const Dc=Ls(a.errors,r,C),ks=Ls(Ns,r,Dc.name||C);G=ks.error,C=ks.name,ve=Le(Ns)}}else x([C],!0),G=(await Bs(F,l.disabled,o,h,t.shouldUseNativeValidation))[C],x([C]),T(De),V&&(G?ve=!1:(f.isValid||m.isValid)&&(ve=await X(r,!0)));V&&(F._f.deps&&se(F._f.deps),S(C,ve,G,qr))}},P=(g,N)=>{if(W(a.errors,N)&&g.focus)return g.focus(),1},se=async(g,N={})=>{let C,V;const F=Ea(g);if(t.resolver){const T=await q(Ee(g)?g:F);C=Le(T),V=g?!F.some(G=>W(T,G)):C}else g?(V=(await Promise.all(F.map(async T=>{const G=W(r,T);return await X(G&&G._f?{[T]:G}:G)}))).every(Boolean),!(!V&&!a.isValid)&&k()):V=C=await X(r);return p.state.next({...!xt(g)||(f.isValid||m.isValid)&&C!==a.isValid?{}:{name:g},...t.resolver||!g?{isValid:C}:{},errors:a.errors}),N.shouldFocus&&!V&&Ta(r,P,g?F:l.mount),V},me=g=>{const N={...i.mount?o:n};return Ee(g)?N:xt(g)?W(N,g):g.map(C=>W(N,C))},Te=(g,N)=>({invalid:!!W((N||a).errors,g),isDirty:!!W((N||a).dirtyFields,g),error:W((N||a).errors,g),isValidating:!!W(a.validatingFields,g),isTouched:!!W((N||a).touchedFields,g)}),Ce=g=>{g&&Ea(g).forEach(N=>Ie(a.errors,N)),p.state.next({errors:g?a.errors:{}})},Ae=(g,N,C)=>{const V=(W(r,g,{_f:{}})._f||{}).ref,F=W(a.errors,g)||{},{ref:T,message:G,type:ve,...De}=F;we(a.errors,g,{...De,...N,ref:V}),p.state.next({name:g,errors:a.errors,isValid:!1}),C&&C.shouldFocus&&V&&V.focus&&V.focus()},be=(g,N)=>dt(g)?p.state.subscribe({next:C=>g(re(void 0,N),C)}):re(g,N,!0),Q=g=>p.state.subscribe({next:N=>{Cd(g.name,N.name,g.exact)&&Sd(N,g.formState||f,Cc,g.reRenderRoot)&&g.callback({values:{...o},...a,...N})}}).unsubscribe,_e=g=>(i.mount=!0,m={...m,...g.formState},Q({...g,formState:m})),ye=(g,N={})=>{for(const C of g?Ea(g):l.mount)l.mount.delete(C),l.array.delete(C),N.keepValue||(Ie(r,C),Ie(o,C)),!N.keepError&&Ie(a.errors,C),!N.keepDirty&&Ie(a.dirtyFields,C),!N.keepTouched&&Ie(a.touchedFields,C),!N.keepIsValidating&&Ie(a.validatingFields,C),!t.shouldUnregister&&!N.keepDefaultValue&&Ie(n,C);p.state.next({values:Ue(o)}),p.state.next({...a,...N.keepDirty?{isDirty:z()}:{}}),!N.keepIsValid&&k()},pe=({disabled:g,name:N})=>{(vt(g)&&i.mount||g||l.disabled.has(N))&&(g?l.disabled.add(N):l.disabled.delete(N))},ge=(g,N={})=>{let C=W(r,g);const V=vt(N.disabled)||vt(t.disabled);return we(r,g,{...C||{},_f:{...C&&C._f?C._f:{ref:{name:g}},name:g,mount:!0,...N}}),l.mount.add(g),C?pe({disabled:vt(N.disabled)?N.disabled:t.disabled,name:g}):D(g,!0,N.value),{...V?{disabled:N.disabled||t.disabled}:{},...t.progressive?{required:!!N.required,min:ka(N.min),max:ka(N.max),minLength:ka(N.minLength),maxLength:ka(N.maxLength),pattern:ka(N.pattern)}:{},name:g,onChange:$,onBlur:$,ref:F=>{if(F){ge(g,N),C=W(r,g);const T=Ee(F.value)&&F.querySelectorAll&&F.querySelectorAll("input,select,textarea")[0]||F,G=bd(T),ve=C._f.refs||[];if(G?ve.find(De=>De===T):T===C._f.ref)return;we(r,g,{_f:{...C._f,...G?{refs:[...ve.filter(Qr),T,...Array.isArray(W(n,g))?[{}]:[]],ref:{type:T.type,name:g}}:{ref:T}}}),D(g,!1,void 0,T)}else C=W(r,g,{}),C._f&&(C._f.mount=!1),(t.shouldUnregister||N.shouldUnregister)&&!(gd(l.array,g)&&i.action)&&l.unMount.add(g)}}},fe=()=>t.shouldFocusError&&Ta(r,P,l.mount),rt=g=>{vt(g)&&(p.state.next({disabled:g}),Ta(r,(N,C)=>{const V=W(r,C);V&&(N.disabled=V._f.disabled||g,Array.isArray(V._f.refs)&&V._f.refs.forEach(F=>{F.disabled=V._f.disabled||g}))},0,!1))},gt=(g,N)=>async C=>{let V;C&&(C.preventDefault&&C.preventDefault(),C.persist&&C.persist());let F=Ue(o);if(p.state.next({isSubmitting:!0}),t.resolver){const{errors:T,values:G}=await L();a.errors=T,F=G}else await X(r);if(l.disabled.size)for(const T of l.disabled)we(F,T,void 0);if(Ie(a.errors,"root"),Le(a.errors)){p.state.next({errors:{}});try{await g(F,C)}catch(T){V=T}}else N&&await N({...a.errors},C),fe(),setTimeout(fe);if(p.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Le(a.errors)&&!V,submitCount:a.submitCount+1,errors:a.errors}),V)throw V},ja=(g,N={})=>{W(r,g)&&(Ee(N.defaultValue)?I(g,Ue(W(n,g))):(I(g,N.defaultValue),we(n,g,Ue(N.defaultValue))),N.keepTouched||Ie(a.touchedFields,g),N.keepDirty||(Ie(a.dirtyFields,g),a.isDirty=N.defaultValue?z(g,Ue(W(n,g))):z()),N.keepError||(Ie(a.errors,g),f.isValid&&k()),p.state.next({...a}))},ra=(g,N={})=>{const C=g?Ue(g):n,V=Ue(C),F=Le(g),T=F?n:V;if(N.keepDefaultValues||(n=C),!N.keepValues){if(N.keepDirtyValues){const G=new Set([...l.mount,...Object.keys(Na(n,o))]);for(const ve of Array.from(G))W(a.dirtyFields,ve)?we(T,ve,W(o,ve)):I(ve,W(T,ve))}else{if(Hn&&Ee(g))for(const G of l.mount){const ve=W(r,G);if(ve&&ve._f){const De=Array.isArray(ve._f.refs)?ve._f.refs[0]:ve._f.ref;if(dr(De)){const Fe=De.closest("form");if(Fe){Fe.reset();break}}}}for(const G of l.mount)I(G,W(T,G))}o=Ue(T),p.array.next({values:{...T}}),p.state.next({values:{...T}})}l={mount:N.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},i.mount=!f.isValid||!!N.keepIsValid||!!N.keepDirtyValues,i.watch=!!t.shouldUnregister,p.state.next({submitCount:N.keepSubmitCount?a.submitCount:0,isDirty:F?!1:N.keepDirty?a.isDirty:!!(N.keepDefaultValues&&!Lt(g,n)),isSubmitted:N.keepIsSubmitted?a.isSubmitted:!1,dirtyFields:F?{}:N.keepDirtyValues?N.keepDefaultValues&&o?Na(n,o):a.dirtyFields:N.keepDefaultValues&&g?Na(n,g):N.keepDirty?a.dirtyFields:{},touchedFields:N.keepTouched?a.touchedFields:{},errors:N.keepErrors?a.errors:{},isSubmitSuccessful:N.keepIsSubmitSuccessful?a.isSubmitSuccessful:!1,isSubmitting:!1})},na=(g,N)=>ra(dt(g)?g(o):g,N),Sc=(g,N={})=>{const C=W(r,g),V=C&&C._f;if(V){const F=V.refs?V.refs[0]:V.ref;F.focus&&(F.focus(),N.shouldSelect&&dt(F.select)&&F.select())}},Cc=g=>{a={...a,...g}},js={control:{register:ge,unregister:ye,getFieldState:Te,handleSubmit:gt,setError:Ae,_subscribe:Q,_runSchema:L,_getWatch:re,_getDirty:z,_setValid:k,_setFieldArray:M,_setDisabledField:pe,_setErrors:j,_getFieldArray:de,_reset:ra,_resetDefaultValues:()=>dt(t.defaultValues)&&t.defaultValues().then(g=>{na(g,t.resetOptions),p.state.next({isLoading:!1})}),_removeUnmounted:H,_disableForm:rt,_subjects:p,_proxyFormState:f,get _fields(){return r},get _formValues(){return o},get _state(){return i},set _state(g){i=g},get _defaultValues(){return n},get _names(){return l},set _names(g){l=g},get _formState(){return a},get _options(){return t},set _options(g){t={...t,...g}}},subscribe:_e,trigger:se,register:ge,handleSubmit:gt,watch:be,setValue:I,getValues:me,reset:na,resetField:ja,clearErrors:Ce,unregister:ye,setError:Ae,setFocus:Sc,getFieldState:Te};return{...js,formControl:js}}function qe(e={}){const t=Ye.useRef(void 0),a=Ye.useRef(void 0),[r,n]=Ye.useState({isDirty:!1,isValidating:!1,isLoading:dt(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:dt(e.defaultValues)?void 0:e.defaultValues});t.current||(t.current={...e.formControl?e.formControl:Td(e),formState:r},e.formControl&&e.defaultValues&&!dt(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions));const o=t.current.control;return o._options=e,Ye.useLayoutEffect(()=>o._subscribe({formState:o._proxyFormState,callback:()=>n({...o._formState}),reRenderRoot:!0}),[o]),Ye.useEffect(()=>o._disableForm(e.disabled),[o,e.disabled]),Ye.useEffect(()=>{if(o._proxyFormState.isDirty){const i=o._getDirty();i!==r.isDirty&&o._subjects.state.next({isDirty:i})}},[o,r.isDirty]),Ye.useEffect(()=>{e.values&&!Lt(e.values,a.current)?(o._reset(e.values,o._options.resetOptions),a.current=e.values,n(i=>({...i}))):o._resetDefaultValues()},[e.values,o]),Ye.useEffect(()=>{e.errors&&!Le(e.errors)&&o._setErrors(e.errors)},[e.errors,o]),Ye.useEffect(()=>{o._state.mount||(o._setValid(),o._state.mount=!0),o._state.watch&&(o._state.watch=!1,o._subjects.state.next({...o._formState})),o._removeUnmounted()}),Ye.useEffect(()=>{e.shouldUnregister&&o._subjects.state.next({values:o._getWatch()})},[e.shouldUnregister,o]),t.current.formState=yd(r,o),t.current}const $s=(e,t,a)=>{if(e&&"reportValidity"in e){const r=W(a,t);e.setCustomValidity(r&&r.message||""),e.reportValidity()}},To=(e,t)=>{for(const a in t.fields){const r=t.fields[a];r&&r.ref&&"reportValidity"in r.ref?$s(r.ref,a,e):r.refs&&r.refs.forEach(n=>$s(n,a,e))}},Id=(e,t)=>{t.shouldUseNativeValidation&&To(e,t);const a={};for(const r in e){const n=W(t.fields,r),o=Object.assign(e[r]||{},{ref:n&&n.ref});if(Pd(t.names||Object.keys(e),r)){const i=Object.assign({},W(a,r));we(i,"root",o),we(a,r,i)}else we(a,r,o)}return a},Pd=(e,t)=>e.some(a=>a.startsWith(t+"."));var Rd=function(e,t){for(var a={};e.length;){var r=e[0],n=r.code,o=r.message,i=r.path.join(".");if(!a[i])if("unionErrors"in r){var l=r.unionErrors[0].errors[0];a[i]={message:l.message,type:l.code}}else a[i]={message:o,type:n};if("unionErrors"in r&&r.unionErrors.forEach(function(f){return f.errors.forEach(function(m){return e.push(m)})}),t){var c=a[i].types,u=c&&c[r.code];a[i]=ko(i,t,a,n,u?[].concat(u,r.message):r.message)}e.shift()}return a},Je=function(e,t,a){return a===void 0&&(a={}),function(r,n,o){try{return Promise.resolve(function(i,l){try{var c=Promise.resolve(e[a.mode==="sync"?"parse":"parseAsync"](r,t)).then(function(u){return o.shouldUseNativeValidation&&To({},o),{errors:{},values:a.raw?r:u}})}catch(u){return l(u)}return c&&c.then?c.then(void 0,l):c}(0,function(i){if(function(l){return Array.isArray(l==null?void 0:l.errors)}(i))return{values:{},errors:Id(Rd(i.errors,!o.shouldUseNativeValidation&&o.criteriaMode==="all"),o)};throw i}))}catch(i){return Promise.reject(i)}}},he;(function(e){e.assertEqual=n=>n;function t(n){}e.assertIs=t;function a(n){throw new Error}e.assertNever=a,e.arrayToEnum=n=>{const o={};for(const i of n)o[i]=i;return o},e.getValidEnumValues=n=>{const o=e.objectKeys(n).filter(l=>typeof n[n[l]]!="number"),i={};for(const l of o)i[l]=n[l];return e.objectValues(i)},e.objectValues=n=>e.objectKeys(n).map(function(o){return n[o]}),e.objectKeys=typeof Object.keys=="function"?n=>Object.keys(n):n=>{const o=[];for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&o.push(i);return o},e.find=(n,o)=>{for(const i of n)if(o(i))return i},e.isInteger=typeof Number.isInteger=="function"?n=>Number.isInteger(n):n=>typeof n=="number"&&isFinite(n)&&Math.floor(n)===n;function r(n,o=" | "){return n.map(i=>typeof i=="string"?`'${i}'`:i).join(o)}e.joinValues=r,e.jsonStringifyReplacer=(n,o)=>typeof o=="bigint"?o.toString():o})(he||(he={}));var Ws;(function(e){e.mergeShapes=(t,a)=>({...t,...a})})(Ws||(Ws={}));const B=he.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Ut=e=>{switch(typeof e){case"undefined":return B.undefined;case"string":return B.string;case"number":return isNaN(e)?B.nan:B.number;case"boolean":return B.boolean;case"function":return B.function;case"bigint":return B.bigint;case"symbol":return B.symbol;case"object":return Array.isArray(e)?B.array:e===null?B.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?B.promise:typeof Map<"u"&&e instanceof Map?B.map:typeof Set<"u"&&e instanceof Set?B.set:typeof Date<"u"&&e instanceof Date?B.date:B.object;default:return B.unknown}},E=he.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class ot extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const a=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,a):this.__proto__=a,this.name="ZodError",this.issues=t}format(t){const a=t||function(o){return o.message},r={_errors:[]},n=o=>{for(const i of o.issues)if(i.code==="invalid_union")i.unionErrors.map(n);else if(i.code==="invalid_return_type")n(i.returnTypeError);else if(i.code==="invalid_arguments")n(i.argumentsError);else if(i.path.length===0)r._errors.push(a(i));else{let l=r,c=0;for(;c<i.path.length;){const u=i.path[c];c===i.path.length-1?(l[u]=l[u]||{_errors:[]},l[u]._errors.push(a(i))):l[u]=l[u]||{_errors:[]},l=l[u],c++}}};return n(this),r}static assert(t){if(!(t instanceof ot))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,he.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=a=>a.message){const a={},r=[];for(const n of this.issues)n.path.length>0?(a[n.path[0]]=a[n.path[0]]||[],a[n.path[0]].push(t(n))):r.push(t(n));return{formErrors:r,fieldErrors:a}}get formErrors(){return this.flatten()}}ot.create=e=>new ot(e);const Fa=(e,t)=>{let a;switch(e.code){case E.invalid_type:e.received===B.undefined?a="Required":a=`Expected ${e.expected}, received ${e.received}`;break;case E.invalid_literal:a=`Invalid literal value, expected ${JSON.stringify(e.expected,he.jsonStringifyReplacer)}`;break;case E.unrecognized_keys:a=`Unrecognized key(s) in object: ${he.joinValues(e.keys,", ")}`;break;case E.invalid_union:a="Invalid input";break;case E.invalid_union_discriminator:a=`Invalid discriminator value. Expected ${he.joinValues(e.options)}`;break;case E.invalid_enum_value:a=`Invalid enum value. Expected ${he.joinValues(e.options)}, received '${e.received}'`;break;case E.invalid_arguments:a="Invalid function arguments";break;case E.invalid_return_type:a="Invalid function return type";break;case E.invalid_date:a="Invalid date";break;case E.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(a=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(a=`${a} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?a=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?a=`Invalid input: must end with "${e.validation.endsWith}"`:he.assertNever(e.validation):e.validation!=="regex"?a=`Invalid ${e.validation}`:a="Invalid";break;case E.too_small:e.type==="array"?a=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?a=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?a=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?a=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:a="Invalid input";break;case E.too_big:e.type==="array"?a=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?a=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?a=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?a=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?a=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:a="Invalid input";break;case E.custom:a="Invalid input";break;case E.invalid_intersection_types:a="Intersection results could not be merged";break;case E.not_multiple_of:a=`Number must be a multiple of ${e.multipleOf}`;break;case E.not_finite:a="Number must be finite";break;default:a=t.defaultError,he.assertNever(e)}return{message:a}};let Od=Fa;function _n(){return Od}const wn=e=>{const{data:t,path:a,errorMaps:r,issueData:n}=e,o=[...a,...n.path||[]],i={...n,path:o};if(n.message!==void 0)return{...n,path:o,message:n.message};let l="";const c=r.filter(u=>!!u).slice().reverse();for(const u of c)l=u(i,{data:t,defaultError:l}).message;return{...n,path:o,message:l}};function U(e,t){const a=_n(),r=wn({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,a,a===Fa?void 0:Fa].filter(n=>!!n)});e.common.issues.push(r)}class $e{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,a){const r=[];for(const n of a){if(n.status==="aborted")return ne;n.status==="dirty"&&t.dirty(),r.push(n.value)}return{status:t.value,value:r}}static async mergeObjectAsync(t,a){const r=[];for(const n of a){const o=await n.key,i=await n.value;r.push({key:o,value:i})}return $e.mergeObjectSync(t,r)}static mergeObjectSync(t,a){const r={};for(const n of a){const{key:o,value:i}=n;if(o.status==="aborted"||i.status==="aborted")return ne;o.status==="dirty"&&t.dirty(),i.status==="dirty"&&t.dirty(),o.value!=="__proto__"&&(typeof i.value<"u"||n.alwaysSet)&&(r[o.value]=i.value)}return{status:t.value,value:r}}}const ne=Object.freeze({status:"aborted"}),Sa=e=>({status:"dirty",value:e}),Ze=e=>({status:"valid",value:e}),zs=e=>e.status==="aborted",Gs=e=>e.status==="dirty",ha=e=>e.status==="valid",mr=e=>typeof Promise<"u"&&e instanceof Promise;function hr(e,t,a,r){if(typeof t=="function"?e!==t||!0:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t.get(e)}function Io(e,t,a,r,n){if(typeof t=="function"?e!==t||!0:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(e,a),a}var K;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(K||(K={}));var Ca,Ma;class jt{constructor(t,a,r,n){this._cachedPath=[],this.parent=t,this.data=a,this._path=r,this._key=n}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Hs=(e,t)=>{if(ha(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const a=new ot(e.common.issues);return this._error=a,this._error}}};function ie(e){if(!e)return{};const{errorMap:t,invalid_type_error:a,required_error:r,description:n}=e;if(t&&(a||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:n}:{errorMap:(i,l)=>{var c,u;const{message:f}=e;return i.code==="invalid_enum_value"?{message:f??l.defaultError}:typeof l.data>"u"?{message:(c=f??r)!==null&&c!==void 0?c:l.defaultError}:i.code!=="invalid_type"?{message:l.defaultError}:{message:(u=f??a)!==null&&u!==void 0?u:l.defaultError}},description:n}}class ue{get description(){return this._def.description}_getType(t){return Ut(t.data)}_getOrReturnCtx(t,a){return a||{common:t.parent.common,data:t.data,parsedType:Ut(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new $e,ctx:{common:t.parent.common,data:t.data,parsedType:Ut(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const a=this._parse(t);if(mr(a))throw new Error("Synchronous parse encountered promise.");return a}_parseAsync(t){const a=this._parse(t);return Promise.resolve(a)}parse(t,a){const r=this.safeParse(t,a);if(r.success)return r.data;throw r.error}safeParse(t,a){var r;const n={common:{issues:[],async:(r=a==null?void 0:a.async)!==null&&r!==void 0?r:!1,contextualErrorMap:a==null?void 0:a.errorMap},path:(a==null?void 0:a.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Ut(t)},o=this._parseSync({data:t,path:n.path,parent:n});return Hs(n,o)}"~validate"(t){var a,r;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Ut(t)};if(!this["~standard"].async)try{const o=this._parseSync({data:t,path:[],parent:n});return ha(o)?{value:o.value}:{issues:n.common.issues}}catch(o){!((r=(a=o==null?void 0:o.message)===null||a===void 0?void 0:a.toLowerCase())===null||r===void 0)&&r.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:n}).then(o=>ha(o)?{value:o.value}:{issues:n.common.issues})}async parseAsync(t,a){const r=await this.safeParseAsync(t,a);if(r.success)return r.data;throw r.error}async safeParseAsync(t,a){const r={common:{issues:[],contextualErrorMap:a==null?void 0:a.errorMap,async:!0},path:(a==null?void 0:a.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Ut(t)},n=this._parse({data:t,path:r.path,parent:r}),o=await(mr(n)?n:Promise.resolve(n));return Hs(r,o)}refine(t,a){const r=n=>typeof a=="string"||typeof a>"u"?{message:a}:typeof a=="function"?a(n):a;return this._refinement((n,o)=>{const i=t(n),l=()=>o.addIssue({code:E.custom,...r(n)});return typeof Promise<"u"&&i instanceof Promise?i.then(c=>c?!0:(l(),!1)):i?!0:(l(),!1)})}refinement(t,a){return this._refinement((r,n)=>t(r)?!0:(n.addIssue(typeof a=="function"?a(r,n):a),!1))}_refinement(t){return new Et({schema:this,typeName:ae.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:a=>this["~validate"](a)}}optional(){return Mt.create(this,this._def)}nullable(){return Jt.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return wt.create(this)}promise(){return La.create(this,this._def)}or(t){return yr.create([this,t],this._def)}and(t){return xr.create(this,t,this._def)}transform(t){return new Et({...ie(this._def),schema:this,typeName:ae.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const a=typeof t=="function"?t:()=>t;return new Nr({...ie(this._def),innerType:this,defaultValue:a,typeName:ae.ZodDefault})}brand(){return new Fo({typeName:ae.ZodBranded,type:this,...ie(this._def)})}catch(t){const a=typeof t=="function"?t:()=>t;return new kr({...ie(this._def),innerType:this,catchValue:a,typeName:ae.ZodCatch})}describe(t){const a=this.constructor;return new a({...this._def,description:t})}pipe(t){return Ur.create(this,t)}readonly(){return Sr.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Fd=/^c[^\s-]{8,}$/i,Ud=/^[0-9a-z]+$/,Ld=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Vd=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Bd=/^[a-z0-9_-]{21}$/i,$d=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Wd=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,zd=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Gd="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let en;const Hd=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Zd=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Kd=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Yd=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,qd=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Jd=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Po="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Xd=new RegExp(`^${Po}$`);function Ro(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`),t}function Qd(e){return new RegExp(`^${Ro(e)}$`)}function eu(e){let t=`${Po}T${Ro(e)}`;const a=[];return a.push(e.local?"Z?":"Z"),e.offset&&a.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${a.join("|")})`,new RegExp(`^${t}$`)}function tu(e,t){return!!((t==="v4"||!t)&&Hd.test(e)||(t==="v6"||!t)&&Kd.test(e))}function au(e,t){if(!$d.test(e))return!1;try{const[a]=e.split("."),r=a.replace(/-/g,"+").replace(/_/g,"/").padEnd(a.length+(4-a.length%4)%4,"="),n=JSON.parse(atob(r));return!(typeof n!="object"||n===null||!n.typ||!n.alg||t&&n.alg!==t)}catch{return!1}}function ru(e,t){return!!((t==="v4"||!t)&&Zd.test(e)||(t==="v6"||!t)&&Yd.test(e))}class bt extends ue{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==B.string){const o=this._getOrReturnCtx(t);return U(o,{code:E.invalid_type,expected:B.string,received:o.parsedType}),ne}const r=new $e;let n;for(const o of this._def.checks)if(o.kind==="min")t.data.length<o.value&&(n=this._getOrReturnCtx(t,n),U(n,{code:E.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),r.dirty());else if(o.kind==="max")t.data.length>o.value&&(n=this._getOrReturnCtx(t,n),U(n,{code:E.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),r.dirty());else if(o.kind==="length"){const i=t.data.length>o.value,l=t.data.length<o.value;(i||l)&&(n=this._getOrReturnCtx(t,n),i?U(n,{code:E.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):l&&U(n,{code:E.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),r.dirty())}else if(o.kind==="email")zd.test(t.data)||(n=this._getOrReturnCtx(t,n),U(n,{validation:"email",code:E.invalid_string,message:o.message}),r.dirty());else if(o.kind==="emoji")en||(en=new RegExp(Gd,"u")),en.test(t.data)||(n=this._getOrReturnCtx(t,n),U(n,{validation:"emoji",code:E.invalid_string,message:o.message}),r.dirty());else if(o.kind==="uuid")Vd.test(t.data)||(n=this._getOrReturnCtx(t,n),U(n,{validation:"uuid",code:E.invalid_string,message:o.message}),r.dirty());else if(o.kind==="nanoid")Bd.test(t.data)||(n=this._getOrReturnCtx(t,n),U(n,{validation:"nanoid",code:E.invalid_string,message:o.message}),r.dirty());else if(o.kind==="cuid")Fd.test(t.data)||(n=this._getOrReturnCtx(t,n),U(n,{validation:"cuid",code:E.invalid_string,message:o.message}),r.dirty());else if(o.kind==="cuid2")Ud.test(t.data)||(n=this._getOrReturnCtx(t,n),U(n,{validation:"cuid2",code:E.invalid_string,message:o.message}),r.dirty());else if(o.kind==="ulid")Ld.test(t.data)||(n=this._getOrReturnCtx(t,n),U(n,{validation:"ulid",code:E.invalid_string,message:o.message}),r.dirty());else if(o.kind==="url")try{new URL(t.data)}catch{n=this._getOrReturnCtx(t,n),U(n,{validation:"url",code:E.invalid_string,message:o.message}),r.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(t.data)||(n=this._getOrReturnCtx(t,n),U(n,{validation:"regex",code:E.invalid_string,message:o.message}),r.dirty())):o.kind==="trim"?t.data=t.data.trim():o.kind==="includes"?t.data.includes(o.value,o.position)||(n=this._getOrReturnCtx(t,n),U(n,{code:E.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),r.dirty()):o.kind==="toLowerCase"?t.data=t.data.toLowerCase():o.kind==="toUpperCase"?t.data=t.data.toUpperCase():o.kind==="startsWith"?t.data.startsWith(o.value)||(n=this._getOrReturnCtx(t,n),U(n,{code:E.invalid_string,validation:{startsWith:o.value},message:o.message}),r.dirty()):o.kind==="endsWith"?t.data.endsWith(o.value)||(n=this._getOrReturnCtx(t,n),U(n,{code:E.invalid_string,validation:{endsWith:o.value},message:o.message}),r.dirty()):o.kind==="datetime"?eu(o).test(t.data)||(n=this._getOrReturnCtx(t,n),U(n,{code:E.invalid_string,validation:"datetime",message:o.message}),r.dirty()):o.kind==="date"?Xd.test(t.data)||(n=this._getOrReturnCtx(t,n),U(n,{code:E.invalid_string,validation:"date",message:o.message}),r.dirty()):o.kind==="time"?Qd(o).test(t.data)||(n=this._getOrReturnCtx(t,n),U(n,{code:E.invalid_string,validation:"time",message:o.message}),r.dirty()):o.kind==="duration"?Wd.test(t.data)||(n=this._getOrReturnCtx(t,n),U(n,{validation:"duration",code:E.invalid_string,message:o.message}),r.dirty()):o.kind==="ip"?tu(t.data,o.version)||(n=this._getOrReturnCtx(t,n),U(n,{validation:"ip",code:E.invalid_string,message:o.message}),r.dirty()):o.kind==="jwt"?au(t.data,o.alg)||(n=this._getOrReturnCtx(t,n),U(n,{validation:"jwt",code:E.invalid_string,message:o.message}),r.dirty()):o.kind==="cidr"?ru(t.data,o.version)||(n=this._getOrReturnCtx(t,n),U(n,{validation:"cidr",code:E.invalid_string,message:o.message}),r.dirty()):o.kind==="base64"?qd.test(t.data)||(n=this._getOrReturnCtx(t,n),U(n,{validation:"base64",code:E.invalid_string,message:o.message}),r.dirty()):o.kind==="base64url"?Jd.test(t.data)||(n=this._getOrReturnCtx(t,n),U(n,{validation:"base64url",code:E.invalid_string,message:o.message}),r.dirty()):he.assertNever(o);return{status:r.value,value:t.data}}_regex(t,a,r){return this.refinement(n=>t.test(n),{validation:a,code:E.invalid_string,...K.errToObj(r)})}_addCheck(t){return new bt({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...K.errToObj(t)})}url(t){return this._addCheck({kind:"url",...K.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...K.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...K.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...K.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...K.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...K.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...K.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...K.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...K.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...K.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...K.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...K.errToObj(t)})}datetime(t){var a,r;return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(a=t==null?void 0:t.offset)!==null&&a!==void 0?a:!1,local:(r=t==null?void 0:t.local)!==null&&r!==void 0?r:!1,...K.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...K.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...K.errToObj(t)})}regex(t,a){return this._addCheck({kind:"regex",regex:t,...K.errToObj(a)})}includes(t,a){return this._addCheck({kind:"includes",value:t,position:a==null?void 0:a.position,...K.errToObj(a==null?void 0:a.message)})}startsWith(t,a){return this._addCheck({kind:"startsWith",value:t,...K.errToObj(a)})}endsWith(t,a){return this._addCheck({kind:"endsWith",value:t,...K.errToObj(a)})}min(t,a){return this._addCheck({kind:"min",value:t,...K.errToObj(a)})}max(t,a){return this._addCheck({kind:"max",value:t,...K.errToObj(a)})}length(t,a){return this._addCheck({kind:"length",value:t,...K.errToObj(a)})}nonempty(t){return this.min(1,K.errToObj(t))}trim(){return new bt({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new bt({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new bt({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const a of this._def.checks)a.kind==="min"&&(t===null||a.value>t)&&(t=a.value);return t}get maxLength(){let t=null;for(const a of this._def.checks)a.kind==="max"&&(t===null||a.value<t)&&(t=a.value);return t}}bt.create=e=>{var t;return new bt({checks:[],typeName:ae.ZodString,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...ie(e)})};function nu(e,t){const a=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,n=a>r?a:r,o=parseInt(e.toFixed(n).replace(".","")),i=parseInt(t.toFixed(n).replace(".",""));return o%i/Math.pow(10,n)}class Kt extends ue{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==B.number){const o=this._getOrReturnCtx(t);return U(o,{code:E.invalid_type,expected:B.number,received:o.parsedType}),ne}let r;const n=new $e;for(const o of this._def.checks)o.kind==="int"?he.isInteger(t.data)||(r=this._getOrReturnCtx(t,r),U(r,{code:E.invalid_type,expected:"integer",received:"float",message:o.message}),n.dirty()):o.kind==="min"?(o.inclusive?t.data<o.value:t.data<=o.value)&&(r=this._getOrReturnCtx(t,r),U(r,{code:E.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),n.dirty()):o.kind==="max"?(o.inclusive?t.data>o.value:t.data>=o.value)&&(r=this._getOrReturnCtx(t,r),U(r,{code:E.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),n.dirty()):o.kind==="multipleOf"?nu(t.data,o.value)!==0&&(r=this._getOrReturnCtx(t,r),U(r,{code:E.not_multiple_of,multipleOf:o.value,message:o.message}),n.dirty()):o.kind==="finite"?Number.isFinite(t.data)||(r=this._getOrReturnCtx(t,r),U(r,{code:E.not_finite,message:o.message}),n.dirty()):he.assertNever(o);return{status:n.value,value:t.data}}gte(t,a){return this.setLimit("min",t,!0,K.toString(a))}gt(t,a){return this.setLimit("min",t,!1,K.toString(a))}lte(t,a){return this.setLimit("max",t,!0,K.toString(a))}lt(t,a){return this.setLimit("max",t,!1,K.toString(a))}setLimit(t,a,r,n){return new Kt({...this._def,checks:[...this._def.checks,{kind:t,value:a,inclusive:r,message:K.toString(n)}]})}_addCheck(t){return new Kt({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:K.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:K.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:K.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:K.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:K.toString(t)})}multipleOf(t,a){return this._addCheck({kind:"multipleOf",value:t,message:K.toString(a)})}finite(t){return this._addCheck({kind:"finite",message:K.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:K.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:K.toString(t)})}get minValue(){let t=null;for(const a of this._def.checks)a.kind==="min"&&(t===null||a.value>t)&&(t=a.value);return t}get maxValue(){let t=null;for(const a of this._def.checks)a.kind==="max"&&(t===null||a.value<t)&&(t=a.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&he.isInteger(t.value))}get isFinite(){let t=null,a=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(a===null||r.value>a)&&(a=r.value):r.kind==="max"&&(t===null||r.value<t)&&(t=r.value)}return Number.isFinite(a)&&Number.isFinite(t)}}Kt.create=e=>new Kt({checks:[],typeName:ae.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...ie(e)});class Yt extends ue{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==B.bigint)return this._getInvalidInput(t);let r;const n=new $e;for(const o of this._def.checks)o.kind==="min"?(o.inclusive?t.data<o.value:t.data<=o.value)&&(r=this._getOrReturnCtx(t,r),U(r,{code:E.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),n.dirty()):o.kind==="max"?(o.inclusive?t.data>o.value:t.data>=o.value)&&(r=this._getOrReturnCtx(t,r),U(r,{code:E.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),n.dirty()):o.kind==="multipleOf"?t.data%o.value!==BigInt(0)&&(r=this._getOrReturnCtx(t,r),U(r,{code:E.not_multiple_of,multipleOf:o.value,message:o.message}),n.dirty()):he.assertNever(o);return{status:n.value,value:t.data}}_getInvalidInput(t){const a=this._getOrReturnCtx(t);return U(a,{code:E.invalid_type,expected:B.bigint,received:a.parsedType}),ne}gte(t,a){return this.setLimit("min",t,!0,K.toString(a))}gt(t,a){return this.setLimit("min",t,!1,K.toString(a))}lte(t,a){return this.setLimit("max",t,!0,K.toString(a))}lt(t,a){return this.setLimit("max",t,!1,K.toString(a))}setLimit(t,a,r,n){return new Yt({...this._def,checks:[...this._def.checks,{kind:t,value:a,inclusive:r,message:K.toString(n)}]})}_addCheck(t){return new Yt({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:K.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:K.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:K.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:K.toString(t)})}multipleOf(t,a){return this._addCheck({kind:"multipleOf",value:t,message:K.toString(a)})}get minValue(){let t=null;for(const a of this._def.checks)a.kind==="min"&&(t===null||a.value>t)&&(t=a.value);return t}get maxValue(){let t=null;for(const a of this._def.checks)a.kind==="max"&&(t===null||a.value<t)&&(t=a.value);return t}}Yt.create=e=>{var t;return new Yt({checks:[],typeName:ae.ZodBigInt,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...ie(e)})};class pr extends ue{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==B.boolean){const r=this._getOrReturnCtx(t);return U(r,{code:E.invalid_type,expected:B.boolean,received:r.parsedType}),ne}return Ze(t.data)}}pr.create=e=>new pr({typeName:ae.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...ie(e)});class pa extends ue{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==B.date){const o=this._getOrReturnCtx(t);return U(o,{code:E.invalid_type,expected:B.date,received:o.parsedType}),ne}if(isNaN(t.data.getTime())){const o=this._getOrReturnCtx(t);return U(o,{code:E.invalid_date}),ne}const r=new $e;let n;for(const o of this._def.checks)o.kind==="min"?t.data.getTime()<o.value&&(n=this._getOrReturnCtx(t,n),U(n,{code:E.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),r.dirty()):o.kind==="max"?t.data.getTime()>o.value&&(n=this._getOrReturnCtx(t,n),U(n,{code:E.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),r.dirty()):he.assertNever(o);return{status:r.value,value:new Date(t.data.getTime())}}_addCheck(t){return new pa({...this._def,checks:[...this._def.checks,t]})}min(t,a){return this._addCheck({kind:"min",value:t.getTime(),message:K.toString(a)})}max(t,a){return this._addCheck({kind:"max",value:t.getTime(),message:K.toString(a)})}get minDate(){let t=null;for(const a of this._def.checks)a.kind==="min"&&(t===null||a.value>t)&&(t=a.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const a of this._def.checks)a.kind==="max"&&(t===null||a.value<t)&&(t=a.value);return t!=null?new Date(t):null}}pa.create=e=>new pa({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:ae.ZodDate,...ie(e)});class jn extends ue{_parse(t){if(this._getType(t)!==B.symbol){const r=this._getOrReturnCtx(t);return U(r,{code:E.invalid_type,expected:B.symbol,received:r.parsedType}),ne}return Ze(t.data)}}jn.create=e=>new jn({typeName:ae.ZodSymbol,...ie(e)});class gr extends ue{_parse(t){if(this._getType(t)!==B.undefined){const r=this._getOrReturnCtx(t);return U(r,{code:E.invalid_type,expected:B.undefined,received:r.parsedType}),ne}return Ze(t.data)}}gr.create=e=>new gr({typeName:ae.ZodUndefined,...ie(e)});class vr extends ue{_parse(t){if(this._getType(t)!==B.null){const r=this._getOrReturnCtx(t);return U(r,{code:E.invalid_type,expected:B.null,received:r.parsedType}),ne}return Ze(t.data)}}vr.create=e=>new vr({typeName:ae.ZodNull,...ie(e)});class Ua extends ue{constructor(){super(...arguments),this._any=!0}_parse(t){return Ze(t.data)}}Ua.create=e=>new Ua({typeName:ae.ZodAny,...ie(e)});class da extends ue{constructor(){super(...arguments),this._unknown=!0}_parse(t){return Ze(t.data)}}da.create=e=>new da({typeName:ae.ZodUnknown,...ie(e)});class Vt extends ue{_parse(t){const a=this._getOrReturnCtx(t);return U(a,{code:E.invalid_type,expected:B.never,received:a.parsedType}),ne}}Vt.create=e=>new Vt({typeName:ae.ZodNever,...ie(e)});class Nn extends ue{_parse(t){if(this._getType(t)!==B.undefined){const r=this._getOrReturnCtx(t);return U(r,{code:E.invalid_type,expected:B.void,received:r.parsedType}),ne}return Ze(t.data)}}Nn.create=e=>new Nn({typeName:ae.ZodVoid,...ie(e)});class wt extends ue{_parse(t){const{ctx:a,status:r}=this._processInputParams(t),n=this._def;if(a.parsedType!==B.array)return U(a,{code:E.invalid_type,expected:B.array,received:a.parsedType}),ne;if(n.exactLength!==null){const i=a.data.length>n.exactLength.value,l=a.data.length<n.exactLength.value;(i||l)&&(U(a,{code:i?E.too_big:E.too_small,minimum:l?n.exactLength.value:void 0,maximum:i?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),r.dirty())}if(n.minLength!==null&&a.data.length<n.minLength.value&&(U(a,{code:E.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),r.dirty()),n.maxLength!==null&&a.data.length>n.maxLength.value&&(U(a,{code:E.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),r.dirty()),a.common.async)return Promise.all([...a.data].map((i,l)=>n.type._parseAsync(new jt(a,i,a.path,l)))).then(i=>$e.mergeArray(r,i));const o=[...a.data].map((i,l)=>n.type._parseSync(new jt(a,i,a.path,l)));return $e.mergeArray(r,o)}get element(){return this._def.type}min(t,a){return new wt({...this._def,minLength:{value:t,message:K.toString(a)}})}max(t,a){return new wt({...this._def,maxLength:{value:t,message:K.toString(a)}})}length(t,a){return new wt({...this._def,exactLength:{value:t,message:K.toString(a)}})}nonempty(t){return this.min(1,t)}}wt.create=(e,t)=>new wt({type:e,minLength:null,maxLength:null,exactLength:null,typeName:ae.ZodArray,...ie(t)});function ca(e){if(e instanceof ke){const t={};for(const a in e.shape){const r=e.shape[a];t[a]=Mt.create(ca(r))}return new ke({...e._def,shape:()=>t})}else return e instanceof wt?new wt({...e._def,type:ca(e.element)}):e instanceof Mt?Mt.create(ca(e.unwrap())):e instanceof Jt?Jt.create(ca(e.unwrap())):e instanceof Dt?Dt.create(e.items.map(t=>ca(t))):e}class ke extends ue{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),a=he.objectKeys(t);return this._cached={shape:t,keys:a}}_parse(t){if(this._getType(t)!==B.object){const u=this._getOrReturnCtx(t);return U(u,{code:E.invalid_type,expected:B.object,received:u.parsedType}),ne}const{status:r,ctx:n}=this._processInputParams(t),{shape:o,keys:i}=this._getCached(),l=[];if(!(this._def.catchall instanceof Vt&&this._def.unknownKeys==="strip"))for(const u in n.data)i.includes(u)||l.push(u);const c=[];for(const u of i){const f=o[u],m=n.data[u];c.push({key:{status:"valid",value:u},value:f._parse(new jt(n,m,n.path,u)),alwaysSet:u in n.data})}if(this._def.catchall instanceof Vt){const u=this._def.unknownKeys;if(u==="passthrough")for(const f of l)c.push({key:{status:"valid",value:f},value:{status:"valid",value:n.data[f]}});else if(u==="strict")l.length>0&&(U(n,{code:E.unrecognized_keys,keys:l}),r.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const f of l){const m=n.data[f];c.push({key:{status:"valid",value:f},value:u._parse(new jt(n,m,n.path,f)),alwaysSet:f in n.data})}}return n.common.async?Promise.resolve().then(async()=>{const u=[];for(const f of c){const m=await f.key,p=await f.value;u.push({key:m,value:p,alwaysSet:f.alwaysSet})}return u}).then(u=>$e.mergeObjectSync(r,u)):$e.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(t){return K.errToObj,new ke({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(a,r)=>{var n,o,i,l;const c=(i=(o=(n=this._def).errorMap)===null||o===void 0?void 0:o.call(n,a,r).message)!==null&&i!==void 0?i:r.defaultError;return a.code==="unrecognized_keys"?{message:(l=K.errToObj(t).message)!==null&&l!==void 0?l:c}:{message:c}}}:{}})}strip(){return new ke({...this._def,unknownKeys:"strip"})}passthrough(){return new ke({...this._def,unknownKeys:"passthrough"})}extend(t){return new ke({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new ke({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:ae.ZodObject})}setKey(t,a){return this.augment({[t]:a})}catchall(t){return new ke({...this._def,catchall:t})}pick(t){const a={};return he.objectKeys(t).forEach(r=>{t[r]&&this.shape[r]&&(a[r]=this.shape[r])}),new ke({...this._def,shape:()=>a})}omit(t){const a={};return he.objectKeys(this.shape).forEach(r=>{t[r]||(a[r]=this.shape[r])}),new ke({...this._def,shape:()=>a})}deepPartial(){return ca(this)}partial(t){const a={};return he.objectKeys(this.shape).forEach(r=>{const n=this.shape[r];t&&!t[r]?a[r]=n:a[r]=n.optional()}),new ke({...this._def,shape:()=>a})}required(t){const a={};return he.objectKeys(this.shape).forEach(r=>{if(t&&!t[r])a[r]=this.shape[r];else{let o=this.shape[r];for(;o instanceof Mt;)o=o._def.innerType;a[r]=o}}),new ke({...this._def,shape:()=>a})}keyof(){return Oo(he.objectKeys(this.shape))}}ke.create=(e,t)=>new ke({shape:()=>e,unknownKeys:"strip",catchall:Vt.create(),typeName:ae.ZodObject,...ie(t)});ke.strictCreate=(e,t)=>new ke({shape:()=>e,unknownKeys:"strict",catchall:Vt.create(),typeName:ae.ZodObject,...ie(t)});ke.lazycreate=(e,t)=>new ke({shape:e,unknownKeys:"strip",catchall:Vt.create(),typeName:ae.ZodObject,...ie(t)});class yr extends ue{_parse(t){const{ctx:a}=this._processInputParams(t),r=this._def.options;function n(o){for(const l of o)if(l.result.status==="valid")return l.result;for(const l of o)if(l.result.status==="dirty")return a.common.issues.push(...l.ctx.common.issues),l.result;const i=o.map(l=>new ot(l.ctx.common.issues));return U(a,{code:E.invalid_union,unionErrors:i}),ne}if(a.common.async)return Promise.all(r.map(async o=>{const i={...a,common:{...a.common,issues:[]},parent:null};return{result:await o._parseAsync({data:a.data,path:a.path,parent:i}),ctx:i}})).then(n);{let o;const i=[];for(const c of r){const u={...a,common:{...a.common,issues:[]},parent:null},f=c._parseSync({data:a.data,path:a.path,parent:u});if(f.status==="valid")return f;f.status==="dirty"&&!o&&(o={result:f,ctx:u}),u.common.issues.length&&i.push(u.common.issues)}if(o)return a.common.issues.push(...o.ctx.common.issues),o.result;const l=i.map(c=>new ot(c));return U(a,{code:E.invalid_union,unionErrors:l}),ne}}get options(){return this._def.options}}yr.create=(e,t)=>new yr({options:e,typeName:ae.ZodUnion,...ie(t)});const St=e=>e instanceof _r?St(e.schema):e instanceof Et?St(e.innerType()):e instanceof wr?[e.value]:e instanceof qt?e.options:e instanceof jr?he.objectValues(e.enum):e instanceof Nr?St(e._def.innerType):e instanceof gr?[void 0]:e instanceof vr?[null]:e instanceof Mt?[void 0,...St(e.unwrap())]:e instanceof Jt?[null,...St(e.unwrap())]:e instanceof Fo||e instanceof Sr?St(e.unwrap()):e instanceof kr?St(e._def.innerType):[];class qn extends ue{_parse(t){const{ctx:a}=this._processInputParams(t);if(a.parsedType!==B.object)return U(a,{code:E.invalid_type,expected:B.object,received:a.parsedType}),ne;const r=this.discriminator,n=a.data[r],o=this.optionsMap.get(n);return o?a.common.async?o._parseAsync({data:a.data,path:a.path,parent:a}):o._parseSync({data:a.data,path:a.path,parent:a}):(U(a,{code:E.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),ne)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,a,r){const n=new Map;for(const o of a){const i=St(o.shape[t]);if(!i.length)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(const l of i){if(n.has(l))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(l)}`);n.set(l,o)}}return new qn({typeName:ae.ZodDiscriminatedUnion,discriminator:t,options:a,optionsMap:n,...ie(r)})}}function kn(e,t){const a=Ut(e),r=Ut(t);if(e===t)return{valid:!0,data:e};if(a===B.object&&r===B.object){const n=he.objectKeys(t),o=he.objectKeys(e).filter(l=>n.indexOf(l)!==-1),i={...e,...t};for(const l of o){const c=kn(e[l],t[l]);if(!c.valid)return{valid:!1};i[l]=c.data}return{valid:!0,data:i}}else if(a===B.array&&r===B.array){if(e.length!==t.length)return{valid:!1};const n=[];for(let o=0;o<e.length;o++){const i=e[o],l=t[o],c=kn(i,l);if(!c.valid)return{valid:!1};n.push(c.data)}return{valid:!0,data:n}}else return a===B.date&&r===B.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class xr extends ue{_parse(t){const{status:a,ctx:r}=this._processInputParams(t),n=(o,i)=>{if(zs(o)||zs(i))return ne;const l=kn(o.value,i.value);return l.valid?((Gs(o)||Gs(i))&&a.dirty(),{status:a.value,value:l.data}):(U(r,{code:E.invalid_intersection_types}),ne)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([o,i])=>n(o,i)):n(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}xr.create=(e,t,a)=>new xr({left:e,right:t,typeName:ae.ZodIntersection,...ie(a)});class Dt extends ue{_parse(t){const{status:a,ctx:r}=this._processInputParams(t);if(r.parsedType!==B.array)return U(r,{code:E.invalid_type,expected:B.array,received:r.parsedType}),ne;if(r.data.length<this._def.items.length)return U(r,{code:E.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ne;!this._def.rest&&r.data.length>this._def.items.length&&(U(r,{code:E.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),a.dirty());const o=[...r.data].map((i,l)=>{const c=this._def.items[l]||this._def.rest;return c?c._parse(new jt(r,i,r.path,l)):null}).filter(i=>!!i);return r.common.async?Promise.all(o).then(i=>$e.mergeArray(a,i)):$e.mergeArray(a,o)}get items(){return this._def.items}rest(t){return new Dt({...this._def,rest:t})}}Dt.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Dt({items:e,typeName:ae.ZodTuple,rest:null,...ie(t)})};class br extends ue{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:a,ctx:r}=this._processInputParams(t);if(r.parsedType!==B.object)return U(r,{code:E.invalid_type,expected:B.object,received:r.parsedType}),ne;const n=[],o=this._def.keyType,i=this._def.valueType;for(const l in r.data)n.push({key:o._parse(new jt(r,l,r.path,l)),value:i._parse(new jt(r,r.data[l],r.path,l)),alwaysSet:l in r.data});return r.common.async?$e.mergeObjectAsync(a,n):$e.mergeObjectSync(a,n)}get element(){return this._def.valueType}static create(t,a,r){return a instanceof ue?new br({keyType:t,valueType:a,typeName:ae.ZodRecord,...ie(r)}):new br({keyType:bt.create(),valueType:t,typeName:ae.ZodRecord,...ie(a)})}}class Sn extends ue{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:a,ctx:r}=this._processInputParams(t);if(r.parsedType!==B.map)return U(r,{code:E.invalid_type,expected:B.map,received:r.parsedType}),ne;const n=this._def.keyType,o=this._def.valueType,i=[...r.data.entries()].map(([l,c],u)=>({key:n._parse(new jt(r,l,r.path,[u,"key"])),value:o._parse(new jt(r,c,r.path,[u,"value"]))}));if(r.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const c of i){const u=await c.key,f=await c.value;if(u.status==="aborted"||f.status==="aborted")return ne;(u.status==="dirty"||f.status==="dirty")&&a.dirty(),l.set(u.value,f.value)}return{status:a.value,value:l}})}else{const l=new Map;for(const c of i){const u=c.key,f=c.value;if(u.status==="aborted"||f.status==="aborted")return ne;(u.status==="dirty"||f.status==="dirty")&&a.dirty(),l.set(u.value,f.value)}return{status:a.value,value:l}}}}Sn.create=(e,t,a)=>new Sn({valueType:t,keyType:e,typeName:ae.ZodMap,...ie(a)});class ga extends ue{_parse(t){const{status:a,ctx:r}=this._processInputParams(t);if(r.parsedType!==B.set)return U(r,{code:E.invalid_type,expected:B.set,received:r.parsedType}),ne;const n=this._def;n.minSize!==null&&r.data.size<n.minSize.value&&(U(r,{code:E.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),a.dirty()),n.maxSize!==null&&r.data.size>n.maxSize.value&&(U(r,{code:E.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),a.dirty());const o=this._def.valueType;function i(c){const u=new Set;for(const f of c){if(f.status==="aborted")return ne;f.status==="dirty"&&a.dirty(),u.add(f.value)}return{status:a.value,value:u}}const l=[...r.data.values()].map((c,u)=>o._parse(new jt(r,c,r.path,u)));return r.common.async?Promise.all(l).then(c=>i(c)):i(l)}min(t,a){return new ga({...this._def,minSize:{value:t,message:K.toString(a)}})}max(t,a){return new ga({...this._def,maxSize:{value:t,message:K.toString(a)}})}size(t,a){return this.min(t,a).max(t,a)}nonempty(t){return this.min(1,t)}}ga.create=(e,t)=>new ga({valueType:e,minSize:null,maxSize:null,typeName:ae.ZodSet,...ie(t)});class Ia extends ue{constructor(){super(...arguments),this.validate=this.implement}_parse(t){const{ctx:a}=this._processInputParams(t);if(a.parsedType!==B.function)return U(a,{code:E.invalid_type,expected:B.function,received:a.parsedType}),ne;function r(l,c){return wn({data:l,path:a.path,errorMaps:[a.common.contextualErrorMap,a.schemaErrorMap,_n(),Fa].filter(u=>!!u),issueData:{code:E.invalid_arguments,argumentsError:c}})}function n(l,c){return wn({data:l,path:a.path,errorMaps:[a.common.contextualErrorMap,a.schemaErrorMap,_n(),Fa].filter(u=>!!u),issueData:{code:E.invalid_return_type,returnTypeError:c}})}const o={errorMap:a.common.contextualErrorMap},i=a.data;if(this._def.returns instanceof La){const l=this;return Ze(async function(...c){const u=new ot([]),f=await l._def.args.parseAsync(c,o).catch(v=>{throw u.addIssue(r(c,v)),u}),m=await Reflect.apply(i,this,f);return await l._def.returns._def.type.parseAsync(m,o).catch(v=>{throw u.addIssue(n(m,v)),u})})}else{const l=this;return Ze(function(...c){const u=l._def.args.safeParse(c,o);if(!u.success)throw new ot([r(c,u.error)]);const f=Reflect.apply(i,this,u.data),m=l._def.returns.safeParse(f,o);if(!m.success)throw new ot([n(f,m.error)]);return m.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new Ia({...this._def,args:Dt.create(t).rest(da.create())})}returns(t){return new Ia({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,a,r){return new Ia({args:t||Dt.create([]).rest(da.create()),returns:a||da.create(),typeName:ae.ZodFunction,...ie(r)})}}class _r extends ue{get schema(){return this._def.getter()}_parse(t){const{ctx:a}=this._processInputParams(t);return this._def.getter()._parse({data:a.data,path:a.path,parent:a})}}_r.create=(e,t)=>new _r({getter:e,typeName:ae.ZodLazy,...ie(t)});class wr extends ue{_parse(t){if(t.data!==this._def.value){const a=this._getOrReturnCtx(t);return U(a,{received:a.data,code:E.invalid_literal,expected:this._def.value}),ne}return{status:"valid",value:t.data}}get value(){return this._def.value}}wr.create=(e,t)=>new wr({value:e,typeName:ae.ZodLiteral,...ie(t)});function Oo(e,t){return new qt({values:e,typeName:ae.ZodEnum,...ie(t)})}class qt extends ue{constructor(){super(...arguments),Ca.set(this,void 0)}_parse(t){if(typeof t.data!="string"){const a=this._getOrReturnCtx(t),r=this._def.values;return U(a,{expected:he.joinValues(r),received:a.parsedType,code:E.invalid_type}),ne}if(hr(this,Ca)||Io(this,Ca,new Set(this._def.values)),!hr(this,Ca).has(t.data)){const a=this._getOrReturnCtx(t),r=this._def.values;return U(a,{received:a.data,code:E.invalid_enum_value,options:r}),ne}return Ze(t.data)}get options(){return this._def.values}get enum(){const t={};for(const a of this._def.values)t[a]=a;return t}get Values(){const t={};for(const a of this._def.values)t[a]=a;return t}get Enum(){const t={};for(const a of this._def.values)t[a]=a;return t}extract(t,a=this._def){return qt.create(t,{...this._def,...a})}exclude(t,a=this._def){return qt.create(this.options.filter(r=>!t.includes(r)),{...this._def,...a})}}Ca=new WeakMap;qt.create=Oo;class jr extends ue{constructor(){super(...arguments),Ma.set(this,void 0)}_parse(t){const a=he.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(t);if(r.parsedType!==B.string&&r.parsedType!==B.number){const n=he.objectValues(a);return U(r,{expected:he.joinValues(n),received:r.parsedType,code:E.invalid_type}),ne}if(hr(this,Ma)||Io(this,Ma,new Set(he.getValidEnumValues(this._def.values))),!hr(this,Ma).has(t.data)){const n=he.objectValues(a);return U(r,{received:r.data,code:E.invalid_enum_value,options:n}),ne}return Ze(t.data)}get enum(){return this._def.values}}Ma=new WeakMap;jr.create=(e,t)=>new jr({values:e,typeName:ae.ZodNativeEnum,...ie(t)});class La extends ue{unwrap(){return this._def.type}_parse(t){const{ctx:a}=this._processInputParams(t);if(a.parsedType!==B.promise&&a.common.async===!1)return U(a,{code:E.invalid_type,expected:B.promise,received:a.parsedType}),ne;const r=a.parsedType===B.promise?a.data:Promise.resolve(a.data);return Ze(r.then(n=>this._def.type.parseAsync(n,{path:a.path,errorMap:a.common.contextualErrorMap})))}}La.create=(e,t)=>new La({type:e,typeName:ae.ZodPromise,...ie(t)});class Et extends ue{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ae.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:a,ctx:r}=this._processInputParams(t),n=this._def.effect||null,o={addIssue:i=>{U(r,i),i.fatal?a.abort():a.dirty()},get path(){return r.path}};if(o.addIssue=o.addIssue.bind(o),n.type==="preprocess"){const i=n.transform(r.data,o);if(r.common.async)return Promise.resolve(i).then(async l=>{if(a.value==="aborted")return ne;const c=await this._def.schema._parseAsync({data:l,path:r.path,parent:r});return c.status==="aborted"?ne:c.status==="dirty"||a.value==="dirty"?Sa(c.value):c});{if(a.value==="aborted")return ne;const l=this._def.schema._parseSync({data:i,path:r.path,parent:r});return l.status==="aborted"?ne:l.status==="dirty"||a.value==="dirty"?Sa(l.value):l}}if(n.type==="refinement"){const i=l=>{const c=n.refinement(l,o);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(r.common.async===!1){const l=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return l.status==="aborted"?ne:(l.status==="dirty"&&a.dirty(),i(l.value),{status:a.value,value:l.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(l=>l.status==="aborted"?ne:(l.status==="dirty"&&a.dirty(),i(l.value).then(()=>({status:a.value,value:l.value}))))}if(n.type==="transform")if(r.common.async===!1){const i=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!ha(i))return i;const l=n.transform(i.value,o);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:a.value,value:l}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(i=>ha(i)?Promise.resolve(n.transform(i.value,o)).then(l=>({status:a.value,value:l})):i);he.assertNever(n)}}Et.create=(e,t,a)=>new Et({schema:e,typeName:ae.ZodEffects,effect:t,...ie(a)});Et.createWithPreprocess=(e,t,a)=>new Et({schema:t,effect:{type:"preprocess",transform:e},typeName:ae.ZodEffects,...ie(a)});class Mt extends ue{_parse(t){return this._getType(t)===B.undefined?Ze(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Mt.create=(e,t)=>new Mt({innerType:e,typeName:ae.ZodOptional,...ie(t)});class Jt extends ue{_parse(t){return this._getType(t)===B.null?Ze(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Jt.create=(e,t)=>new Jt({innerType:e,typeName:ae.ZodNullable,...ie(t)});class Nr extends ue{_parse(t){const{ctx:a}=this._processInputParams(t);let r=a.data;return a.parsedType===B.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:a.path,parent:a})}removeDefault(){return this._def.innerType}}Nr.create=(e,t)=>new Nr({innerType:e,typeName:ae.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...ie(t)});class kr extends ue{_parse(t){const{ctx:a}=this._processInputParams(t),r={...a,common:{...a.common,issues:[]}},n=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return mr(n)?n.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new ot(r.common.issues)},input:r.data})})):{status:"valid",value:n.status==="valid"?n.value:this._def.catchValue({get error(){return new ot(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}kr.create=(e,t)=>new kr({innerType:e,typeName:ae.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...ie(t)});class Cn extends ue{_parse(t){if(this._getType(t)!==B.nan){const r=this._getOrReturnCtx(t);return U(r,{code:E.invalid_type,expected:B.nan,received:r.parsedType}),ne}return{status:"valid",value:t.data}}}Cn.create=e=>new Cn({typeName:ae.ZodNaN,...ie(e)});class Fo extends ue{_parse(t){const{ctx:a}=this._processInputParams(t),r=a.data;return this._def.type._parse({data:r,path:a.path,parent:a})}unwrap(){return this._def.type}}class Ur extends ue{_parse(t){const{status:a,ctx:r}=this._processInputParams(t);if(r.common.async)return(async()=>{const o=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?ne:o.status==="dirty"?(a.dirty(),Sa(o.value)):this._def.out._parseAsync({data:o.value,path:r.path,parent:r})})();{const n=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return n.status==="aborted"?ne:n.status==="dirty"?(a.dirty(),{status:"dirty",value:n.value}):this._def.out._parseSync({data:n.value,path:r.path,parent:r})}}static create(t,a){return new Ur({in:t,out:a,typeName:ae.ZodPipeline})}}class Sr extends ue{_parse(t){const a=this._def.innerType._parse(t),r=n=>(ha(n)&&(n.value=Object.freeze(n.value)),n);return mr(a)?a.then(n=>r(n)):r(a)}unwrap(){return this._def.innerType}}Sr.create=(e,t)=>new Sr({innerType:e,typeName:ae.ZodReadonly,...ie(t)});function Zs(e,t){const a=typeof e=="function"?e(t):typeof e=="string"?{message:e}:e;return typeof a=="string"?{message:a}:a}function su(e,t={},a){return e?Ua.create().superRefine((r,n)=>{var o,i;const l=e(r);if(l instanceof Promise)return l.then(c=>{var u,f;if(!c){const m=Zs(t,r),p=(f=(u=m.fatal)!==null&&u!==void 0?u:a)!==null&&f!==void 0?f:!0;n.addIssue({code:"custom",...m,fatal:p})}});if(!l){const c=Zs(t,r),u=(i=(o=c.fatal)!==null&&o!==void 0?o:a)!==null&&i!==void 0?i:!0;n.addIssue({code:"custom",...c,fatal:u})}}):Ua.create()}ke.lazycreate;var ae;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(ae||(ae={}));const Uo=(e,t={message:`Input not instance of ${e.name}`})=>su(a=>a instanceof e,t),oe=bt.create;Kt.create;Cn.create;Yt.create;const tn=pr.create;pa.create;jn.create;gr.create;vr.create;Ua.create;da.create;Vt.create;Nn.create;wt.create;const at=ke.create;ke.strictCreate;yr.create;qn.create;xr.create;Dt.create;br.create;Sn.create;ga.create;Ia.create;_r.create;const ou=wr.create,Jn=qt.create;jr.create;La.create;Et.create;Mt.create;Jt.create;Et.createWithPreprocess;Ur.create;const Pe={string:e=>bt.create({...e,coerce:!0}),number:e=>Kt.create({...e,coerce:!0}),boolean:e=>pr.create({...e,coerce:!0}),bigint:e=>Yt.create({...e,coerce:!0}),date:e=>pa.create({...e,coerce:!0})},Oe=[];for(let e=0;e<256;++e)Oe.push((e+256).toString(16).slice(1));function iu(e,t=0){return(Oe[e[t+0]]+Oe[e[t+1]]+Oe[e[t+2]]+Oe[e[t+3]]+"-"+Oe[e[t+4]]+Oe[e[t+5]]+"-"+Oe[e[t+6]]+Oe[e[t+7]]+"-"+Oe[e[t+8]]+Oe[e[t+9]]+"-"+Oe[e[t+10]]+Oe[e[t+11]]+Oe[e[t+12]]+Oe[e[t+13]]+Oe[e[t+14]]+Oe[e[t+15]]).toLowerCase()}let an;const lu=new Uint8Array(16);function cu(){if(!an){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");an=crypto.getRandomValues.bind(crypto)}return an(lu)}const du=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Ks={randomUUID:du};function za(e,t,a){var n;if(Ks.randomUUID&&!e)return Ks.randomUUID();e=e||{};const r=e.random??((n=e.rng)==null?void 0:n.call(e))??cu();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,iu(r)}const uu=at({masjidName:oe().min(1,"Nama masjid tidak boleh kosong.").max(100,"Nama masjid terlalu panjang.").optional().nullable(),masjidLogoUrl:oe().nullable().optional(),masjidAddress:oe().min(1,"Alamat masjid tidak boleh kosong.").max(255,"Alamat terlalu panjang.").optional().nullable(),masjidNameColor:oe().regex(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,"Format warna heksadesimal tidak valid (contoh: #RRGGBB atau #RGB).").nullable().optional()}),fu=()=>{const{settings:e,isLoadingSettings:t,refetchSettings:a}=ya(),r=qe({resolver:Je(uu),defaultValues:{masjidName:"",masjidLogoUrl:"",masjidAddress:"",masjidNameColor:"#34D399"}}),{handleSubmit:n,register:o,setValue:i,formState:{isSubmitting:l,errors:c}}=r,[u,f]=d.useState(null);d.useEffect(()=>{!t&&e&&(i("masjidName",e.masjid_name||""),i("masjidLogoUrl",e.masjid_logo_url||""),f(e.masjid_logo_url),i("masjidAddress",e.masjid_address||""),i("masjidNameColor",e.masjid_name_color||"#34D399"))},[e,t,i]);const m=async v=>{var w;const b=(w=v.target.files)==null?void 0:w[0];if(!b)return;const h=b.name.split(".").pop(),k=`logos/${`${za()}.${h}`}`,x=A.loading("Mengunggah logo masjid: 0%"),M=u;try{const{data:j,error:D}=await O.storage.from("images").upload(k,b,{cacheControl:"3600",upsert:!1,onUploadProgress:S=>{const L=Math.round(S.loaded*100/S.total);console.log(`Upload progress for logo: ${L}%`),A.loading(`Mengunggah logo masjid: ${L}%`,{id:x})}});if(D)throw D;const{data:y}=O.storage.from("images").getPublicUrl(k);if(y!=null&&y.publicUrl){if(i("masjidLogoUrl",y.publicUrl),f(y.publicUrl),A.loading("Mengunggah logo masjid: 100%",{id:x}),A.success("Logo masjid berhasil diunggah!",{id:x}),A.info("Untuk performa terbaik di perangkat rendah, pastikan ukuran file gambar dioptimalkan (misal: format WebP, resolusi sesuai kebutuhan)."),M&&M!==y.publicUrl)try{const S=M.split("/"),L=S.indexOf("public"),q=S.slice(L+2).join("/"),{error:X}=await O.storage.from("images").remove([q]);X?(console.warn("Gagal menghapus logo masjid lama dari storage:",X),A.warning("Gagal menghapus logo masjid lama.")):console.log("Logo masjid lama berhasil dihapus.")}catch(S){console.warn("Error parsing old logo path for deletion:",S)}}else throw new Error("Gagal mendapatkan URL publik logo.")}catch(j){console.error("Error uploading logo:",j),A.error(`Gagal mengunggah logo: ${j.message}`,{id:x})}},p=async v=>{const{error:b}=await O.from("app_settings").upsert({id:1,masjid_name:v.masjidName||null,masjid_logo_url:v.masjidLogoUrl||null,masjid_address:v.masjidAddress||null,masjid_name_color:v.masjidNameColor||null},{onConflict:"id"});b?(console.error("Error saving masjid info settings:",b),A.error("Gagal menyimpan informasi masjid.")):(A.success("Informasi masjid berhasil disimpan!"),a())};return s.jsxs(Xe,{className:"bg-gray-800 text-white border-gray-700",children:[s.jsx(Qe,{children:s.jsx(et,{className:"text-2xl font-semibold text-blue-300",children:"Pengaturan Informasi Masjid"})}),s.jsxs(tt,{children:[s.jsx("p",{className:"text-gray-400 mb-4",children:"Atur nama, logo, dan alamat masjid yang akan ditampilkan di layar utama."}),s.jsxs("form",{onSubmit:n(p),className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Z,{htmlFor:"masjidName",className:"text-gray-300",children:"Nama Masjid"}),s.jsx(le,{id:"masjidName",...o("masjidName"),className:"bg-gray-700 border-gray-600 text-white mt-1",placeholder:"Contoh: Masjid Agung Al-Falah"}),c.masjidName&&s.jsx("p",{className:"text-red-400 text-sm mt-1",children:c.masjidName.message})]}),s.jsxs("div",{children:[s.jsx(Z,{htmlFor:"masjidLogoUpload",className:"text-gray-300",children:"Unggah Logo Masjid (Opsional)"}),s.jsx(le,{id:"masjidLogoUpload",type:"file",accept:"image/*",onChange:m,className:"bg-gray-700 border-gray-600 text-white mt-1 file:text-white file:bg-blue-600 file:hover:bg-blue-700 file:border-none file:rounded-md file:px-3 file:py-1"}),u&&s.jsxs("div",{className:"mt-2",children:[s.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"Logo saat ini:"}),s.jsx("img",{src:u,alt:"Current Masjid Logo",className:"max-w-full h-24 object-contain rounded-md border border-gray-600"})]}),c.masjidLogoUrl&&s.jsx("p",{className:"text-red-400 text-sm mt-1",children:c.masjidLogoUrl.message})]}),s.jsxs("div",{children:[s.jsx(Z,{htmlFor:"masjidAddress",className:"text-gray-300",children:"Alamat Masjid"}),s.jsx(Or,{id:"masjidAddress",...o("masjidAddress"),className:"bg-gray-700 border-gray-600 text-white mt-1 min-h-[80px]",placeholder:"Contoh: Jl. Raya No. 1, Kota Jakarta"}),c.masjidAddress&&s.jsx("p",{className:"text-red-400 text-sm mt-1",children:c.masjidAddress.message})]}),s.jsxs("div",{children:[s.jsx(Z,{htmlFor:"masjidNameColor",className:"text-gray-300",children:"Warna Font Nama Masjid (Hex)"}),s.jsx(le,{id:"masjidNameColor",type:"text",...o("masjidNameColor"),className:"bg-gray-700 border-gray-600 text-white mt-1",placeholder:"Contoh: #FFFFFF atau #34D399"}),c.masjidNameColor&&s.jsx("p",{className:"text-red-400 text-sm mt-1",children:c.masjidNameColor.message}),r.watch("masjidNameColor")&&s.jsxs("div",{className:"mt-2 flex items-center space-x-2",children:[s.jsx("div",{className:"w-8 h-8 rounded-full border border-gray-600",style:{backgroundColor:r.watch("masjidNameColor")||"#34D399"}}),s.jsx("span",{className:"text-gray-400 text-sm",children:"Pratinjau Warna"})]})]}),s.jsx(ee,{type:"submit",disabled:l,className:"w-full bg-blue-600 hover:bg-blue-700 text-white",children:l?"Menyimpan...":"Simpan Informasi Masjid"})]})]})]})};var rn=0;function Lr(){d.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??Ys()),document.body.insertAdjacentElement("beforeend",e[1]??Ys()),rn++,()=>{rn===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),rn--}},[])}function Ys(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var nn="focusScope.autoFocusOnMount",sn="focusScope.autoFocusOnUnmount",qs={bubbles:!1,cancelable:!0},mu="FocusScope",Ga=d.forwardRef((e,t)=>{const{loop:a=!1,trapped:r=!1,onMountAutoFocus:n,onUnmountAutoFocus:o,...i}=e,[l,c]=d.useState(null),u=ma(n),f=ma(o),m=d.useRef(null),p=Ne(t,h=>c(h)),v=d.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;d.useEffect(()=>{if(r){let h=function(M){if(v.paused||!l)return;const w=M.target;l.contains(w)?m.current=w:Ft(m.current,{select:!0})},_=function(M){if(v.paused||!l)return;const w=M.relatedTarget;w!==null&&(l.contains(w)||Ft(m.current,{select:!0}))},k=function(M){if(document.activeElement===document.body)for(const j of M)j.removedNodes.length>0&&Ft(l)};document.addEventListener("focusin",h),document.addEventListener("focusout",_);const x=new MutationObserver(k);return l&&x.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",h),document.removeEventListener("focusout",_),x.disconnect()}}},[r,l,v.paused]),d.useEffect(()=>{if(l){Xs.add(v);const h=document.activeElement;if(!l.contains(h)){const k=new CustomEvent(nn,qs);l.addEventListener(nn,u),l.dispatchEvent(k),k.defaultPrevented||(hu(xu(Lo(l)),{select:!0}),document.activeElement===h&&Ft(l))}return()=>{l.removeEventListener(nn,u),setTimeout(()=>{const k=new CustomEvent(sn,qs);l.addEventListener(sn,f),l.dispatchEvent(k),k.defaultPrevented||Ft(h??document.body,{select:!0}),l.removeEventListener(sn,f),Xs.remove(v)},0)}}},[l,u,f,v]);const b=d.useCallback(h=>{if(!a&&!r||v.paused)return;const _=h.key==="Tab"&&!h.altKey&&!h.ctrlKey&&!h.metaKey,k=document.activeElement;if(_&&k){const x=h.currentTarget,[M,w]=pu(x);M&&w?!h.shiftKey&&k===w?(h.preventDefault(),a&&Ft(M,{select:!0})):h.shiftKey&&k===M&&(h.preventDefault(),a&&Ft(w,{select:!0})):k===x&&h.preventDefault()}},[a,r,v.paused]);return s.jsx(xe.div,{tabIndex:-1,...i,ref:p,onKeyDown:b})});Ga.displayName=mu;function hu(e,{select:t=!1}={}){const a=document.activeElement;for(const r of e)if(Ft(r,{select:t}),document.activeElement!==a)return}function pu(e){const t=Lo(e),a=Js(t,e),r=Js(t.reverse(),e);return[a,r]}function Lo(e){const t=[],a=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const n=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||n?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;a.nextNode();)t.push(a.currentNode);return t}function Js(e,t){for(const a of e)if(!gu(a,{upTo:t}))return a}function gu(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function vu(e){return e instanceof HTMLInputElement&&"select"in e}function Ft(e,{select:t=!1}={}){if(e&&e.focus){const a=document.activeElement;e.focus({preventScroll:!0}),e!==a&&vu(e)&&t&&e.select()}}var Xs=yu();function yu(){let e=[];return{add(t){const a=e[0];t!==a&&(a==null||a.pause()),e=Qs(e,t),e.unshift(t)},remove(t){var a;e=Qs(e,t),(a=e[0])==null||a.resume()}}}function Qs(e,t){const a=[...e],r=a.indexOf(t);return r!==-1&&a.splice(r,1),a}function xu(e){return e.filter(t=>t.tagName!=="A")}function Vo(e){const t=d.useRef({value:e,previous:e});return d.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var bu=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},oa=new WeakMap,er=new WeakMap,tr={},on=0,Bo=function(e){return e&&(e.host||Bo(e.parentNode))},_u=function(e,t){return t.map(function(a){if(e.contains(a))return a;var r=Bo(a);return r&&e.contains(r)?r:(console.error("aria-hidden",a,"in not contained inside",e,". Doing nothing"),null)}).filter(function(a){return!!a})},wu=function(e,t,a,r){var n=_u(t,Array.isArray(e)?e:[e]);tr[a]||(tr[a]=new WeakMap);var o=tr[a],i=[],l=new Set,c=new Set(n),u=function(m){!m||l.has(m)||(l.add(m),u(m.parentNode))};n.forEach(u);var f=function(m){!m||c.has(m)||Array.prototype.forEach.call(m.children,function(p){if(l.has(p))f(p);else try{var v=p.getAttribute(r),b=v!==null&&v!=="false",h=(oa.get(p)||0)+1,_=(o.get(p)||0)+1;oa.set(p,h),o.set(p,_),i.push(p),h===1&&b&&er.set(p,!0),_===1&&p.setAttribute(a,"true"),b||p.setAttribute(r,"true")}catch(k){console.error("aria-hidden: cannot operate on ",p,k)}})};return f(t),l.clear(),on++,function(){i.forEach(function(m){var p=oa.get(m)-1,v=o.get(m)-1;oa.set(m,p),o.set(m,v),p||(er.has(m)||m.removeAttribute(r),er.delete(m)),v||m.removeAttribute(a)}),on--,on||(oa=new WeakMap,oa=new WeakMap,er=new WeakMap,tr={})}},Vr=function(e,t,a){a===void 0&&(a="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),n=bu(e);return n?(r.push.apply(r,Array.from(n.querySelectorAll("[aria-live]"))),wu(r,n,a,"aria-hidden")):function(){return null}},yt=function(){return yt=Object.assign||function(t){for(var a,r=1,n=arguments.length;r<n;r++){a=arguments[r];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])}return t},yt.apply(this,arguments)};function $o(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]]);return a}function ju(e,t,a){if(a||arguments.length===2)for(var r=0,n=t.length,o;r<n;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))}var sr="right-scroll-bar-position",or="width-before-scroll-bar",Nu="with-scroll-bars-hidden",ku="--removed-body-scroll-bar-size";function ln(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function Su(e,t){var a=d.useState(function(){return{value:e,callback:t,facade:{get current(){return a.value},set current(r){var n=a.value;n!==r&&(a.value=r,a.callback(r,n))}}}})[0];return a.callback=t,a.facade}var Cu=typeof window<"u"?d.useLayoutEffect:d.useEffect,eo=new WeakMap;function Mu(e,t){var a=Su(null,function(r){return e.forEach(function(n){return ln(n,r)})});return Cu(function(){var r=eo.get(a);if(r){var n=new Set(r),o=new Set(e),i=a.current;n.forEach(function(l){o.has(l)||ln(l,null)}),o.forEach(function(l){n.has(l)||ln(l,i)})}eo.set(a,e)},[e]),a}function Au(e){return e}function Du(e,t){t===void 0&&(t=Au);var a=[],r=!1,n={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return a.length?a[a.length-1]:e},useMedium:function(o){var i=t(o,r);return a.push(i),function(){a=a.filter(function(l){return l!==i})}},assignSyncMedium:function(o){for(r=!0;a.length;){var i=a;a=[],i.forEach(o)}a={push:function(l){return o(l)},filter:function(){return a}}},assignMedium:function(o){r=!0;var i=[];if(a.length){var l=a;a=[],l.forEach(o),i=a}var c=function(){var f=i;i=[],f.forEach(o)},u=function(){return Promise.resolve().then(c)};u(),a={push:function(f){i.push(f),u()},filter:function(f){return i=i.filter(f),a}}}};return n}function Eu(e){e===void 0&&(e={});var t=Du(null);return t.options=yt({async:!0,ssr:!1},e),t}var Wo=function(e){var t=e.sideCar,a=$o(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return d.createElement(r,yt({},a))};Wo.isSideCarExport=!0;function Tu(e,t){return e.useMedium(t),Wo}var zo=Eu(),cn=function(){},Br=d.forwardRef(function(e,t){var a=d.useRef(null),r=d.useState({onScrollCapture:cn,onWheelCapture:cn,onTouchMoveCapture:cn}),n=r[0],o=r[1],i=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,f=e.enabled,m=e.shards,p=e.sideCar,v=e.noIsolation,b=e.inert,h=e.allowPinchZoom,_=e.as,k=_===void 0?"div":_,x=e.gapMode,M=$o(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=p,j=Mu([a,t]),D=yt(yt({},M),n);return d.createElement(d.Fragment,null,f&&d.createElement(w,{sideCar:zo,removeScrollBar:u,shards:m,noIsolation:v,inert:b,setCallbacks:o,allowPinchZoom:!!h,lockRef:a,gapMode:x}),i?d.cloneElement(d.Children.only(l),yt(yt({},D),{ref:j})):d.createElement(k,yt({},D,{className:c,ref:j}),l))});Br.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Br.classNames={fullWidth:or,zeroRight:sr};var Iu=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Pu(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Iu();return t&&e.setAttribute("nonce",t),e}function Ru(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function Ou(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var Fu=function(){var e=0,t=null;return{add:function(a){e==0&&(t=Pu())&&(Ru(t,a),Ou(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Uu=function(){var e=Fu();return function(t,a){d.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&a])}},Go=function(){var e=Uu(),t=function(a){var r=a.styles,n=a.dynamic;return e(r,n),null};return t},Lu={left:0,top:0,right:0,gap:0},dn=function(e){return parseInt(e||"",10)||0},Vu=function(e){var t=window.getComputedStyle(document.body),a=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],n=t[e==="padding"?"paddingRight":"marginRight"];return[dn(a),dn(r),dn(n)]},Bu=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return Lu;var t=Vu(e),a=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-a+t[2]-t[0])}},$u=Go(),ua="data-scroll-locked",Wu=function(e,t,a,r){var n=e.left,o=e.top,i=e.right,l=e.gap;return a===void 0&&(a="margin"),`
  .`.concat(Nu,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(ua,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),a==="margin"&&`
    padding-left: `.concat(n,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(i,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),a==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(sr,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(or,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(sr," .").concat(sr,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(or," .").concat(or,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(ua,`] {
    `).concat(ku,": ").concat(l,`px;
  }
`)},to=function(){var e=parseInt(document.body.getAttribute(ua)||"0",10);return isFinite(e)?e:0},zu=function(){d.useEffect(function(){return document.body.setAttribute(ua,(to()+1).toString()),function(){var e=to()-1;e<=0?document.body.removeAttribute(ua):document.body.setAttribute(ua,e.toString())}},[])},Gu=function(e){var t=e.noRelative,a=e.noImportant,r=e.gapMode,n=r===void 0?"margin":r;zu();var o=d.useMemo(function(){return Bu(n)},[n]);return d.createElement($u,{styles:Wu(o,!t,n,a?"":"!important")})},Mn=!1;if(typeof window<"u")try{var ar=Object.defineProperty({},"passive",{get:function(){return Mn=!0,!0}});window.addEventListener("test",ar,ar),window.removeEventListener("test",ar,ar)}catch{Mn=!1}var ia=Mn?{passive:!1}:!1,Hu=function(e){return e.tagName==="TEXTAREA"},Ho=function(e,t){if(!(e instanceof Element))return!1;var a=window.getComputedStyle(e);return a[t]!=="hidden"&&!(a.overflowY===a.overflowX&&!Hu(e)&&a[t]==="visible")},Zu=function(e){return Ho(e,"overflowY")},Ku=function(e){return Ho(e,"overflowX")},ao=function(e,t){var a=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var n=Zo(e,r);if(n){var o=Ko(e,r),i=o[1],l=o[2];if(i>l)return!0}r=r.parentNode}while(r&&r!==a.body);return!1},Yu=function(e){var t=e.scrollTop,a=e.scrollHeight,r=e.clientHeight;return[t,a,r]},qu=function(e){var t=e.scrollLeft,a=e.scrollWidth,r=e.clientWidth;return[t,a,r]},Zo=function(e,t){return e==="v"?Zu(t):Ku(t)},Ko=function(e,t){return e==="v"?Yu(t):qu(t)},Ju=function(e,t){return e==="h"&&t==="rtl"?-1:1},Xu=function(e,t,a,r,n){var o=Ju(e,window.getComputedStyle(t).direction),i=o*r,l=a.target,c=t.contains(l),u=!1,f=i>0,m=0,p=0;do{var v=Ko(e,l),b=v[0],h=v[1],_=v[2],k=h-_-o*b;(b||k)&&Zo(e,l)&&(m+=k,p+=b),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(f&&Math.abs(m)<1||!f&&Math.abs(p)<1)&&(u=!0),u},rr=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},ro=function(e){return[e.deltaX,e.deltaY]},no=function(e){return e&&"current"in e?e.current:e},Qu=function(e,t){return e[0]===t[0]&&e[1]===t[1]},ef=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},tf=0,la=[];function af(e){var t=d.useRef([]),a=d.useRef([0,0]),r=d.useRef(),n=d.useState(tf++)[0],o=d.useState(Go)[0],i=d.useRef(e);d.useEffect(function(){i.current=e},[e]),d.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(n));var h=ju([e.lockRef.current],(e.shards||[]).map(no),!0).filter(Boolean);return h.forEach(function(_){return _.classList.add("allow-interactivity-".concat(n))}),function(){document.body.classList.remove("block-interactivity-".concat(n)),h.forEach(function(_){return _.classList.remove("allow-interactivity-".concat(n))})}}},[e.inert,e.lockRef.current,e.shards]);var l=d.useCallback(function(h,_){if("touches"in h&&h.touches.length===2||h.type==="wheel"&&h.ctrlKey)return!i.current.allowPinchZoom;var k=rr(h),x=a.current,M="deltaX"in h?h.deltaX:x[0]-k[0],w="deltaY"in h?h.deltaY:x[1]-k[1],j,D=h.target,y=Math.abs(M)>Math.abs(w)?"h":"v";if("touches"in h&&y==="h"&&D.type==="range")return!1;var S=ao(y,D);if(!S)return!0;if(S?j=y:(j=y==="v"?"h":"v",S=ao(y,D)),!S)return!1;if(!r.current&&"changedTouches"in h&&(M||w)&&(r.current=j),!j)return!0;var L=r.current||j;return Xu(L,_,h,L==="h"?M:w)},[]),c=d.useCallback(function(h){var _=h;if(!(!la.length||la[la.length-1]!==o)){var k="deltaY"in _?ro(_):rr(_),x=t.current.filter(function(j){return j.name===_.type&&(j.target===_.target||_.target===j.shadowParent)&&Qu(j.delta,k)})[0];if(x&&x.should){_.cancelable&&_.preventDefault();return}if(!x){var M=(i.current.shards||[]).map(no).filter(Boolean).filter(function(j){return j.contains(_.target)}),w=M.length>0?l(_,M[0]):!i.current.noIsolation;w&&_.cancelable&&_.preventDefault()}}},[]),u=d.useCallback(function(h,_,k,x){var M={name:h,delta:_,target:k,should:x,shadowParent:rf(k)};t.current.push(M),setTimeout(function(){t.current=t.current.filter(function(w){return w!==M})},1)},[]),f=d.useCallback(function(h){a.current=rr(h),r.current=void 0},[]),m=d.useCallback(function(h){u(h.type,ro(h),h.target,l(h,e.lockRef.current))},[]),p=d.useCallback(function(h){u(h.type,rr(h),h.target,l(h,e.lockRef.current))},[]);d.useEffect(function(){return la.push(o),e.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:p}),document.addEventListener("wheel",c,ia),document.addEventListener("touchmove",c,ia),document.addEventListener("touchstart",f,ia),function(){la=la.filter(function(h){return h!==o}),document.removeEventListener("wheel",c,ia),document.removeEventListener("touchmove",c,ia),document.removeEventListener("touchstart",f,ia)}},[]);var v=e.removeScrollBar,b=e.inert;return d.createElement(d.Fragment,null,b?d.createElement(o,{styles:ef(n)}):null,v?d.createElement(Gu,{gapMode:e.gapMode}):null)}function rf(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const nf=Tu(zo,af);var Ha=d.forwardRef(function(e,t){return d.createElement(Br,yt({},e,{ref:t,sideCar:nf}))});Ha.classNames=Br.classNames;var sf=[" ","Enter","ArrowUp","ArrowDown"],of=[" ","Enter"],Za="Select",[$r,Wr,lf]=Ln(Za),[wa,Qg]=ea(Za,[lf,xa]),zr=xa(),[cf,Wt]=wa(Za),[df,uf]=wa(Za),Yo=e=>{const{__scopeSelect:t,children:a,open:r,defaultOpen:n,onOpenChange:o,value:i,defaultValue:l,onValueChange:c,dir:u,name:f,autoComplete:m,disabled:p,required:v,form:b}=e,h=zr(t),[_,k]=d.useState(null),[x,M]=d.useState(null),[w,j]=d.useState(!1),D=Fn(u),[y=!1,S]=Zt({prop:r,defaultProp:n,onChange:o}),[L,q]=Zt({prop:i,defaultProp:l,onChange:c}),X=d.useRef(null),H=_?b||!!_.closest("form"):!0,[z,re]=d.useState(new Set),de=Array.from(z).map(J=>J.props.value).join(";");return s.jsx(Un,{...h,children:s.jsxs(cf,{required:v,scope:t,trigger:_,onTriggerChange:k,valueNode:x,onValueNodeChange:M,valueNodeHasChildren:w,onValueNodeHasChildrenChange:j,contentId:_t(),value:L,onValueChange:q,open:y,onOpenChange:S,dir:D,triggerPointerDownPosRef:X,disabled:p,children:[s.jsx($r.Provider,{scope:t,children:s.jsx(df,{scope:e.__scopeSelect,onNativeOptionAdd:d.useCallback(J=>{re(R=>new Set(R).add(J))},[]),onNativeOptionRemove:d.useCallback(J=>{re(R=>{const I=new Set(R);return I.delete(J),I})},[]),children:a})}),H?s.jsxs(bi,{"aria-hidden":!0,required:v,tabIndex:-1,name:f,autoComplete:m,value:L,onChange:J=>q(J.target.value),disabled:p,form:b,children:[L===void 0?s.jsx("option",{value:""}):null,Array.from(z)]},de):null]})})};Yo.displayName=Za;var qo="SelectTrigger",Jo=d.forwardRef((e,t)=>{const{__scopeSelect:a,disabled:r=!1,...n}=e,o=zr(a),i=Wt(qo,a),l=i.disabled||r,c=Ne(t,i.onTriggerChange),u=Wr(a),f=d.useRef("touch"),[m,p,v]=_i(h=>{const _=u().filter(M=>!M.disabled),k=_.find(M=>M.value===i.value),x=wi(_,h,k);x!==void 0&&i.onValueChange(x.value)}),b=h=>{l||(i.onOpenChange(!0),v()),h&&(i.triggerPointerDownPosRef.current={x:Math.round(h.pageX),y:Math.round(h.pageY)})};return s.jsx(Tr,{asChild:!0,...o,children:s.jsx(xe.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":xi(i.value)?"":void 0,...n,ref:c,onClick:Y(n.onClick,h=>{h.currentTarget.focus(),f.current!=="mouse"&&b(h)}),onPointerDown:Y(n.onPointerDown,h=>{f.current=h.pointerType;const _=h.target;_.hasPointerCapture(h.pointerId)&&_.releasePointerCapture(h.pointerId),h.button===0&&h.ctrlKey===!1&&h.pointerType==="mouse"&&(b(h),h.preventDefault())}),onKeyDown:Y(n.onKeyDown,h=>{const _=m.current!=="";!(h.ctrlKey||h.altKey||h.metaKey)&&h.key.length===1&&p(h.key),!(_&&h.key===" ")&&sf.includes(h.key)&&(b(),h.preventDefault())})})})});Jo.displayName=qo;var Xo="SelectValue",Qo=d.forwardRef((e,t)=>{const{__scopeSelect:a,className:r,style:n,children:o,placeholder:i="",...l}=e,c=Wt(Xo,a),{onValueNodeHasChildrenChange:u}=c,f=o!==void 0,m=Ne(t,c.onValueNodeChange);return At(()=>{u(f)},[u,f]),s.jsx(xe.span,{...l,ref:m,style:{pointerEvents:"none"},children:xi(c.value)?s.jsx(s.Fragment,{children:i}):o})});Qo.displayName=Xo;var ff="SelectIcon",ei=d.forwardRef((e,t)=>{const{__scopeSelect:a,children:r,...n}=e;return s.jsx(xe.span,{"aria-hidden":!0,...n,ref:t,children:r||""})});ei.displayName=ff;var mf="SelectPortal",ti=e=>s.jsx(Ir,{asChild:!0,...e});ti.displayName=mf;var Xt="SelectContent",ai=d.forwardRef((e,t)=>{const a=Wt(Xt,e.__scopeSelect),[r,n]=d.useState();if(At(()=>{n(new DocumentFragment)},[]),!a.open){const o=r;return o?uo.createPortal(s.jsx(ri,{scope:e.__scopeSelect,children:s.jsx($r.Slot,{scope:e.__scopeSelect,children:s.jsx("div",{children:e.children})})}),o):null}return s.jsx(ni,{...e,ref:t})});ai.displayName=Xt;var lt=10,[ri,zt]=wa(Xt),hf="SelectContentImpl",pf=Pr("SelectContent.RemoveScroll"),ni=d.forwardRef((e,t)=>{const{__scopeSelect:a,position:r="item-aligned",onCloseAutoFocus:n,onEscapeKeyDown:o,onPointerDownOutside:i,side:l,sideOffset:c,align:u,alignOffset:f,arrowPadding:m,collisionBoundary:p,collisionPadding:v,sticky:b,hideWhenDetached:h,avoidCollisions:_,...k}=e,x=Wt(Xt,a),[M,w]=d.useState(null),[j,D]=d.useState(null),y=Ne(t,Q=>w(Q)),[S,L]=d.useState(null),[q,X]=d.useState(null),H=Wr(a),[z,re]=d.useState(!1),de=d.useRef(!1);d.useEffect(()=>{if(M)return Vr(M)},[M]),Lr();const J=d.useCallback(Q=>{const[_e,...ye]=H().map(fe=>fe.ref.current),[pe]=ye.slice(-1),ge=document.activeElement;for(const fe of Q)if(fe===ge||(fe==null||fe.scrollIntoView({block:"nearest"}),fe===_e&&j&&(j.scrollTop=0),fe===pe&&j&&(j.scrollTop=j.scrollHeight),fe==null||fe.focus(),document.activeElement!==ge))return},[H,j]),R=d.useCallback(()=>J([S,M]),[J,S,M]);d.useEffect(()=>{z&&R()},[z,R]);const{onOpenChange:I,triggerPointerDownPosRef:$}=x;d.useEffect(()=>{if(M){let Q={x:0,y:0};const _e=pe=>{var ge,fe;Q={x:Math.abs(Math.round(pe.pageX)-(((ge=$.current)==null?void 0:ge.x)??0)),y:Math.abs(Math.round(pe.pageY)-(((fe=$.current)==null?void 0:fe.y)??0))}},ye=pe=>{Q.x<=10&&Q.y<=10?pe.preventDefault():M.contains(pe.target)||I(!1),document.removeEventListener("pointermove",_e),$.current=null};return $.current!==null&&(document.addEventListener("pointermove",_e),document.addEventListener("pointerup",ye,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",_e),document.removeEventListener("pointerup",ye,{capture:!0})}}},[M,I,$]),d.useEffect(()=>{const Q=()=>I(!1);return window.addEventListener("blur",Q),window.addEventListener("resize",Q),()=>{window.removeEventListener("blur",Q),window.removeEventListener("resize",Q)}},[I]);const[P,se]=_i(Q=>{const _e=H().filter(ge=>!ge.disabled),ye=_e.find(ge=>ge.ref.current===document.activeElement),pe=wi(_e,Q,ye);pe&&setTimeout(()=>pe.ref.current.focus())}),me=d.useCallback((Q,_e,ye)=>{const pe=!de.current&&!ye;(x.value!==void 0&&x.value===_e||pe)&&(L(Q),pe&&(de.current=!0))},[x.value]),Te=d.useCallback(()=>M==null?void 0:M.focus(),[M]),Ce=d.useCallback((Q,_e,ye)=>{const pe=!de.current&&!ye;(x.value!==void 0&&x.value===_e||pe)&&X(Q)},[x.value]),Ae=r==="popper"?An:si,be=Ae===An?{side:l,sideOffset:c,align:u,alignOffset:f,arrowPadding:m,collisionBoundary:p,collisionPadding:v,sticky:b,hideWhenDetached:h,avoidCollisions:_}:{};return s.jsx(ri,{scope:a,content:M,viewport:j,onViewportChange:D,itemRefCallback:me,selectedItem:S,onItemLeave:Te,itemTextRefCallback:Ce,focusSelectedItem:R,selectedItemText:q,position:r,isPositioned:z,searchRef:P,children:s.jsx(Ha,{as:pf,allowPinchZoom:!0,children:s.jsx(Ga,{asChild:!0,trapped:x.open,onMountAutoFocus:Q=>{Q.preventDefault()},onUnmountAutoFocus:Y(n,Q=>{var _e;(_e=x.trigger)==null||_e.focus({preventScroll:!0}),Q.preventDefault()}),children:s.jsx(Rr,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:i,onFocusOutside:Q=>Q.preventDefault(),onDismiss:()=>x.onOpenChange(!1),children:s.jsx(Ae,{role:"listbox",id:x.contentId,"data-state":x.open?"open":"closed",dir:x.dir,onContextMenu:Q=>Q.preventDefault(),...k,...be,onPlaced:()=>re(!0),ref:y,style:{display:"flex",flexDirection:"column",outline:"none",...k.style},onKeyDown:Y(k.onKeyDown,Q=>{const _e=Q.ctrlKey||Q.altKey||Q.metaKey;if(Q.key==="Tab"&&Q.preventDefault(),!_e&&Q.key.length===1&&se(Q.key),["ArrowUp","ArrowDown","Home","End"].includes(Q.key)){let pe=H().filter(ge=>!ge.disabled).map(ge=>ge.ref.current);if(["ArrowUp","End"].includes(Q.key)&&(pe=pe.slice().reverse()),["ArrowUp","ArrowDown"].includes(Q.key)){const ge=Q.target,fe=pe.indexOf(ge);pe=pe.slice(fe+1)}setTimeout(()=>J(pe)),Q.preventDefault()}})})})})})})});ni.displayName=hf;var gf="SelectItemAlignedPosition",si=d.forwardRef((e,t)=>{const{__scopeSelect:a,onPlaced:r,...n}=e,o=Wt(Xt,a),i=zt(Xt,a),[l,c]=d.useState(null),[u,f]=d.useState(null),m=Ne(t,y=>f(y)),p=Wr(a),v=d.useRef(!1),b=d.useRef(!0),{viewport:h,selectedItem:_,selectedItemText:k,focusSelectedItem:x}=i,M=d.useCallback(()=>{if(o.trigger&&o.valueNode&&l&&u&&h&&_&&k){const y=o.trigger.getBoundingClientRect(),S=u.getBoundingClientRect(),L=o.valueNode.getBoundingClientRect(),q=k.getBoundingClientRect();if(o.dir!=="rtl"){const ge=q.left-S.left,fe=L.left-ge,rt=y.left-fe,gt=y.width+rt,ja=Math.max(gt,S.width),ra=window.innerWidth-lt,na=Cs(fe,[lt,Math.max(lt,ra-ja)]);l.style.minWidth=gt+"px",l.style.left=na+"px"}else{const ge=S.right-q.right,fe=window.innerWidth-L.right-ge,rt=window.innerWidth-y.right-fe,gt=y.width+rt,ja=Math.max(gt,S.width),ra=window.innerWidth-lt,na=Cs(fe,[lt,Math.max(lt,ra-ja)]);l.style.minWidth=gt+"px",l.style.right=na+"px"}const X=p(),H=window.innerHeight-lt*2,z=h.scrollHeight,re=window.getComputedStyle(u),de=parseInt(re.borderTopWidth,10),J=parseInt(re.paddingTop,10),R=parseInt(re.borderBottomWidth,10),I=parseInt(re.paddingBottom,10),$=de+J+z+I+R,P=Math.min(_.offsetHeight*5,$),se=window.getComputedStyle(h),me=parseInt(se.paddingTop,10),Te=parseInt(se.paddingBottom,10),Ce=y.top+y.height/2-lt,Ae=H-Ce,be=_.offsetHeight/2,Q=_.offsetTop+be,_e=de+J+Q,ye=$-_e;if(_e<=Ce){const ge=X.length>0&&_===X[X.length-1].ref.current;l.style.bottom="0px";const fe=u.clientHeight-h.offsetTop-h.offsetHeight,rt=Math.max(Ae,be+(ge?Te:0)+fe+R),gt=_e+rt;l.style.height=gt+"px"}else{const ge=X.length>0&&_===X[0].ref.current;l.style.top="0px";const rt=Math.max(Ce,de+h.offsetTop+(ge?me:0)+be)+ye;l.style.height=rt+"px",h.scrollTop=_e-Ce+h.offsetTop}l.style.margin=`${lt}px 0`,l.style.minHeight=P+"px",l.style.maxHeight=H+"px",r==null||r(),requestAnimationFrame(()=>v.current=!0)}},[p,o.trigger,o.valueNode,l,u,h,_,k,o.dir,r]);At(()=>M(),[M]);const[w,j]=d.useState();At(()=>{u&&j(window.getComputedStyle(u).zIndex)},[u]);const D=d.useCallback(y=>{y&&b.current===!0&&(M(),x==null||x(),b.current=!1)},[M,x]);return s.jsx(yf,{scope:a,contentWrapper:l,shouldExpandOnScrollRef:v,onScrollButtonChange:D,children:s.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:w},children:s.jsx(xe.div,{...n,ref:m,style:{boxSizing:"border-box",maxHeight:"100%",...n.style}})})})});si.displayName=gf;var vf="SelectPopperPosition",An=d.forwardRef((e,t)=>{const{__scopeSelect:a,align:r="start",collisionPadding:n=lt,...o}=e,i=zr(a);return s.jsx(Vn,{...i,...o,ref:t,align:r,collisionPadding:n,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});An.displayName=vf;var[yf,Xn]=wa(Xt,{}),Dn="SelectViewport",oi=d.forwardRef((e,t)=>{const{__scopeSelect:a,nonce:r,...n}=e,o=zt(Dn,a),i=Xn(Dn,a),l=Ne(t,o.onViewportChange),c=d.useRef(0);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),s.jsx($r.Slot,{scope:a,children:s.jsx(xe.div,{"data-radix-select-viewport":"",role:"presentation",...n,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...n.style},onScroll:Y(n.onScroll,u=>{const f=u.currentTarget,{contentWrapper:m,shouldExpandOnScrollRef:p}=i;if(p!=null&&p.current&&m){const v=Math.abs(c.current-f.scrollTop);if(v>0){const b=window.innerHeight-lt*2,h=parseFloat(m.style.minHeight),_=parseFloat(m.style.height),k=Math.max(h,_);if(k<b){const x=k+v,M=Math.min(b,x),w=x-M;m.style.height=M+"px",m.style.bottom==="0px"&&(f.scrollTop=w>0?w:0,m.style.justifyContent="flex-end")}}}c.current=f.scrollTop})})})]})});oi.displayName=Dn;var ii="SelectGroup",[xf,bf]=wa(ii),_f=d.forwardRef((e,t)=>{const{__scopeSelect:a,...r}=e,n=_t();return s.jsx(xf,{scope:a,id:n,children:s.jsx(xe.div,{role:"group","aria-labelledby":n,...r,ref:t})})});_f.displayName=ii;var li="SelectLabel",ci=d.forwardRef((e,t)=>{const{__scopeSelect:a,...r}=e,n=bf(li,a);return s.jsx(xe.div,{id:n.id,...r,ref:t})});ci.displayName=li;var Cr="SelectItem",[wf,di]=wa(Cr),ui=d.forwardRef((e,t)=>{const{__scopeSelect:a,value:r,disabled:n=!1,textValue:o,...i}=e,l=Wt(Cr,a),c=zt(Cr,a),u=l.value===r,[f,m]=d.useState(o??""),[p,v]=d.useState(!1),b=Ne(t,x=>{var M;return(M=c.itemRefCallback)==null?void 0:M.call(c,x,r,n)}),h=_t(),_=d.useRef("touch"),k=()=>{n||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return s.jsx(wf,{scope:a,value:r,disabled:n,textId:h,isSelected:u,onItemTextChange:d.useCallback(x=>{m(M=>M||((x==null?void 0:x.textContent)??"").trim())},[]),children:s.jsx($r.ItemSlot,{scope:a,value:r,disabled:n,textValue:f,children:s.jsx(xe.div,{role:"option","aria-labelledby":h,"data-highlighted":p?"":void 0,"aria-selected":u&&p,"data-state":u?"checked":"unchecked","aria-disabled":n||void 0,"data-disabled":n?"":void 0,tabIndex:n?void 0:-1,...i,ref:b,onFocus:Y(i.onFocus,()=>v(!0)),onBlur:Y(i.onBlur,()=>v(!1)),onClick:Y(i.onClick,()=>{_.current!=="mouse"&&k()}),onPointerUp:Y(i.onPointerUp,()=>{_.current==="mouse"&&k()}),onPointerDown:Y(i.onPointerDown,x=>{_.current=x.pointerType}),onPointerMove:Y(i.onPointerMove,x=>{var M;_.current=x.pointerType,n?(M=c.onItemLeave)==null||M.call(c):_.current==="mouse"&&x.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Y(i.onPointerLeave,x=>{var M;x.currentTarget===document.activeElement&&((M=c.onItemLeave)==null||M.call(c))}),onKeyDown:Y(i.onKeyDown,x=>{var w;((w=c.searchRef)==null?void 0:w.current)!==""&&x.key===" "||(of.includes(x.key)&&k(),x.key===" "&&x.preventDefault())})})})})});ui.displayName=Cr;var Aa="SelectItemText",fi=d.forwardRef((e,t)=>{const{__scopeSelect:a,className:r,style:n,...o}=e,i=Wt(Aa,a),l=zt(Aa,a),c=di(Aa,a),u=uf(Aa,a),[f,m]=d.useState(null),p=Ne(t,k=>m(k),c.onItemTextChange,k=>{var x;return(x=l.itemTextRefCallback)==null?void 0:x.call(l,k,c.value,c.disabled)}),v=f==null?void 0:f.textContent,b=d.useMemo(()=>s.jsx("option",{value:c.value,disabled:c.disabled,children:v},c.value),[c.disabled,c.value,v]),{onNativeOptionAdd:h,onNativeOptionRemove:_}=u;return At(()=>(h(b),()=>_(b)),[h,_,b]),s.jsxs(s.Fragment,{children:[s.jsx(xe.span,{id:c.textId,...o,ref:p}),c.isSelected&&i.valueNode&&!i.valueNodeHasChildren?uo.createPortal(o.children,i.valueNode):null]})});fi.displayName=Aa;var mi="SelectItemIndicator",hi=d.forwardRef((e,t)=>{const{__scopeSelect:a,...r}=e;return di(mi,a).isSelected?s.jsx(xe.span,{"aria-hidden":!0,...r,ref:t}):null});hi.displayName=mi;var En="SelectScrollUpButton",pi=d.forwardRef((e,t)=>{const a=zt(En,e.__scopeSelect),r=Xn(En,e.__scopeSelect),[n,o]=d.useState(!1),i=Ne(t,r.onScrollButtonChange);return At(()=>{if(a.viewport&&a.isPositioned){let l=function(){const u=c.scrollTop>0;o(u)};const c=a.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[a.viewport,a.isPositioned]),n?s.jsx(vi,{...e,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=a;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});pi.displayName=En;var Tn="SelectScrollDownButton",gi=d.forwardRef((e,t)=>{const a=zt(Tn,e.__scopeSelect),r=Xn(Tn,e.__scopeSelect),[n,o]=d.useState(!1),i=Ne(t,r.onScrollButtonChange);return At(()=>{if(a.viewport&&a.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,f=Math.ceil(c.scrollTop)<u;o(f)};const c=a.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[a.viewport,a.isPositioned]),n?s.jsx(vi,{...e,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=a;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});gi.displayName=Tn;var vi=d.forwardRef((e,t)=>{const{__scopeSelect:a,onAutoScroll:r,...n}=e,o=zt("SelectScrollButton",a),i=d.useRef(null),l=Wr(a),c=d.useCallback(()=>{i.current!==null&&(window.clearInterval(i.current),i.current=null)},[]);return d.useEffect(()=>()=>c(),[c]),At(()=>{var f;const u=l().find(m=>m.ref.current===document.activeElement);(f=u==null?void 0:u.ref.current)==null||f.scrollIntoView({block:"nearest"})},[l]),s.jsx(xe.div,{"aria-hidden":!0,...n,ref:t,style:{flexShrink:0,...n.style},onPointerDown:Y(n.onPointerDown,()=>{i.current===null&&(i.current=window.setInterval(r,50))}),onPointerMove:Y(n.onPointerMove,()=>{var u;(u=o.onItemLeave)==null||u.call(o),i.current===null&&(i.current=window.setInterval(r,50))}),onPointerLeave:Y(n.onPointerLeave,()=>{c()})})}),jf="SelectSeparator",yi=d.forwardRef((e,t)=>{const{__scopeSelect:a,...r}=e;return s.jsx(xe.div,{"aria-hidden":!0,...r,ref:t})});yi.displayName=jf;var In="SelectArrow",Nf=d.forwardRef((e,t)=>{const{__scopeSelect:a,...r}=e,n=zr(a),o=Wt(In,a),i=zt(In,a);return o.open&&i.position==="popper"?s.jsx(Bn,{...n,...r,ref:t}):null});Nf.displayName=In;function xi(e){return e===""||e===void 0}var bi=d.forwardRef((e,t)=>{const{value:a,...r}=e,n=d.useRef(null),o=Ne(t,n),i=Vo(a);return d.useEffect(()=>{const l=n.current,c=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(c,"value").set;if(i!==a&&f){const m=new Event("change",{bubbles:!0});f.call(l,a),l.dispatchEvent(m)}},[i,a]),s.jsx(Rc,{asChild:!0,children:s.jsx("select",{...r,ref:o,defaultValue:a})})});bi.displayName="BubbleSelect";function _i(e){const t=ma(e),a=d.useRef(""),r=d.useRef(0),n=d.useCallback(i=>{const l=a.current+i;t(l),function c(u){a.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),o=d.useCallback(()=>{a.current="",window.clearTimeout(r.current)},[]);return d.useEffect(()=>()=>window.clearTimeout(r.current),[]),[a,n,o]}function wi(e,t,a){const n=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,o=a?e.indexOf(a):-1;let i=kf(e,Math.max(o,0));n.length===1&&(i=i.filter(u=>u!==a));const c=i.find(u=>u.textValue.toLowerCase().startsWith(n.toLowerCase()));return c!==a?c:void 0}function kf(e,t){return e.map((a,r)=>e[(t+r)%e.length])}var Sf=Yo,ji=Jo,Cf=Qo,Mf=ei,Af=ti,Ni=ai,Df=oi,ki=ci,Si=ui,Ef=fi,Tf=hi,Ci=pi,Mi=gi,Ai=yi;const ut=Sf,ft=Cf,nt=d.forwardRef(({className:e,children:t,...a},r)=>s.jsxs(ji,{ref:r,className:ce("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...a,children:[t,s.jsx(Mf,{asChild:!0,children:s.jsx(go,{className:"h-4 w-4 opacity-50"})})]}));nt.displayName=ji.displayName;const Di=d.forwardRef(({className:e,...t},a)=>s.jsx(Ci,{ref:a,className:ce("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(Zc,{className:"h-4 w-4"})}));Di.displayName=Ci.displayName;const Ei=d.forwardRef(({className:e,...t},a)=>s.jsx(Mi,{ref:a,className:ce("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(go,{className:"h-4 w-4"})}));Ei.displayName=Mi.displayName;const st=d.forwardRef(({className:e,children:t,position:a="popper",...r},n)=>s.jsx(Af,{children:s.jsxs(Ni,{ref:n,className:ce("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:a,...r,children:[s.jsx(Di,{}),s.jsx(Df,{className:ce("p-1",a==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),s.jsx(Ei,{})]})}));st.displayName=Ni.displayName;const If=d.forwardRef(({className:e,...t},a)=>s.jsx(ki,{ref:a,className:ce("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));If.displayName=ki.displayName;const Re=d.forwardRef(({className:e,children:t,...a},r)=>s.jsxs(Si,{ref:r,className:ce("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...a,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(Tf,{children:s.jsx(po,{className:"h-4 w-4"})})}),s.jsx(Ef,{children:t})]}));Re.displayName=Si.displayName;const Pf=d.forwardRef(({className:e,...t},a)=>s.jsx(Ai,{ref:a,className:ce("-mx-1 my-1 h-px bg-muted",e),...t}));Pf.displayName=Ai.displayName;const Rf=at({latitude:Pe.number().min(-90).max(90).default(-6.2088),longitude:Pe.number().min(-180).max(180).default(106.8456),calculationMethod:oe().default("MuslimWorldLeague"),fajrOffset:Pe.number().int().default(0),dhuhrOffset:Pe.number().int().default(0),asrOffset:Pe.number().int().default(0),maghribOffset:Pe.number().int().default(0),ishaOffset:Pe.number().int().default(0),imsakOffset:Pe.number().int().default(0)}),Of=[{value:"MuslimWorldLeague",label:"Muslim World League"},{value:"Egyptian",label:"Egyptian General Authority of Survey"},{value:"Karachi",label:"University of Islamic Sciences, Karachi"},{value:"UmmAlQura",label:"Umm Al-Qura University, Makkah"},{value:"Dubai",label:"Dubai"},{value:"MoonsightingCommittee",label:"Moonsighting Committee"},{value:"NorthAmerica",label:"Islamic Society of North America"},{value:"Kuwait",label:"Kuwait"},{value:"Qatar",label:"Qatar"},{value:"Singapore",label:"Singapore"},{value:"Tehran",label:"Institute of Geophysics, University of Tehran"},{value:"Turkey",label:"Diyanet leri Bakanl, Turkey"}],Ff=()=>{const{settings:e,isLoadingSettings:t,refetchSettings:a}=ya(),r=qe({resolver:Je(Rf),defaultValues:{latitude:-6.2088,longitude:106.8456,calculationMethod:"MuslimWorldLeague",fajrOffset:0,dhuhrOffset:0,asrOffset:0,maghribOffset:0,ishaOffset:0,imsakOffset:0}}),{handleSubmit:n,register:o,setValue:i,formState:{isSubmitting:l,errors:c}}=r;d.useEffect(()=>{!t&&e&&(i("latitude",e.latitude),i("longitude",e.longitude),i("calculationMethod",e.calculation_method),i("fajrOffset",e.fajr_offset??0),i("dhuhrOffset",e.dhuhr_offset??0),i("asrOffset",e.asr_offset??0),i("maghribOffset",e.maghrib_offset??0),i("ishaOffset",e.isha_offset??0),i("imsakOffset",e.imsak_offset??0))},[e,t,i]);const u=async f=>{const{data:m,error:p}=await O.from("app_settings").upsert({id:1,latitude:f.latitude,longitude:f.longitude,calculation_method:f.calculationMethod,fajr_offset:f.fajrOffset,dhuhr_offset:f.dhuhrOffset,asr_offset:f.asrOffset,maghrib_offset:f.maghribOffset,isha_offset:f.ishaOffset,imsak_offset:f.imsakOffset},{onConflict:"id"});p?(console.error("Error saving settings:",p),A.error("Gagal menyimpan pengaturan waktu sholat.")):(A.success("Pengaturan waktu sholat berhasil disimpan!"),console.log("Settings saved:",m),a())};return s.jsxs(Xe,{className:"bg-gray-800 text-white border-gray-700",children:[s.jsx(Qe,{children:s.jsx(et,{className:"text-2xl font-semibold text-blue-300",children:"Pengaturan Waktu Sholat"})}),s.jsxs(tt,{children:[s.jsx("p",{className:"text-gray-400 mb-4",children:"Atur lokasi masjid dan metode perhitungan waktu sholat."}),s.jsxs("form",{onSubmit:n(u),className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Z,{htmlFor:"latitude",className:"text-gray-300",children:"Lintang (Latitude)"}),s.jsx(le,{id:"latitude",type:"number",step:"any",...o("latitude"),className:"bg-gray-700 border-gray-600 text-white mt-1"}),c.latitude&&s.jsx("p",{className:"text-red-400 text-sm mt-1",children:c.latitude.message})]}),s.jsxs("div",{children:[s.jsx(Z,{htmlFor:"longitude",className:"text-gray-300",children:"Bujur (Longitude)"}),s.jsx(le,{id:"longitude",type:"number",step:"any",...o("longitude"),className:"bg-gray-700 border-gray-600 text-white mt-1"}),c.longitude&&s.jsx("p",{className:"text-red-400 text-sm mt-1",children:c.longitude.message})]}),s.jsxs("div",{children:[s.jsx(Z,{htmlFor:"calculationMethod",className:"text-gray-300",children:"Metode Perhitungan"}),s.jsxs(ut,{onValueChange:f=>i("calculationMethod",f),defaultValue:r.getValues("calculationMethod"),children:[s.jsx(nt,{className:"w-full bg-gray-700 border-gray-600 text-white mt-1",children:s.jsx(ft,{placeholder:"Pilih Metode"})}),s.jsx(st,{className:"bg-gray-700 text-white border-gray-600",children:Of.map(f=>s.jsx(Re,{value:f.value,children:f.label},f.value))})]}),c.calculationMethod&&s.jsx("p",{className:"text-red-400 text-sm mt-1",children:c.calculationMethod.message})]}),s.jsxs("div",{className:"border-t border-gray-700 pt-6 mt-6",children:[s.jsx("h3",{className:"text-xl font-semibold text-blue-300 mb-4",children:"Koreksi Waktu Sholat (Menit)"}),s.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"Masukkan nilai positif untuk mempercepat, negatif untuk memperlambat. Contoh: +1 atau -2."}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(Z,{htmlFor:"fajrOffset",className:"text-gray-300",children:"Subuh"}),s.jsx(le,{id:"fajrOffset",type:"number",...o("fajrOffset"),className:"bg-gray-700 border-gray-600 text-white mt-1"}),c.fajrOffset&&s.jsx("p",{className:"text-red-400 text-sm mt-1",children:c.fajrOffset.message})]}),s.jsxs("div",{children:[s.jsx(Z,{htmlFor:"imsakOffset",className:"text-gray-300",children:"Imsak"}),s.jsx(le,{id:"imsakOffset",type:"number",...o("imsakOffset"),className:"bg-gray-700 border-gray-600 text-white mt-1"}),c.imsakOffset&&s.jsx("p",{className:"text-red-400 text-sm mt-1",children:c.imsakOffset.message})]}),s.jsxs("div",{children:[s.jsx(Z,{htmlFor:"dhuhrOffset",className:"text-gray-300",children:"Dzuhur"}),s.jsx(le,{id:"dhuhrOffset",type:"number",...o("dhuhrOffset"),className:"bg-gray-700 border-gray-600 text-white mt-1"}),c.dhuhrOffset&&s.jsx("p",{className:"text-red-400 text-sm mt-1",children:c.dhuhrOffset.message})]}),s.jsxs("div",{children:[s.jsx(Z,{htmlFor:"asrOffset",className:"text-gray-300",children:"Ashar"}),s.jsx(le,{id:"asrOffset",type:"number",...o("asrOffset"),className:"bg-gray-700 border-gray-600 text-white mt-1"}),c.asrOffset&&s.jsx("p",{className:"text-red-400 text-sm mt-1",children:c.asrOffset.message})]}),s.jsxs("div",{children:[s.jsx(Z,{htmlFor:"maghribOffset",className:"text-gray-300",children:"Maghrib"}),s.jsx(le,{id:"maghribOffset",type:"number",...o("maghribOffset"),className:"bg-gray-700 border-gray-600 text-white mt-1"}),c.maghribOffset&&s.jsx("p",{className:"text-red-400 text-sm mt-1",children:c.maghribOffset.message})]}),s.jsxs("div",{children:[s.jsx(Z,{htmlFor:"ishaOffset",className:"text-gray-300",children:"Isya"}),s.jsx(le,{id:"ishaOffset",type:"number",...o("ishaOffset"),className:"bg-gray-700 border-gray-600 text-white mt-1"}),c.ishaOffset&&s.jsx("p",{className:"text-red-400 text-sm mt-1",children:c.ishaOffset.message})]})]})]}),s.jsx(ee,{type:"submit",disabled:l,className:"w-full bg-blue-600 hover:bg-blue-700 text-white",children:l?"Menyimpan...":"Simpan Pengaturan"})]})]})]})},Uf=at({runningText:oe().min(1,"Teks berjalan tidak boleh kosong.")}),Lf=()=>{const{settings:e,isLoadingSettings:t,refetchSettings:a}=ya(),r=qe({resolver:Je(Uf),defaultValues:{runningText:""}}),{handleSubmit:n,register:o,setValue:i,formState:{isSubmitting:l,errors:c}}=r;d.useEffect(()=>{!t&&e&&i("runningText",e.running_text||"")},[e,t,i]);const u=async f=>{const{data:m,error:p}=await O.from("app_settings").upsert({id:1,running_text:f.runningText},{onConflict:"id"});p?(console.error("Error saving running text:",p),A.error("Gagal menyimpan teks berjalan.")):(A.success("Teks berjalan berhasil disimpan!"),console.log("Running text saved:",m),a())};return s.jsxs(Xe,{className:"bg-gray-800 text-white border-gray-700",children:[s.jsx(Qe,{children:s.jsx(et,{className:"text-2xl font-semibold text-blue-300",children:"Pengaturan Teks Berjalan"})}),s.jsxs(tt,{children:[s.jsx("p",{className:"text-gray-400 mb-4",children:"Atur teks yang akan ditampilkan sebagai teks berjalan di bagian bawah layar utama."}),s.jsxs("form",{onSubmit:n(u),className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Z,{htmlFor:"runningText",className:"text-gray-300",children:"Teks Berjalan"}),s.jsx(Or,{id:"runningText",...o("runningText"),className:"bg-gray-700 border-gray-600 text-white mt-1 min-h-[100px]",placeholder:"Masukkan teks berjalan di sini..."}),c.runningText&&s.jsx("p",{className:"text-red-400 text-sm mt-1",children:c.runningText.message})]}),s.jsx(ee,{type:"submit",disabled:l,className:"w-full bg-blue-600 hover:bg-blue-700 text-white",children:l?"Menyimpan...":"Simpan Teks Berjalan"})]})]})]})};var Qn="Dialog",[Ti,ev]=ea(Qn),[Vf,pt]=Ti(Qn),Ii=e=>{const{__scopeDialog:t,children:a,open:r,defaultOpen:n,onOpenChange:o,modal:i=!0}=e,l=d.useRef(null),c=d.useRef(null),[u=!1,f]=Zt({prop:r,defaultProp:n,onChange:o});return s.jsx(Vf,{scope:t,triggerRef:l,contentRef:c,contentId:_t(),titleId:_t(),descriptionId:_t(),open:u,onOpenChange:f,onOpenToggle:d.useCallback(()=>f(m=>!m),[f]),modal:i,children:a})};Ii.displayName=Qn;var Pi="DialogTrigger",Bf=d.forwardRef((e,t)=>{const{__scopeDialog:a,...r}=e,n=pt(Pi,a),o=Ne(t,n.triggerRef);return s.jsx(xe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":n.open,"aria-controls":n.contentId,"data-state":as(n.open),...r,ref:o,onClick:Y(e.onClick,n.onOpenToggle)})});Bf.displayName=Pi;var es="DialogPortal",[$f,Ri]=Ti(es,{forceMount:void 0}),Oi=e=>{const{__scopeDialog:t,forceMount:a,children:r,container:n}=e,o=pt(es,t);return s.jsx($f,{scope:t,forceMount:a,children:d.Children.map(r,i=>s.jsx(Ot,{present:a||o.open,children:s.jsx(Ir,{asChild:!0,container:n,children:i})}))})};Oi.displayName=es;var Mr="DialogOverlay",Fi=d.forwardRef((e,t)=>{const a=Ri(Mr,e.__scopeDialog),{forceMount:r=a.forceMount,...n}=e,o=pt(Mr,e.__scopeDialog);return o.modal?s.jsx(Ot,{present:r||o.open,children:s.jsx(zf,{...n,ref:t})}):null});Fi.displayName=Mr;var Wf=Pr("DialogOverlay.RemoveScroll"),zf=d.forwardRef((e,t)=>{const{__scopeDialog:a,...r}=e,n=pt(Mr,a);return s.jsx(Ha,{as:Wf,allowPinchZoom:!0,shards:[n.contentRef],children:s.jsx(xe.div,{"data-state":as(n.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),Qt="DialogContent",Ui=d.forwardRef((e,t)=>{const a=Ri(Qt,e.__scopeDialog),{forceMount:r=a.forceMount,...n}=e,o=pt(Qt,e.__scopeDialog);return s.jsx(Ot,{present:r||o.open,children:o.modal?s.jsx(Gf,{...n,ref:t}):s.jsx(Hf,{...n,ref:t})})});Ui.displayName=Qt;var Gf=d.forwardRef((e,t)=>{const a=pt(Qt,e.__scopeDialog),r=d.useRef(null),n=Ne(t,a.contentRef,r);return d.useEffect(()=>{const o=r.current;if(o)return Vr(o)},[]),s.jsx(Li,{...e,ref:n,trapFocus:a.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Y(e.onCloseAutoFocus,o=>{var i;o.preventDefault(),(i=a.triggerRef.current)==null||i.focus()}),onPointerDownOutside:Y(e.onPointerDownOutside,o=>{const i=o.detail.originalEvent,l=i.button===0&&i.ctrlKey===!0;(i.button===2||l)&&o.preventDefault()}),onFocusOutside:Y(e.onFocusOutside,o=>o.preventDefault())})}),Hf=d.forwardRef((e,t)=>{const a=pt(Qt,e.__scopeDialog),r=d.useRef(!1),n=d.useRef(!1);return s.jsx(Li,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var i,l;(i=e.onCloseAutoFocus)==null||i.call(e,o),o.defaultPrevented||(r.current||(l=a.triggerRef.current)==null||l.focus(),o.preventDefault()),r.current=!1,n.current=!1},onInteractOutside:o=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,o),o.defaultPrevented||(r.current=!0,o.detail.originalEvent.type==="pointerdown"&&(n.current=!0));const i=o.target;((u=a.triggerRef.current)==null?void 0:u.contains(i))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&n.current&&o.preventDefault()}})}),Li=d.forwardRef((e,t)=>{const{__scopeDialog:a,trapFocus:r,onOpenAutoFocus:n,onCloseAutoFocus:o,...i}=e,l=pt(Qt,a),c=d.useRef(null),u=Ne(t,c);return Lr(),s.jsxs(s.Fragment,{children:[s.jsx(Ga,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:n,onUnmountAutoFocus:o,children:s.jsx(Rr,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":as(l.open),...i,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),s.jsxs(s.Fragment,{children:[s.jsx(Zf,{titleId:l.titleId}),s.jsx(Yf,{contentRef:c,descriptionId:l.descriptionId})]})]})}),ts="DialogTitle",Vi=d.forwardRef((e,t)=>{const{__scopeDialog:a,...r}=e,n=pt(ts,a);return s.jsx(xe.h2,{id:n.titleId,...r,ref:t})});Vi.displayName=ts;var Bi="DialogDescription",$i=d.forwardRef((e,t)=>{const{__scopeDialog:a,...r}=e,n=pt(Bi,a);return s.jsx(xe.p,{id:n.descriptionId,...r,ref:t})});$i.displayName=Bi;var Wi="DialogClose",zi=d.forwardRef((e,t)=>{const{__scopeDialog:a,...r}=e,n=pt(Wi,a);return s.jsx(xe.button,{type:"button",...r,ref:t,onClick:Y(e.onClick,()=>n.onOpenChange(!1))})});zi.displayName=Wi;function as(e){return e?"open":"closed"}var Gi="DialogTitleWarning",[tv,Hi]=Oc(Gi,{contentName:Qt,titleName:ts,docsSlug:"dialog"}),Zf=({titleId:e})=>{const t=Hi(Gi),a=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return d.useEffect(()=>{e&&(document.getElementById(e)||console.error(a))},[a,e]),null},Kf="DialogDescriptionWarning",Yf=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Hi(Kf).contentName}}.`;return d.useEffect(()=>{var o;const n=(o=e.current)==null?void 0:o.getAttribute("aria-describedby");t&&n&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},qf=Ii,Jf=Oi,Zi=Fi,Ki=Ui,Yi=Vi,qi=$i,Xf=zi;const Bt=qf,Qf=Jf,Ji=d.forwardRef(({className:e,...t},a)=>s.jsx(Zi,{ref:a,className:ce("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));Ji.displayName=Zi.displayName;const Tt=d.forwardRef(({className:e,children:t,...a},r)=>s.jsxs(Qf,{children:[s.jsx(Ji,{}),s.jsxs(Ki,{ref:r,className:ce("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...a,children:[t,s.jsxs(Xf,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[s.jsx(Fc,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Tt.displayName=Ki.displayName;const It=({className:e,...t})=>s.jsx("div",{className:ce("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});It.displayName="DialogHeader";const Pt=({className:e,...t})=>s.jsx("div",{className:ce("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Pt.displayName="DialogFooter";const Rt=d.forwardRef(({className:e,...t},a)=>s.jsx(Yi,{ref:a,className:ce("text-lg font-semibold leading-none tracking-tight",e),...t}));Rt.displayName=Yi.displayName;const $t=d.forwardRef(({className:e,...t},a)=>s.jsx(qi,{ref:a,className:ce("text-sm text-muted-foreground",e),...t}));$t.displayName=qi.displayName;const em=at({id:oe().optional(),type:ou("image"),title:oe().max(100,"Judul terlalu panjang.").nullable().optional(),content:oe().min(1,"URL gambar tidak boleh kosong."),display_order:Pe.number().int().min(0,"Urutan tampilan harus non-negatif.").default(0)}),tm=()=>{const[e,t]=d.useState([]),[a,r]=d.useState(!1),[n,o]=d.useState(null),[i,l]=d.useState(null),c=d.useRef(null),u=qe({resolver:Je(em),defaultValues:{type:"image",title:"",content:"",display_order:0}}),{handleSubmit:f,register:m,setValue:p,reset:v,formState:{isSubmitting:b,errors:h}}=u,_=d.useCallback(async()=>{const{data:D,error:y}=await O.from("info_slides").select("*").order("display_order",{ascending:!0});y?(console.error("Error fetching info slides:",y),A.error("Gagal memuat slide informasi.")):t(D||[])},[]);d.useEffect(()=>(_(),c.current||(c.current=O.channel("info_slides_changes").on("postgres_changes",{event:"*",schema:"public",table:"info_slides"},D=>{console.log("Info slides change received!",D),_()}).subscribe(),console.log("InfoSlideSettings: Subscribed to channel 'info_slides_changes'.")),()=>{c.current&&(O.removeChannel(c.current),console.log("InfoSlideSettings: Unsubscribed from channel 'info_slides_changes'."),c.current=null)}),[_]);const k=()=>{o(null),v({type:"image",title:"",content:"",display_order:0}),l(null),r(!0)},x=D=>{o(D),v({id:D.id,type:"image",title:D.title||"",content:D.content,display_order:D.display_order}),l(D.content),r(!0)},M=async D=>{if(!window.confirm("Apakah Anda yakin ingin menghapus slide ini?"))return;const{data:y,error:S}=await O.from("info_slides").select("content").eq("id",D).single();if(S){console.error("Error fetching slide content for deletion:",S),A.error("Gagal menghapus slide.");return}const{error:L}=await O.from("info_slides").delete().eq("id",D);if(L)console.error("Error deleting slide:",L),A.error("Gagal menghapus slide.");else if(A.success("Slide berhasil dihapus!"),_(),y!=null&&y.content)try{const q=y.content.split("/"),X=q.indexOf("public"),H=q.slice(X+2).join("/"),{error:z}=await O.storage.from("images").remove([H]);z&&console.warn("Failed to delete file from storage:",z)}catch(q){console.warn("Error parsing file path for deletion:",q)}},w=async D=>{var z;const y=(z=D.target.files)==null?void 0:z[0];if(!y)return;const S=y.name.split(".").pop(),q=`slides/${`${za()}.${S}`}`,X=A.loading("Mengunggah gambar slide: 0%"),H=(n==null?void 0:n.content)||null;try{const{data:re,error:de}=await O.storage.from("images").upload(q,y,{cacheControl:"3600",upsert:!1,onUploadProgress:R=>{const I=Math.round(R.loaded*100/R.total);console.log(`Upload progress for info slide: ${I}%`),A.loading(`Mengunggah gambar slide: ${I}%`,{id:X})}});if(de)throw de;const{data:J}=O.storage.from("images").getPublicUrl(q);if(J!=null&&J.publicUrl){if(p("content",J.publicUrl),l(J.publicUrl),A.loading("Mengunggah gambar slide: 100%",{id:X}),A.success("Gambar slide berhasil diunggah!",{id:X}),A.info("Untuk performa terbaik di perangkat rendah, pastikan ukuran file gambar dioptimalkan (misal: format WebP, resolusi sesuai kebutuhan)."),H&&H!==J.publicUrl)try{const R=H.split("/"),I=R.indexOf("public"),$=R.slice(I+2).join("/"),{error:P}=await O.storage.from("images").remove([$]);P?(console.warn("Gagal menghapus gambar slide lama dari storage:",P),A.warning("Gagal menghapus gambar slide lama.")):console.log("Gambar slide lama berhasil dihapus.")}catch(R){console.warn("Error parsing old image path for deletion:",R)}}else throw new Error("Gagal mendapatkan URL publik gambar.")}catch(re){console.error("Error uploading image:",re),A.error(`Gagal mengunggah gambar: ${re.message}`,{id:X})}},j=async D=>{const y={type:"image",title:D.title||null,content:D.content,display_order:D.display_order};if(n){const{error:S}=await O.from("info_slides").update(y).eq("id",n.id);S?(console.error("Error updating slide:",S),A.error("Gagal memperbarui slide.")):(A.success("Slide berhasil diperbarui!"),r(!1),_())}else{const{error:S}=await O.from("info_slides").insert(y);S?(console.error("Error adding slide:",S),A.error("Gagal menambahkan slide.")):(A.success("Slide berhasil ditambahkan!"),r(!1),_())}};return s.jsxs(Xe,{className:"bg-gray-800 text-white border-gray-700 col-span-full lg:col-span-2",children:[s.jsx(Qe,{children:s.jsx(et,{className:"text-2xl font-semibold text-blue-300",children:"Pengaturan Slide Informasi (Gambar)"})}),s.jsxs(tt,{children:[s.jsx("p",{className:"text-gray-400 mb-4",children:"Kelola slide gambar yang akan ditampilkan di layar utama."}),s.jsx(ee,{onClick:k,className:"w-full bg-green-600 hover:bg-green-700 text-white mb-4",children:"Tambah Slide Gambar Baru"}),s.jsx("div",{className:"space-y-3",children:e.length===0?s.jsx("p",{className:"text-gray-400 text-center",children:"Belum ada slide gambar. Tambahkan yang pertama!"}):e.map(D=>s.jsxs("div",{className:"flex items-center justify-between bg-gray-700 p-3 rounded-md shadow-sm",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-lg text-blue-200",children:D.title||"(Tanpa Judul)"}),s.jsx("p",{className:"text-sm text-gray-300 truncate max-w-xs",children:D.content}),s.jsxs("p",{className:"text-xs text-gray-400",children:["Tipe: ",D.type," | Urutan: ",D.display_order]})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx(ee,{variant:"outline",size:"icon",onClick:()=>x(D),className:"text-blue-400 border-blue-400 hover:bg-blue-400 hover:text-white",children:s.jsx(ba,{className:"h-4 w-4"})}),s.jsx(ee,{variant:"outline",size:"icon",onClick:()=>M(D.id),className:"text-red-400 border-red-400 hover:bg-red-400 hover:text-white",children:s.jsx(_a,{className:"h-4 w-4"})})]})]},D.id))}),s.jsx(Bt,{open:a,onOpenChange:r,children:s.jsxs(Tt,{className:"bg-gray-800 text-white border-gray-700",children:[s.jsxs(It,{children:[s.jsx(Rt,{className:"text-blue-300",children:n?"Edit Slide Gambar":"Tambah Slide Gambar Baru"}),s.jsx($t,{children:n?"Perbarui detail slide gambar ini.":"Isi detail untuk slide gambar baru."})]}),s.jsxs("form",{onSubmit:f(j),className:"space-y-4",children:[s.jsx("input",{type:"hidden",...m("type"),value:"image"}),s.jsxs("div",{children:[s.jsx(Z,{htmlFor:"title",className:"text-gray-300",children:"Judul (Opsional)"}),s.jsx(le,{id:"title",...m("title"),className:"bg-gray-700 border-gray-600 text-white mt-1",placeholder:"Judul slide (mis: Nama Acara)"}),h.title&&s.jsx("p",{className:"text-red-400 text-sm mt-1",children:h.title.message})]}),s.jsxs("div",{children:[s.jsx(Z,{htmlFor:"imageUpload",className:"text-gray-300",children:"Unggah Gambar"}),s.jsx(le,{id:"imageUpload",type:"file",accept:"image/*",onChange:w,className:"bg-gray-700 border-gray-600 text-white mt-1 file:text-white file:bg-blue-600 file:hover:bg-blue-700 file:border-none file:rounded-md file:px-3 file:py-1"}),i&&s.jsxs("div",{className:"mt-2",children:[s.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"Pratinjau Gambar:"}),s.jsx("img",{src:i,alt:"Image Preview",className:"max-w-full h-32 object-contain rounded-md border border-gray-600"})]}),h.content&&s.jsx("p",{className:"text-red-400 text-sm mt-1",children:h.content.message})]}),s.jsxs("div",{children:[s.jsx(Z,{htmlFor:"display_order",className:"text-gray-300",children:"Urutan Tampilan"}),s.jsx(le,{id:"display_order",type:"number",...m("display_order"),className:"bg-gray-700 border-gray-600 text-white mt-1"}),h.display_order&&s.jsx("p",{className:"text-red-400 text-sm mt-1",children:h.display_order.message})]}),s.jsxs(Pt,{children:[s.jsx(ee,{type:"button",variant:"outline",onClick:()=>r(!1),className:"text-gray-300 border-gray-600 hover:bg-gray-700",children:"Batal"}),s.jsx(ee,{type:"submit",disabled:b,className:"bg-blue-600 hover:bg-blue-700 text-white",children:b?"Menyimpan...":n?"Simpan Perubahan":"Tambah Slide"})]})]})]})})]})]})},am=at({id:oe().optional(),day_of_week:oe().min(1,"Hari tidak boleh kosong."),prayer_name:oe().min(1,"Nama sholat tidak boleh kosong."),imam_name:oe().min(1,"Nama imam tidak boleh kosong."),muezzin_name:oe().nullable().optional(),khatib_name:oe().nullable().optional(),bilal_name:oe().nullable().optional(),display_order:Pe.number().int().min(0,"Urutan tampilan harus non-negatif.").default(0)}),rm=[{value:"Ahad",label:"Ahad"},{value:"Senin",label:"Senin"},{value:"Selasa",label:"Selasa"},{value:"Rabu",label:"Rabu"},{value:"Kamis",label:"Kamis"},{value:"Jumat",label:"Jumat"},{value:"Sabtu",label:"Sabtu"}],nm=[{value:"Subuh",label:"Subuh"},{value:"Dzuhur",label:"Dzuhur"},{value:"Ashar",label:"Ashar"},{value:"Maghrib",label:"Maghrib"},{value:"Isya",label:"Isya"},{value:"Jumat",label:"Jumat"},{value:"Tarawih",label:"Tarawih"},{value:"Idul Fitri",label:"Idul Fitri"},{value:"Idul Adha",label:"Idul Adha"}],sm=()=>{const[e,t]=d.useState([]),[a,r]=d.useState(!1),[n,o]=d.useState(null),i=qe({resolver:Je(am),defaultValues:{day_of_week:"",prayer_name:"",imam_name:"",muezzin_name:"",khatib_name:"",bilal_name:"",display_order:0}}),{handleSubmit:l,register:c,setValue:u,watch:f,reset:m,formState:{isSubmitting:p,errors:v}}=i,b=f("prayer_name"),h=d.useCallback(async()=>{const{data:w,error:j}=await O.from("imam_muezzin_schedules").select("*").order("display_order",{ascending:!0}).order("day_of_week",{ascending:!0}).order("prayer_name",{ascending:!0});j?(console.error("Error fetching schedules:",j),A.error("Gagal memuat jadwal imam & muadzin.")):t(w||[])},[]);d.useEffect(()=>{h();const w=O.channel("imam_muezzin_schedules_changes").on("postgres_changes",{event:"*",schema:"public",table:"imam_muezzin_schedules"},j=>{console.log("Schedule change received!",j),h()}).subscribe();return console.log("ImamMuezzinScheduleSettings: Subscribed to channel 'imam_muezzin_schedules_changes'."),()=>{O.removeChannel(w),console.log("ImamMuezzinScheduleSettings: Unsubscribed from channel 'imam_muezzin_schedules_changes'.")}},[h]);const _=()=>{o(null),m({day_of_week:"",prayer_name:"",imam_name:"",muezzin_name:"",khatib_name:"",bilal_name:"",display_order:0}),r(!0)},k=w=>{o(w),m({id:w.id,day_of_week:w.day_of_week,prayer_name:w.prayer_name,imam_name:w.imam_name,muezzin_name:w.muezzin_name||"",khatib_name:w.khatib_name||"",bilal_name:w.bilal_name||"",display_order:w.display_order}),r(!0)},x=async w=>{if(!window.confirm("Apakah Anda yakin ingin menghapus jadwal ini?"))return;const{error:j}=await O.from("imam_muezzin_schedules").delete().eq("id",w);j?(console.error("Error deleting schedule:",j),A.error("Gagal menghapus jadwal.")):(A.success("Jadwal berhasil dihapus!"),h())},M=async w=>{const j={day_of_week:w.day_of_week,prayer_name:w.prayer_name,imam_name:w.imam_name,muezzin_name:w.muezzin_name||null,khatib_name:w.prayer_name==="Jumat"&&w.khatib_name||null,bilal_name:w.prayer_name==="Jumat"&&w.bilal_name||null,display_order:w.display_order};if(n){const{error:D}=await O.from("imam_muezzin_schedules").update(j).eq("id",n.id);D?(console.error("Error updating schedule:",D),A.error("Gagal memperbarui jadwal.")):(A.success("Jadwal berhasil diperbarui!"),r(!1),h())}else{const{error:D}=await O.from("imam_muezzin_schedules").insert(j);D?(console.error("Error adding schedule:",D),A.error("Gagal menambahkan jadwal.")):(A.success("Jadwal berhasil ditambahkan!"),r(!1),h())}};return s.jsxs(Xe,{className:"bg-gray-800 text-white border-gray-700 col-span-full lg:col-span-2",children:[s.jsx(Qe,{children:s.jsx(et,{className:"text-2xl font-semibold text-blue-300",children:"Pengaturan Jadwal Imam & Muadzin"})}),s.jsxs(tt,{children:[s.jsx("p",{className:"text-gray-400 mb-4",children:"Kelola jadwal imam dan muadzin untuk sholat fardhu, Jumat, dan Tarawih."}),s.jsxs(ee,{onClick:_,className:"w-full bg-green-600 hover:bg-green-700 text-white mb-4",children:[s.jsx($a,{className:"mr-2 h-4 w-4"})," Tambah Jadwal Baru"]}),s.jsx("div",{className:"space-y-3",children:e.length===0?s.jsx("p",{className:"text-gray-400 text-center",children:"Belum ada jadwal. Tambahkan yang pertama!"}):e.map(w=>s.jsxs("div",{className:"flex items-center justify-between bg-gray-700 p-3 rounded-md shadow-sm",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"font-medium text-lg text-blue-200",children:[w.day_of_week," - ",w.prayer_name]}),s.jsxs("p",{className:"text-sm text-gray-300",children:["Imam: ",w.imam_name]}),w.muezzin_name&&s.jsxs("p",{className:"text-xs text-gray-400",children:["Muadzin: ",w.muezzin_name]}),w.khatib_name&&s.jsxs("p",{className:"text-xs text-gray-400",children:["Khatib: ",w.khatib_name]}),w.bilal_name&&s.jsxs("p",{className:"text-xs text-gray-400",children:["Bilal: ",w.bilal_name]}),s.jsxs("p",{className:"text-xs text-gray-400",children:["Urutan: ",w.display_order]})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx(ee,{variant:"outline",size:"icon",onClick:()=>k(w),className:"text-blue-400 border-blue-400 hover:bg-blue-400 hover:text-white",children:s.jsx(ba,{className:"h-4 w-4"})}),s.jsx(ee,{variant:"outline",size:"icon",onClick:()=>x(w.id),className:"text-red-400 border-red-400 hover:bg-red-400 hover:text-white",children:s.jsx(_a,{className:"h-4 w-4"})})]})]},w.id))}),s.jsx(Bt,{open:a,onOpenChange:r,children:s.jsxs(Tt,{className:"bg-gray-800 text-white border-gray-700",children:[s.jsxs(It,{children:[s.jsx(Rt,{className:"text-blue-300",children:n?"Edit Jadwal":"Tambah Jadwal Baru"}),s.jsx($t,{children:n?"Perbarui detail jadwal imam dan muadzin.":"Isi detail untuk jadwal imam dan muadzin baru."})]}),s.jsxs("form",{onSubmit:l(M),className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Z,{htmlFor:"day_of_week",className:"text-gray-300",children:"Hari"}),s.jsxs(ut,{onValueChange:w=>u("day_of_week",w),defaultValue:i.getValues("day_of_week"),children:[s.jsx(nt,{className:"w-full bg-gray-700 border-gray-600 text-white mt-1",children:s.jsx(ft,{placeholder:"Pilih Hari"})}),s.jsx(st,{className:"bg-gray-700 text-white border-gray-600",children:rm.map(w=>s.jsx(Re,{value:w.value,children:w.label},w.value))})]}),v.day_of_week&&s.jsx("p",{className:"text-red-400 text-sm mt-1",children:v.day_of_week.message})]}),s.jsxs("div",{children:[s.jsx(Z,{htmlFor:"prayer_name",className:"text-gray-300",children:"Nama Sholat"}),s.jsxs(ut,{onValueChange:w=>u("prayer_name",w),defaultValue:i.getValues("prayer_name"),children:[s.jsx(nt,{className:"w-full bg-gray-700 border-gray-600 text-white mt-1",children:s.jsx(ft,{placeholder:"Pilih Nama Sholat"})}),s.jsx(st,{className:"bg-gray-700 text-white border-gray-600",children:nm.map(w=>s.jsx(Re,{value:w.value,children:w.label},w.value))})]}),v.prayer_name&&s.jsx("p",{className:"text-red-400 text-sm mt-1",children:v.prayer_name.message})]}),s.jsxs("div",{children:[s.jsx(Z,{htmlFor:"imam_name",className:"text-gray-300",children:"Nama Imam"}),s.jsx(le,{id:"imam_name",...c("imam_name"),className:"bg-gray-700 border-gray-600 text-white mt-1",placeholder:"Nama Imam"}),v.imam_name&&s.jsx("p",{className:"text-red-400 text-sm mt-1",children:v.imam_name.message})]}),s.jsxs("div",{children:[s.jsx(Z,{htmlFor:"muezzin_name",className:"text-gray-300",children:"Nama Muadzin (Opsional)"}),s.jsx(le,{id:"muezzin_name",...c("muezzin_name"),className:"bg-gray-700 border-gray-600 text-white mt-1",placeholder:"Nama Muadzin"}),v.muezzin_name&&s.jsx("p",{className:"text-red-400 text-sm mt-1",children:v.muezzin_name.message})]}),b==="Jumat"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx(Z,{htmlFor:"khatib_name",className:"text-gray-300",children:"Nama Khatib (Opsional)"}),s.jsx(le,{id:"khatib_name",...c("khatib_name"),className:"bg-gray-700 border-gray-600 text-white mt-1",placeholder:"Nama Khatib"}),v.khatib_name&&s.jsx("p",{className:"text-red-400 text-sm mt-1",children:v.khatib_name.message})]}),s.jsxs("div",{children:[s.jsx(Z,{htmlFor:"bilal_name",className:"text-gray-300",children:"Nama Bilal (Opsional)"}),s.jsx(le,{id:"bilal_name",...c("bilal_name"),className:"bg-gray-700 border-gray-600 text-white mt-1",placeholder:"Nama Bilal"}),v.bilal_name&&s.jsx("p",{className:"text-red-400 text-sm mt-1",children:v.bilal_name.message})]})]}),b==="Tarawih"&&s.jsx(s.Fragment,{}),s.jsxs("div",{children:[s.jsx(Z,{htmlFor:"display_order",className:"text-gray-300",children:"Urutan Tampilan"}),s.jsx(le,{id:"display_order",type:"number",...c("display_order"),className:"bg-gray-700 border-gray-600 text-white mt-1"}),v.display_order&&s.jsx("p",{className:"text-red-400 text-sm mt-1",children:v.display_order.message})]}),s.jsxs(Pt,{children:[s.jsx(ee,{type:"button",variant:"outline",onClick:()=>r(!1),className:"text-gray-300 border-gray-600 hover:bg-gray-700",children:"Batal"}),s.jsx(ee,{type:"submit",disabled:p,className:"bg-blue-600 hover:bg-blue-700 text-white",children:p?"Menyimpan...":n?"Simpan Perubahan":"Tambah Jadwal"})]})]})]})})]})]})};var rs="Popover",[Xi,av]=ea(rs,[xa]),Ka=xa(),[om,Gt]=Xi(rs),Qi=e=>{const{__scopePopover:t,children:a,open:r,defaultOpen:n,onOpenChange:o,modal:i=!1}=e,l=Ka(t),c=d.useRef(null),[u,f]=d.useState(!1),[m=!1,p]=Zt({prop:r,defaultProp:n,onChange:o});return s.jsx(Un,{...l,children:s.jsx(om,{scope:t,contentId:_t(),triggerRef:c,open:m,onOpenChange:p,onOpenToggle:d.useCallback(()=>p(v=>!v),[p]),hasCustomAnchor:u,onCustomAnchorAdd:d.useCallback(()=>f(!0),[]),onCustomAnchorRemove:d.useCallback(()=>f(!1),[]),modal:i,children:a})})};Qi.displayName=rs;var el="PopoverAnchor",im=d.forwardRef((e,t)=>{const{__scopePopover:a,...r}=e,n=Gt(el,a),o=Ka(a),{onCustomAnchorAdd:i,onCustomAnchorRemove:l}=n;return d.useEffect(()=>(i(),()=>l()),[i,l]),s.jsx(Tr,{...o,...r,ref:t})});im.displayName=el;var tl="PopoverTrigger",al=d.forwardRef((e,t)=>{const{__scopePopover:a,...r}=e,n=Gt(tl,a),o=Ka(a),i=Ne(t,n.triggerRef),l=s.jsx(xe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":n.open,"aria-controls":n.contentId,"data-state":il(n.open),...r,ref:i,onClick:Y(e.onClick,n.onOpenToggle)});return n.hasCustomAnchor?l:s.jsx(Tr,{asChild:!0,...o,children:l})});al.displayName=tl;var ns="PopoverPortal",[lm,cm]=Xi(ns,{forceMount:void 0}),rl=e=>{const{__scopePopover:t,forceMount:a,children:r,container:n}=e,o=Gt(ns,t);return s.jsx(lm,{scope:t,forceMount:a,children:s.jsx(Ot,{present:a||o.open,children:s.jsx(Ir,{asChild:!0,container:n,children:r})})})};rl.displayName=ns;var va="PopoverContent",nl=d.forwardRef((e,t)=>{const a=cm(va,e.__scopePopover),{forceMount:r=a.forceMount,...n}=e,o=Gt(va,e.__scopePopover);return s.jsx(Ot,{present:r||o.open,children:o.modal?s.jsx(um,{...n,ref:t}):s.jsx(fm,{...n,ref:t})})});nl.displayName=va;var dm=Pr("PopoverContent.RemoveScroll"),um=d.forwardRef((e,t)=>{const a=Gt(va,e.__scopePopover),r=d.useRef(null),n=Ne(t,r),o=d.useRef(!1);return d.useEffect(()=>{const i=r.current;if(i)return Vr(i)},[]),s.jsx(Ha,{as:dm,allowPinchZoom:!0,children:s.jsx(sl,{...e,ref:n,trapFocus:a.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Y(e.onCloseAutoFocus,i=>{var l;i.preventDefault(),o.current||(l=a.triggerRef.current)==null||l.focus()}),onPointerDownOutside:Y(e.onPointerDownOutside,i=>{const l=i.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;o.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:Y(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1})})})}),fm=d.forwardRef((e,t)=>{const a=Gt(va,e.__scopePopover),r=d.useRef(!1),n=d.useRef(!1);return s.jsx(sl,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var i,l;(i=e.onCloseAutoFocus)==null||i.call(e,o),o.defaultPrevented||(r.current||(l=a.triggerRef.current)==null||l.focus(),o.preventDefault()),r.current=!1,n.current=!1},onInteractOutside:o=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,o),o.defaultPrevented||(r.current=!0,o.detail.originalEvent.type==="pointerdown"&&(n.current=!0));const i=o.target;((u=a.triggerRef.current)==null?void 0:u.contains(i))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&n.current&&o.preventDefault()}})}),sl=d.forwardRef((e,t)=>{const{__scopePopover:a,trapFocus:r,onOpenAutoFocus:n,onCloseAutoFocus:o,disableOutsidePointerEvents:i,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onInteractOutside:f,...m}=e,p=Gt(va,a),v=Ka(a);return Lr(),s.jsx(Ga,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:n,onUnmountAutoFocus:o,children:s.jsx(Rr,{asChild:!0,disableOutsidePointerEvents:i,onInteractOutside:f,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onDismiss:()=>p.onOpenChange(!1),children:s.jsx(Vn,{"data-state":il(p.open),role:"dialog",id:p.contentId,...v,...m,ref:t,style:{...m.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),ol="PopoverClose",mm=d.forwardRef((e,t)=>{const{__scopePopover:a,...r}=e,n=Gt(ol,a);return s.jsx(xe.button,{type:"button",...r,ref:t,onClick:Y(e.onClick,()=>n.onOpenChange(!1))})});mm.displayName=ol;var hm="PopoverArrow",pm=d.forwardRef((e,t)=>{const{__scopePopover:a,...r}=e,n=Ka(a);return s.jsx(Bn,{...n,...r,ref:t})});pm.displayName=hm;function il(e){return e?"open":"closed"}var gm=Qi,vm=al,ym=rl,ll=nl;const cl=gm,dl=vm,ss=d.forwardRef(({className:e,align:t="center",sideOffset:a=4,...r},n)=>s.jsx(ym,{children:s.jsx(ll,{ref:n,align:t,sideOffset:a,className:ce("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));ss.displayName=ll.displayName;var te=function(){return te=Object.assign||function(t){for(var a,r=1,n=arguments.length;r<n;r++){a=arguments[r];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])}return t},te.apply(this,arguments)};function xm(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(a[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(a[r[n]]=e[r[n]]);return a}function ul(e,t,a){for(var r=0,n=t.length,o;r<n;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))}function Ya(e){return e.mode==="multiple"}function qa(e){return e.mode==="range"}function Gr(e){return e.mode==="single"}var bm={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function _m(e,t){return Ge(e,"LLLL y",t)}function wm(e,t){return Ge(e,"d",t)}function jm(e,t){return Ge(e,"LLLL",t)}function Nm(e){return"".concat(e)}function km(e,t){return Ge(e,"cccccc",t)}function Sm(e,t){return Ge(e,"yyyy",t)}var Cm=Object.freeze({__proto__:null,formatCaption:_m,formatDay:wm,formatMonthCaption:jm,formatWeekNumber:Nm,formatWeekdayName:km,formatYearCaption:Sm}),Mm=function(e,t,a){return Ge(e,"do MMMM (EEEE)",a)},Am=function(){return"Month: "},Dm=function(){return"Go to next month"},Em=function(){return"Go to previous month"},Tm=function(e,t){return Ge(e,"cccc",t)},Im=function(e){return"Week n. ".concat(e)},Pm=function(){return"Year: "},Rm=Object.freeze({__proto__:null,labelDay:Mm,labelMonthDropdown:Am,labelNext:Dm,labelPrevious:Em,labelWeekNumber:Im,labelWeekday:Tm,labelYearDropdown:Pm});function Om(){var e="buttons",t=bm,a=Uc,r={},n={},o=1,i={},l=new Date;return{captionLayout:e,classNames:t,formatters:Cm,labels:Rm,locale:a,modifiersClassNames:r,modifiers:n,numberOfMonths:o,styles:i,today:l,mode:"default"}}function Fm(e){var t=e.fromYear,a=e.toYear,r=e.fromMonth,n=e.toMonth,o=e.fromDate,i=e.toDate;return r?o=He(r):t&&(o=new Date(t,0,1)),n?i=Wn(n):a&&(i=new Date(a,11,31)),{fromDate:o?cr(o):void 0,toDate:i?cr(i):void 0}}var fl=d.createContext(void 0);function Um(e){var t,a=e.initialProps,r=Om(),n=Fm(a),o=n.fromDate,i=n.toDate,l=(t=a.captionLayout)!==null&&t!==void 0?t:r.captionLayout;l!=="buttons"&&(!o||!i)&&(l="buttons");var c;(Gr(a)||Ya(a)||qa(a))&&(c=a.onSelect);var u=te(te(te({},r),a),{captionLayout:l,classNames:te(te({},r.classNames),a.classNames),components:te({},a.components),formatters:te(te({},r.formatters),a.formatters),fromDate:o,labels:te(te({},r.labels),a.labels),mode:a.mode||r.mode,modifiers:te(te({},r.modifiers),a.modifiers),modifiersClassNames:te(te({},r.modifiersClassNames),a.modifiersClassNames),onSelect:c,styles:te(te({},r.styles),a.styles),toDate:i});return s.jsx(fl.Provider,{value:u,children:e.children})}function je(){var e=d.useContext(fl);if(!e)throw new Error("useDayPicker must be used within a DayPickerProvider.");return e}function ml(e){var t=je(),a=t.locale,r=t.classNames,n=t.styles,o=t.formatters.formatCaption;return s.jsx("div",{className:r.caption_label,style:n.caption_label,"aria-live":"polite",role:"presentation",id:e.id,children:o(e.displayMonth,{locale:a})})}function Lm(e){return s.jsx("svg",te({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},e,{children:s.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function hl(e){var t,a,r=e.onChange,n=e.value,o=e.children,i=e.caption,l=e.className,c=e.style,u=je(),f=(a=(t=u.components)===null||t===void 0?void 0:t.IconDropdown)!==null&&a!==void 0?a:Lm;return s.jsxs("div",{className:l,style:c,children:[s.jsx("span",{className:u.classNames.vhidden,children:e["aria-label"]}),s.jsx("select",{name:e.name,"aria-label":e["aria-label"],className:u.classNames.dropdown,style:u.styles.dropdown,value:n,onChange:r,children:o}),s.jsxs("div",{className:u.classNames.caption_label,style:u.styles.caption_label,"aria-hidden":"true",children:[i,s.jsx(f,{className:u.classNames.dropdown_icon,style:u.styles.dropdown_icon})]})]})}function Vm(e){var t,a=je(),r=a.fromDate,n=a.toDate,o=a.styles,i=a.locale,l=a.formatters.formatMonthCaption,c=a.classNames,u=a.components,f=a.labels.labelMonthDropdown;if(!r)return s.jsx(s.Fragment,{});if(!n)return s.jsx(s.Fragment,{});var m=[];if(ld(r,n))for(var p=He(r),v=r.getMonth();v<=n.getMonth();v++)m.push(Xr(p,v));else for(var p=He(new Date),v=0;v<=11;v++)m.push(Xr(p,v));var b=function(_){var k=Number(_.target.value),x=Xr(He(e.displayMonth),k);e.onChange(x)},h=(t=u==null?void 0:u.Dropdown)!==null&&t!==void 0?t:hl;return s.jsx(h,{name:"months","aria-label":f(),className:c.dropdown_month,style:o.dropdown_month,onChange:b,value:e.displayMonth.getMonth(),caption:l(e.displayMonth,{locale:i}),children:m.map(function(_){return s.jsx("option",{value:_.getMonth(),children:l(_,{locale:i})},_.getMonth())})})}function Bm(e){var t,a=e.displayMonth,r=je(),n=r.fromDate,o=r.toDate,i=r.locale,l=r.styles,c=r.classNames,u=r.components,f=r.formatters.formatYearCaption,m=r.labels.labelYearDropdown,p=[];if(!n)return s.jsx(s.Fragment,{});if(!o)return s.jsx(s.Fragment,{});for(var v=n.getFullYear(),b=o.getFullYear(),h=v;h<=b;h++)p.push(As(Lc(new Date),h));var _=function(x){var M=As(He(a),Number(x.target.value));e.onChange(M)},k=(t=u==null?void 0:u.Dropdown)!==null&&t!==void 0?t:hl;return s.jsx(k,{name:"years","aria-label":m(),className:c.dropdown_year,style:l.dropdown_year,onChange:_,value:a.getFullYear(),caption:f(a,{locale:i}),children:p.map(function(x){return s.jsx("option",{value:x.getFullYear(),children:f(x,{locale:i})},x.getFullYear())})})}function $m(e,t){var a=d.useState(e),r=a[0],n=a[1],o=t===void 0?r:t;return[o,n]}function Wm(e){var t=e.month,a=e.defaultMonth,r=e.today,n=t||a||r||new Date,o=e.toDate,i=e.fromDate,l=e.numberOfMonths,c=l===void 0?1:l;if(o&&Oa(o,n)<0){var u=-1*(c-1);n=mt(o,u)}return i&&Oa(n,i)<0&&(n=i),He(n)}function zm(){var e=je(),t=Wm(e),a=$m(t,e.month),r=a[0],n=a[1],o=function(i){var l;if(!e.disableNavigation){var c=He(i);n(c),(l=e.onMonthChange)===null||l===void 0||l.call(e,c)}};return[r,o]}function Gm(e,t){for(var a=t.reverseMonths,r=t.numberOfMonths,n=He(e),o=He(mt(n,r)),i=Oa(o,n),l=[],c=0;c<i;c++){var u=mt(n,c);l.push(u)}return a&&(l=l.reverse()),l}function Hm(e,t){if(!t.disableNavigation){var a=t.toDate,r=t.pagedNavigation,n=t.numberOfMonths,o=n===void 0?1:n,i=r?o:1,l=He(e);if(!a)return mt(l,i);var c=Oa(a,e);if(!(c<o))return mt(l,i)}}function Zm(e,t){if(!t.disableNavigation){var a=t.fromDate,r=t.pagedNavigation,n=t.numberOfMonths,o=n===void 0?1:n,i=r?o:1,l=He(e);if(!a)return mt(l,-i);var c=Oa(l,a);if(!(c<=0))return mt(l,-i)}}var pl=d.createContext(void 0);function Km(e){var t=je(),a=zm(),r=a[0],n=a[1],o=Gm(r,t),i=Hm(r,t),l=Zm(r,t),c=function(m){return o.some(function(p){return Gn(m,p)})},u=function(m,p){c(m)||(p&&bo(m,p)?n(mt(m,1+t.numberOfMonths*-1)):n(m))},f={currentMonth:r,displayMonths:o,goToMonth:n,goToDate:u,previousMonth:l,nextMonth:i,isDateDisplayed:c};return s.jsx(pl.Provider,{value:f,children:e.children})}function Ja(){var e=d.useContext(pl);if(!e)throw new Error("useNavigation must be used within a NavigationProvider");return e}function so(e){var t,a=je(),r=a.classNames,n=a.styles,o=a.components,i=Ja().goToMonth,l=function(f){i(mt(f,e.displayIndex?-e.displayIndex:0))},c=(t=o==null?void 0:o.CaptionLabel)!==null&&t!==void 0?t:ml,u=s.jsx(c,{id:e.id,displayMonth:e.displayMonth});return s.jsxs("div",{className:r.caption_dropdowns,style:n.caption_dropdowns,children:[s.jsx("div",{className:r.vhidden,children:u}),s.jsx(Vm,{onChange:l,displayMonth:e.displayMonth}),s.jsx(Bm,{onChange:l,displayMonth:e.displayMonth})]})}function Ym(e){return s.jsx("svg",te({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:s.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function qm(e){return s.jsx("svg",te({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:s.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var Ar=d.forwardRef(function(e,t){var a=je(),r=a.classNames,n=a.styles,o=[r.button_reset,r.button];e.className&&o.push(e.className);var i=o.join(" "),l=te(te({},n.button_reset),n.button);return e.style&&Object.assign(l,e.style),s.jsx("button",te({},e,{ref:t,type:"button",className:i,style:l}))});function Jm(e){var t,a,r=je(),n=r.dir,o=r.locale,i=r.classNames,l=r.styles,c=r.labels,u=c.labelPrevious,f=c.labelNext,m=r.components;if(!e.nextMonth&&!e.previousMonth)return s.jsx(s.Fragment,{});var p=u(e.previousMonth,{locale:o}),v=[i.nav_button,i.nav_button_previous].join(" "),b=f(e.nextMonth,{locale:o}),h=[i.nav_button,i.nav_button_next].join(" "),_=(t=m==null?void 0:m.IconRight)!==null&&t!==void 0?t:qm,k=(a=m==null?void 0:m.IconLeft)!==null&&a!==void 0?a:Ym;return s.jsxs("div",{className:i.nav,style:l.nav,children:[!e.hidePrevious&&s.jsx(Ar,{name:"previous-month","aria-label":p,className:v,style:l.nav_button_previous,disabled:!e.previousMonth,onClick:e.onPreviousClick,children:n==="rtl"?s.jsx(_,{className:i.nav_icon,style:l.nav_icon}):s.jsx(k,{className:i.nav_icon,style:l.nav_icon})}),!e.hideNext&&s.jsx(Ar,{name:"next-month","aria-label":b,className:h,style:l.nav_button_next,disabled:!e.nextMonth,onClick:e.onNextClick,children:n==="rtl"?s.jsx(k,{className:i.nav_icon,style:l.nav_icon}):s.jsx(_,{className:i.nav_icon,style:l.nav_icon})})]})}function oo(e){var t=je().numberOfMonths,a=Ja(),r=a.previousMonth,n=a.nextMonth,o=a.goToMonth,i=a.displayMonths,l=i.findIndex(function(b){return Gn(e.displayMonth,b)}),c=l===0,u=l===i.length-1,f=t>1&&(c||!u),m=t>1&&(u||!c),p=function(){r&&o(r)},v=function(){n&&o(n)};return s.jsx(Jm,{displayMonth:e.displayMonth,hideNext:f,hidePrevious:m,nextMonth:n,previousMonth:r,onPreviousClick:p,onNextClick:v})}function Xm(e){var t,a=je(),r=a.classNames,n=a.disableNavigation,o=a.styles,i=a.captionLayout,l=a.components,c=(t=l==null?void 0:l.CaptionLabel)!==null&&t!==void 0?t:ml,u;return n?u=s.jsx(c,{id:e.id,displayMonth:e.displayMonth}):i==="dropdown"?u=s.jsx(so,{displayMonth:e.displayMonth,id:e.id}):i==="dropdown-buttons"?u=s.jsxs(s.Fragment,{children:[s.jsx(so,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id}),s.jsx(oo,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id})]}):u=s.jsxs(s.Fragment,{children:[s.jsx(c,{id:e.id,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),s.jsx(oo,{displayMonth:e.displayMonth,id:e.id})]}),s.jsx("div",{className:r.caption,style:o.caption,children:u})}function Qm(e){var t=je(),a=t.footer,r=t.styles,n=t.classNames.tfoot;return a?s.jsx("tfoot",{className:n,style:r.tfoot,children:s.jsx("tr",{children:s.jsx("td",{colSpan:8,children:a})})}):s.jsx(s.Fragment,{})}function eh(e,t,a){for(var r=a?$n(new Date):Ra(new Date,{locale:e,weekStartsOn:t}),n=[],o=0;o<7;o++){var i=Ve(r,o);n.push(i)}return n}function th(){var e=je(),t=e.classNames,a=e.styles,r=e.showWeekNumber,n=e.locale,o=e.weekStartsOn,i=e.ISOWeek,l=e.formatters.formatWeekdayName,c=e.labels.labelWeekday,u=eh(n,o,i);return s.jsxs("tr",{style:a.head_row,className:t.head_row,children:[r&&s.jsx("td",{style:a.head_cell,className:t.head_cell}),u.map(function(f,m){return s.jsx("th",{scope:"col",className:t.head_cell,style:a.head_cell,"aria-label":c(f,{locale:n}),children:l(f,{locale:n})},m)})]})}function ah(){var e,t=je(),a=t.classNames,r=t.styles,n=t.components,o=(e=n==null?void 0:n.HeadRow)!==null&&e!==void 0?e:th;return s.jsx("thead",{style:r.head,className:a.head,children:s.jsx(o,{})})}function rh(e){var t=je(),a=t.locale,r=t.formatters.formatDay;return s.jsx(s.Fragment,{children:r(e.date,{locale:a})})}var os=d.createContext(void 0);function nh(e){if(!Ya(e.initialProps)){var t={selected:void 0,modifiers:{disabled:[]}};return s.jsx(os.Provider,{value:t,children:e.children})}return s.jsx(sh,{initialProps:e.initialProps,children:e.children})}function sh(e){var t=e.initialProps,a=e.children,r=t.selected,n=t.min,o=t.max,i=function(u,f,m){var p,v;(p=t.onDayClick)===null||p===void 0||p.call(t,u,f,m);var b=!!(f.selected&&n&&(r==null?void 0:r.length)===n);if(!b){var h=!!(!f.selected&&o&&(r==null?void 0:r.length)===o);if(!h){var _=r?ul([],r):[];if(f.selected){var k=_.findIndex(function(x){return ze(u,x)});_.splice(k,1)}else _.push(u);(v=t.onSelect)===null||v===void 0||v.call(t,_,u,f,m)}}},l={disabled:[]};r&&l.disabled.push(function(u){var f=o&&r.length>o-1,m=r.some(function(p){return ze(p,u)});return!!(f&&!m)});var c={selected:r,onDayClick:i,modifiers:l};return s.jsx(os.Provider,{value:c,children:a})}function is(){var e=d.useContext(os);if(!e)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return e}function oh(e,t){var a=t||{},r=a.from,n=a.to;return r&&n?ze(n,e)&&ze(r,e)?void 0:ze(n,e)?{from:n,to:void 0}:ze(r,e)?void 0:xn(r,e)?{from:e,to:n}:{from:r,to:e}:n?xn(e,n)?{from:n,to:e}:{from:e,to:n}:r?bo(e,r)?{from:e,to:r}:{from:r,to:e}:{from:e,to:void 0}}var ls=d.createContext(void 0);function ih(e){if(!qa(e.initialProps)){var t={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return s.jsx(ls.Provider,{value:t,children:e.children})}return s.jsx(lh,{initialProps:e.initialProps,children:e.children})}function lh(e){var t=e.initialProps,a=e.children,r=t.selected,n=r||{},o=n.from,i=n.to,l=t.min,c=t.max,u=function(v,b,h){var _,k;(_=t.onDayClick)===null||_===void 0||_.call(t,v,b,h);var x=oh(v,r);(k=t.onSelect)===null||k===void 0||k.call(t,x,v,b,h)},f={range_start:[],range_end:[],range_middle:[],disabled:[]};if(o?(f.range_start=[o],i?(f.range_end=[i],ze(o,i)||(f.range_middle=[{after:o,before:i}])):f.range_end=[o]):i&&(f.range_start=[i],f.range_end=[i]),l&&(o&&!i&&f.disabled.push({after:Jr(o,l-1),before:Ve(o,l-1)}),o&&i&&f.disabled.push({after:o,before:Ve(o,l-1)}),!o&&i&&f.disabled.push({after:Jr(i,l-1),before:Ve(i,l-1)})),c){if(o&&!i&&(f.disabled.push({before:Ve(o,-c+1)}),f.disabled.push({after:Ve(o,c-1)})),o&&i){var m=Ct(i,o)+1,p=c-m;f.disabled.push({before:Jr(o,p)}),f.disabled.push({after:Ve(i,p)})}!o&&i&&(f.disabled.push({before:Ve(i,-c+1)}),f.disabled.push({after:Ve(i,c-1)}))}return s.jsx(ls.Provider,{value:{selected:r,onDayClick:u,modifiers:f},children:a})}function cs(){var e=d.useContext(ls);if(!e)throw new Error("useSelectRange must be used within a SelectRangeProvider");return e}function ir(e){return Array.isArray(e)?ul([],e):e!==void 0?[e]:[]}function ch(e){var t={};return Object.entries(e).forEach(function(a){var r=a[0],n=a[1];t[r]=ir(n)}),t}var ht;(function(e){e.Outside="outside",e.Disabled="disabled",e.Selected="selected",e.Hidden="hidden",e.Today="today",e.RangeStart="range_start",e.RangeEnd="range_end",e.RangeMiddle="range_middle"})(ht||(ht={}));var dh=ht.Selected,kt=ht.Disabled,uh=ht.Hidden,fh=ht.Today,un=ht.RangeEnd,fn=ht.RangeMiddle,mn=ht.RangeStart,mh=ht.Outside;function hh(e,t,a){var r,n=(r={},r[dh]=ir(e.selected),r[kt]=ir(e.disabled),r[uh]=ir(e.hidden),r[fh]=[e.today],r[un]=[],r[fn]=[],r[mn]=[],r[mh]=[],r);return e.fromDate&&n[kt].push({before:e.fromDate}),e.toDate&&n[kt].push({after:e.toDate}),Ya(e)?n[kt]=n[kt].concat(t.modifiers[kt]):qa(e)&&(n[kt]=n[kt].concat(a.modifiers[kt]),n[mn]=a.modifiers[mn],n[fn]=a.modifiers[fn],n[un]=a.modifiers[un]),n}var gl=d.createContext(void 0);function ph(e){var t=je(),a=is(),r=cs(),n=hh(t,a,r),o=ch(t.modifiers),i=te(te({},n),o);return s.jsx(gl.Provider,{value:i,children:e.children})}function vl(){var e=d.useContext(gl);if(!e)throw new Error("useModifiers must be used within a ModifiersProvider");return e}function gh(e){return!!(e&&typeof e=="object"&&"before"in e&&"after"in e)}function vh(e){return!!(e&&typeof e=="object"&&"from"in e)}function yh(e){return!!(e&&typeof e=="object"&&"after"in e)}function xh(e){return!!(e&&typeof e=="object"&&"before"in e)}function bh(e){return!!(e&&typeof e=="object"&&"dayOfWeek"in e)}function _h(e,t){var a,r=t.from,n=t.to;if(r&&n){var o=Ct(n,r)<0;o&&(a=[n,r],r=a[0],n=a[1]);var i=Ct(e,r)>=0&&Ct(n,e)>=0;return i}return n?ze(n,e):r?ze(r,e):!1}function wh(e){return fo(e)}function jh(e){return Array.isArray(e)&&e.every(fo)}function Nh(e,t){return t.some(function(a){if(typeof a=="boolean")return a;if(wh(a))return ze(e,a);if(jh(a))return a.includes(e);if(vh(a))return _h(e,a);if(bh(a))return a.dayOfWeek.includes(e.getDay());if(gh(a)){var r=Ct(a.before,e),n=Ct(a.after,e),o=r>0,i=n<0,l=xn(a.before,a.after);return l?i&&o:o||i}return yh(a)?Ct(e,a.after)>0:xh(a)?Ct(a.before,e)>0:typeof a=="function"?a(e):!1})}function ds(e,t,a){var r=Object.keys(t).reduce(function(o,i){var l=t[i];return Nh(e,l)&&o.push(i),o},[]),n={};return r.forEach(function(o){return n[o]=!0}),a&&!Gn(e,a)&&(n.outside=!0),n}function kh(e,t){for(var a=He(e[0]),r=Wn(e[e.length-1]),n,o,i=a;i<=r;){var l=ds(i,t),c=!l.disabled&&!l.hidden;if(!c){i=Ve(i,1);continue}if(l.selected)return i;l.today&&!o&&(o=i),n||(n=i),i=Ve(i,1)}return o||n}var Sh=365;function yl(e,t){var a=t.moveBy,r=t.direction,n=t.context,o=t.modifiers,i=t.retry,l=i===void 0?{count:0,lastFocused:e}:i,c=n.weekStartsOn,u=n.fromDate,f=n.toDate,m=n.locale,p={day:Ve,week:yn,month:mt,year:ed,startOfWeek:function(_){return n.ISOWeek?$n(_):Ra(_,{locale:m,weekStartsOn:c})},endOfWeek:function(_){return n.ISOWeek?xo(_):zn(_,{locale:m,weekStartsOn:c})}},v=p[a](e,r==="after"?1:-1);r==="before"&&u?v=td([u,v]):r==="after"&&f&&(v=ad([f,v]));var b=!0;if(o){var h=ds(v,o);b=!h.disabled&&!h.hidden}return b?v:l.count>Sh?l.lastFocused:yl(v,{moveBy:a,direction:r,context:n,modifiers:o,retry:te(te({},l),{count:l.count+1})})}var xl=d.createContext(void 0);function Ch(e){var t=Ja(),a=vl(),r=d.useState(),n=r[0],o=r[1],i=d.useState(),l=i[0],c=i[1],u=kh(t.displayMonths,a),f=n??(l&&t.isDateDisplayed(l))?l:u,m=function(){c(n),o(void 0)},p=function(_){o(_)},v=je(),b=function(_,k){if(n){var x=yl(n,{moveBy:_,direction:k,context:v,modifiers:a});ze(n,x)||(t.goToDate(x,n),p(x))}},h={focusedDay:n,focusTarget:f,blur:m,focus:p,focusDayAfter:function(){return b("day","after")},focusDayBefore:function(){return b("day","before")},focusWeekAfter:function(){return b("week","after")},focusWeekBefore:function(){return b("week","before")},focusMonthBefore:function(){return b("month","before")},focusMonthAfter:function(){return b("month","after")},focusYearBefore:function(){return b("year","before")},focusYearAfter:function(){return b("year","after")},focusStartOfWeek:function(){return b("startOfWeek","before")},focusEndOfWeek:function(){return b("endOfWeek","after")}};return s.jsx(xl.Provider,{value:h,children:e.children})}function us(){var e=d.useContext(xl);if(!e)throw new Error("useFocusContext must be used within a FocusProvider");return e}function Mh(e,t){var a=vl(),r=ds(e,a,t);return r}var fs=d.createContext(void 0);function Ah(e){if(!Gr(e.initialProps)){var t={selected:void 0};return s.jsx(fs.Provider,{value:t,children:e.children})}return s.jsx(Dh,{initialProps:e.initialProps,children:e.children})}function Dh(e){var t=e.initialProps,a=e.children,r=function(o,i,l){var c,u,f;if((c=t.onDayClick)===null||c===void 0||c.call(t,o,i,l),i.selected&&!t.required){(u=t.onSelect)===null||u===void 0||u.call(t,void 0,o,i,l);return}(f=t.onSelect)===null||f===void 0||f.call(t,o,o,i,l)},n={selected:t.selected,onDayClick:r};return s.jsx(fs.Provider,{value:n,children:a})}function bl(){var e=d.useContext(fs);if(!e)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return e}function Eh(e,t){var a=je(),r=bl(),n=is(),o=cs(),i=us(),l=i.focusDayAfter,c=i.focusDayBefore,u=i.focusWeekAfter,f=i.focusWeekBefore,m=i.blur,p=i.focus,v=i.focusMonthBefore,b=i.focusMonthAfter,h=i.focusYearBefore,_=i.focusYearAfter,k=i.focusStartOfWeek,x=i.focusEndOfWeek,M=function(R){var I,$,P,se;Gr(a)?(I=r.onDayClick)===null||I===void 0||I.call(r,e,t,R):Ya(a)?($=n.onDayClick)===null||$===void 0||$.call(n,e,t,R):qa(a)?(P=o.onDayClick)===null||P===void 0||P.call(o,e,t,R):(se=a.onDayClick)===null||se===void 0||se.call(a,e,t,R)},w=function(R){var I;p(e),(I=a.onDayFocus)===null||I===void 0||I.call(a,e,t,R)},j=function(R){var I;m(),(I=a.onDayBlur)===null||I===void 0||I.call(a,e,t,R)},D=function(R){var I;(I=a.onDayMouseEnter)===null||I===void 0||I.call(a,e,t,R)},y=function(R){var I;(I=a.onDayMouseLeave)===null||I===void 0||I.call(a,e,t,R)},S=function(R){var I;(I=a.onDayPointerEnter)===null||I===void 0||I.call(a,e,t,R)},L=function(R){var I;(I=a.onDayPointerLeave)===null||I===void 0||I.call(a,e,t,R)},q=function(R){var I;(I=a.onDayTouchCancel)===null||I===void 0||I.call(a,e,t,R)},X=function(R){var I;(I=a.onDayTouchEnd)===null||I===void 0||I.call(a,e,t,R)},H=function(R){var I;(I=a.onDayTouchMove)===null||I===void 0||I.call(a,e,t,R)},z=function(R){var I;(I=a.onDayTouchStart)===null||I===void 0||I.call(a,e,t,R)},re=function(R){var I;(I=a.onDayKeyUp)===null||I===void 0||I.call(a,e,t,R)},de=function(R){var I;switch(R.key){case"ArrowLeft":R.preventDefault(),R.stopPropagation(),a.dir==="rtl"?l():c();break;case"ArrowRight":R.preventDefault(),R.stopPropagation(),a.dir==="rtl"?c():l();break;case"ArrowDown":R.preventDefault(),R.stopPropagation(),u();break;case"ArrowUp":R.preventDefault(),R.stopPropagation(),f();break;case"PageUp":R.preventDefault(),R.stopPropagation(),R.shiftKey?h():v();break;case"PageDown":R.preventDefault(),R.stopPropagation(),R.shiftKey?_():b();break;case"Home":R.preventDefault(),R.stopPropagation(),k();break;case"End":R.preventDefault(),R.stopPropagation(),x();break}(I=a.onDayKeyDown)===null||I===void 0||I.call(a,e,t,R)},J={onClick:M,onFocus:w,onBlur:j,onKeyDown:de,onKeyUp:re,onMouseEnter:D,onMouseLeave:y,onPointerEnter:S,onPointerLeave:L,onTouchCancel:q,onTouchEnd:X,onTouchMove:H,onTouchStart:z};return J}function Th(){var e=je(),t=bl(),a=is(),r=cs(),n=Gr(e)?t.selected:Ya(e)?a.selected:qa(e)?r.selected:void 0;return n}function Ih(e){return Object.values(ht).includes(e)}function Ph(e,t){var a=[e.classNames.day];return Object.keys(t).forEach(function(r){var n=e.modifiersClassNames[r];if(n)a.push(n);else if(Ih(r)){var o=e.classNames["day_".concat(r)];o&&a.push(o)}}),a}function Rh(e,t){var a=te({},e.styles.day);return Object.keys(t).forEach(function(r){var n;a=te(te({},a),(n=e.modifiersStyles)===null||n===void 0?void 0:n[r])}),a}function Oh(e,t,a){var r,n,o,i=je(),l=us(),c=Mh(e,t),u=Eh(e,c),f=Th(),m=!!(i.onDayClick||i.mode!=="default");d.useEffect(function(){var D;c.outside||l.focusedDay&&m&&ze(l.focusedDay,e)&&((D=a.current)===null||D===void 0||D.focus())},[l.focusedDay,e,a,m,c.outside]);var p=Ph(i,c).join(" "),v=Rh(i,c),b=!!(c.outside&&!i.showOutsideDays||c.hidden),h=(o=(n=i.components)===null||n===void 0?void 0:n.DayContent)!==null&&o!==void 0?o:rh,_=s.jsx(h,{date:e,displayMonth:t,activeModifiers:c}),k={style:v,className:p,children:_,role:"gridcell"},x=l.focusTarget&&ze(l.focusTarget,e)&&!c.outside,M=l.focusedDay&&ze(l.focusedDay,e),w=te(te(te({},k),(r={disabled:c.disabled,role:"gridcell"},r["aria-selected"]=c.selected,r.tabIndex=M||x?0:-1,r)),u),j={isButton:m,isHidden:b,activeModifiers:c,selectedDays:f,buttonProps:w,divProps:k};return j}function Fh(e){var t=d.useRef(null),a=Oh(e.date,e.displayMonth,t);return a.isHidden?s.jsx("div",{role:"gridcell"}):a.isButton?s.jsx(Ar,te({name:"day",ref:t},a.buttonProps)):s.jsx("div",te({},a.divProps))}function Uh(e){var t=e.number,a=e.dates,r=je(),n=r.onWeekNumberClick,o=r.styles,i=r.classNames,l=r.locale,c=r.labels.labelWeekNumber,u=r.formatters.formatWeekNumber,f=u(Number(t),{locale:l});if(!n)return s.jsx("span",{className:i.weeknumber,style:o.weeknumber,children:f});var m=c(Number(t),{locale:l}),p=function(v){n(t,a,v)};return s.jsx(Ar,{name:"week-number","aria-label":m,className:i.weeknumber,style:o.weeknumber,onClick:p,children:f})}function Lh(e){var t,a,r=je(),n=r.styles,o=r.classNames,i=r.showWeekNumber,l=r.components,c=(t=l==null?void 0:l.Day)!==null&&t!==void 0?t:Fh,u=(a=l==null?void 0:l.WeekNumber)!==null&&a!==void 0?a:Uh,f;return i&&(f=s.jsx("td",{className:o.cell,style:n.cell,children:s.jsx(u,{number:e.weekNumber,dates:e.dates})})),s.jsxs("tr",{className:o.row,style:n.row,children:[f,e.dates.map(function(m){return s.jsx("td",{className:o.cell,style:n.cell,role:"presentation",children:s.jsx(c,{displayMonth:e.displayMonth,date:m})},sd(m))})]})}function io(e,t,a){for(var r=a!=null&&a.ISOWeek?xo(t):zn(t,a),n=a!=null&&a.ISOWeek?$n(e):Ra(e,a),o=Ct(r,n),i=[],l=0;l<=o;l++)i.push(Ve(n,l));var c=i.reduce(function(u,f){var m=a!=null&&a.ISOWeek?Vc(f):Bc(f,a),p=u.find(function(v){return v.weekNumber===m});return p?(p.dates.push(f),u):(u.push({weekNumber:m,dates:[f]}),u)},[]);return c}function Vh(e,t){var a=io(He(e),Wn(e),t);if(t!=null&&t.useFixedWeeks){var r=id(e,t);if(r<6){var n=a[a.length-1],o=n.dates[n.dates.length-1],i=yn(o,6-r),l=io(yn(o,1),i,t);a.push.apply(a,l)}}return a}function Bh(e){var t,a,r,n=je(),o=n.locale,i=n.classNames,l=n.styles,c=n.hideHead,u=n.fixedWeeks,f=n.components,m=n.weekStartsOn,p=n.firstWeekContainsDate,v=n.ISOWeek,b=Vh(e.displayMonth,{useFixedWeeks:!!u,ISOWeek:v,locale:o,weekStartsOn:m,firstWeekContainsDate:p}),h=(t=f==null?void 0:f.Head)!==null&&t!==void 0?t:ah,_=(a=f==null?void 0:f.Row)!==null&&a!==void 0?a:Lh,k=(r=f==null?void 0:f.Footer)!==null&&r!==void 0?r:Qm;return s.jsxs("table",{id:e.id,className:i.table,style:l.table,role:"grid","aria-labelledby":e["aria-labelledby"],children:[!c&&s.jsx(h,{}),s.jsx("tbody",{className:i.tbody,style:l.tbody,children:b.map(function(x){return s.jsx(_,{displayMonth:e.displayMonth,dates:x.dates,weekNumber:x.weekNumber},x.weekNumber)})}),s.jsx(k,{displayMonth:e.displayMonth})]})}function $h(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var Wh=$h()?d.useLayoutEffect:d.useEffect,hn=!1,zh=0;function lo(){return"react-day-picker-".concat(++zh)}function Gh(e){var t,a=e??(hn?lo():null),r=d.useState(a),n=r[0],o=r[1];return Wh(function(){n===null&&o(lo())},[]),d.useEffect(function(){hn===!1&&(hn=!0)},[]),(t=e??n)!==null&&t!==void 0?t:void 0}function Hh(e){var t,a,r=je(),n=r.dir,o=r.classNames,i=r.styles,l=r.components,c=Ja().displayMonths,u=Gh(r.id?"".concat(r.id,"-").concat(e.displayIndex):void 0),f=r.id?"".concat(r.id,"-grid-").concat(e.displayIndex):void 0,m=[o.month],p=i.month,v=e.displayIndex===0,b=e.displayIndex===c.length-1,h=!v&&!b;n==="rtl"&&(t=[v,b],b=t[0],v=t[1]),v&&(m.push(o.caption_start),p=te(te({},p),i.caption_start)),b&&(m.push(o.caption_end),p=te(te({},p),i.caption_end)),h&&(m.push(o.caption_between),p=te(te({},p),i.caption_between));var _=(a=l==null?void 0:l.Caption)!==null&&a!==void 0?a:Xm;return s.jsxs("div",{className:m.join(" "),style:p,children:[s.jsx(_,{id:u,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),s.jsx(Bh,{id:f,"aria-labelledby":u,displayMonth:e.displayMonth})]},e.displayIndex)}function Zh(e){var t=je(),a=t.classNames,r=t.styles;return s.jsx("div",{className:a.months,style:r.months,children:e.children})}function Kh(e){var t,a,r=e.initialProps,n=je(),o=us(),i=Ja(),l=d.useState(!1),c=l[0],u=l[1];d.useEffect(function(){n.initialFocus&&o.focusTarget&&(c||(o.focus(o.focusTarget),u(!0)))},[n.initialFocus,c,o.focus,o.focusTarget,o]);var f=[n.classNames.root,n.className];n.numberOfMonths>1&&f.push(n.classNames.multiple_months),n.showWeekNumber&&f.push(n.classNames.with_weeknumber);var m=te(te({},n.styles.root),n.style),p=Object.keys(r).filter(function(b){return b.startsWith("data-")}).reduce(function(b,h){var _;return te(te({},b),(_={},_[h]=r[h],_))},{}),v=(a=(t=r.components)===null||t===void 0?void 0:t.Months)!==null&&a!==void 0?a:Zh;return s.jsx("div",te({className:f.join(" "),style:m,dir:n.dir,id:n.id,nonce:r.nonce,title:r.title,lang:r.lang},p,{children:s.jsx(v,{children:i.displayMonths.map(function(b,h){return s.jsx(Hh,{displayIndex:h,displayMonth:b},h)})})}))}function Yh(e){var t=e.children,a=xm(e,["children"]);return s.jsx(Um,{initialProps:a,children:s.jsx(Km,{children:s.jsx(Ah,{initialProps:a,children:s.jsx(nh,{initialProps:a,children:s.jsx(ih,{initialProps:a,children:s.jsx(ph,{children:s.jsx(Ch,{children:t})})})})})})})}function qh(e){return s.jsx(Yh,te({},e,{children:s.jsx(Kh,{initialProps:e})}))}function ms({className:e,classNames:t,showOutsideDays:a=!0,...r}){return s.jsx(qh,{showOutsideDays:a,className:ce("p-3",e),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:ce(Ms({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:ce(Ms({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},components:{IconLeft:({...n})=>s.jsx(Hc,{className:"h-4 w-4"}),IconRight:({...n})=>s.jsx(vo,{className:"h-4 w-4"})},...r})}ms.displayName="Calendar";const Jh=at({id:oe().optional(),type:Jn(["notification","study","event"],{message:"Tipe tidak valid."}),title:oe().min(1,"Judul tidak boleh kosong.").max(100,"Judul terlalu panjang."),content:oe().min(1,"Konten tidak boleh kosong."),event_date:oe().nullable().optional(),event_time:oe().nullable().optional(),display_order:Pe.number().int().min(0,"Urutan tampilan harus non-negatif.").default(0)}),Xh=[{value:"notification",label:"Pengumuman"},{value:"study",label:"Kajian"},{value:"event",label:"Acara Khusus"}],Qh=()=>{const[e,t]=d.useState([]),[a,r]=d.useState(!1),[n,o]=d.useState(null),i=qe({resolver:Je(Jh),defaultValues:{type:"notification",title:"",content:"",event_date:null,event_time:null,display_order:0}}),{handleSubmit:l,register:c,setValue:u,watch:f,reset:m,formState:{isSubmitting:p,errors:v}}=i,b=f("type"),h=f("event_date"),_=d.useCallback(async()=>{const{data:j,error:D}=await O.from("notifications_and_studies").select("*").order("display_order",{ascending:!0}).order("created_at",{ascending:!1});D?(console.error("Error fetching notifications/studies:",D),A.error("Gagal memuat notifikasi & kajian.")):t(j||[])},[]);d.useEffect(()=>{_();const j=O.channel("notifications_and_studies_changes").on("postgres_changes",{event:"*",schema:"public",table:"notifications_and_studies"},D=>{console.log("Notification/Study change received!",D),_()}).subscribe();return console.log("NotificationStudySettings: Subscribed to channel 'notifications_and_studies_changes'."),()=>{O.removeChannel(j),console.log("NotificationStudySettings: Unsubscribed from channel 'notifications_and_studies_changes'.")}},[_]);const k=()=>{o(null),m({type:"notification",title:"",content:"",event_date:null,event_time:null,display_order:0}),r(!0)},x=j=>{o(j),m({id:j.id,type:j.type,title:j.title,content:j.content,event_date:j.event_date||null,event_time:j.event_time||null,display_order:j.display_order}),r(!0)},M=async j=>{if(!window.confirm("Apakah Anda yakin ingin menghapus item ini?"))return;const{error:D}=await O.from("notifications_and_studies").delete().eq("id",j);D?(console.error("Error deleting item:",D),A.error("Gagal menghapus item.")):(A.success("Item berhasil dihapus!"),_())},w=async j=>{const D={type:j.type,title:j.title,content:j.content,event_date:j.event_date||null,event_time:j.event_time||null,display_order:j.display_order};if(n){const{error:y}=await O.from("notifications_and_studies").update(D).eq("id",n.id);y?(console.error("Error updating item:",y),A.error("Gagal memperbarui item.")):(A.success("Item berhasil diperbarui!"),r(!1),_())}else{const{error:y}=await O.from("notifications_and_studies").insert(D);y?(console.error("Error adding item:",y),A.error("Gagal menambahkan item.")):(A.success("Item berhasil ditambahkan!"),r(!1),_())}};return s.jsxs(Xe,{className:"bg-gray-800 text-white border-gray-700 col-span-full lg:col-span-2",children:[s.jsx(Qe,{children:s.jsx(et,{className:"text-2xl font-semibold text-blue-300",children:"Pengaturan Notifikasi & Kajian"})}),s.jsxs(tt,{children:[s.jsx("p",{className:"text-gray-400 mb-4",children:"Kelola pengumuman, jadwal kajian, dan acara khusus."}),s.jsxs(ee,{onClick:k,className:"w-full bg-green-600 hover:bg-green-700 text-white mb-4",children:[s.jsx($a,{className:"mr-2 h-4 w-4"})," Tambah Item Baru"]}),s.jsx("div",{className:"space-y-3",children:e.length===0?s.jsx("p",{className:"text-gray-400 text-center",children:"Belum ada notifikasi atau kajian. Tambahkan yang pertama!"}):e.map(j=>s.jsxs("div",{className:"flex items-center justify-between bg-gray-700 p-3 rounded-md shadow-sm",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-lg text-blue-200",children:j.title}),s.jsx("p",{className:"text-sm text-gray-300 truncate max-w-xs",children:j.content}),s.jsxs("p",{className:"text-xs text-gray-400",children:["Tipe: ",j.type," | Urutan: ",j.display_order,(j.event_date||j.event_time)&&s.jsxs("span",{children:[" | Jadwal: ",j.event_date?Ge(new Date(j.event_date),"dd/MM/yyyy"):""," ",j.event_time]})]})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx(ee,{variant:"outline",size:"icon",onClick:()=>x(j),className:"text-blue-400 border-blue-400 hover:bg-blue-400 hover:text-white",children:s.jsx(ba,{className:"h-4 w-4"})}),s.jsx(ee,{variant:"outline",size:"icon",onClick:()=>M(j.id),className:"text-red-400 border-red-400 hover:bg-red-400 hover:text-white",children:s.jsx(_a,{className:"h-4 w-4"})})]})]},j.id))}),s.jsx(Bt,{open:a,onOpenChange:r,children:s.jsxs(Tt,{className:"bg-gray-800 text-white border-gray-700",children:[s.jsxs(It,{children:[s.jsx(Rt,{className:"text-blue-300",children:n?"Edit Item Notifikasi/Kajian":"Tambah Item Baru"}),s.jsx($t,{children:n?"Perbarui detail notifikasi, kajian, atau acara khusus ini.":"Isi detail untuk notifikasi, kajian, atau acara khusus baru."})]}),s.jsxs("form",{onSubmit:l(w),className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Z,{htmlFor:"type",className:"text-gray-300",children:"Tipe"}),s.jsxs(ut,{onValueChange:j=>u("type",j),defaultValue:i.getValues("type"),children:[s.jsx(nt,{className:"w-full bg-gray-700 border-gray-600 text-white mt-1",children:s.jsx(ft,{placeholder:"Pilih Tipe"})}),s.jsx(st,{className:"bg-gray-700 text-white border-gray-600",children:Xh.map(j=>s.jsx(Re,{value:j.value,children:j.label},j.value))})]}),v.type&&s.jsx("p",{className:"text-red-400 text-sm mt-1",children:v.type.message})]}),s.jsxs("div",{children:[s.jsx(Z,{htmlFor:"title",className:"text-gray-300",children:"Judul"}),s.jsx(le,{id:"title",...c("title"),className:"bg-gray-700 border-gray-600 text-white mt-1",placeholder:"Judul notifikasi atau kajian"}),v.title&&s.jsx("p",{className:"text-red-400 text-sm mt-1",children:v.title.message})]}),s.jsxs("div",{children:[s.jsx(Z,{htmlFor:"content",className:"text-gray-300",children:"Konten"}),s.jsx(Or,{id:"content",...c("content"),className:"bg-gray-700 border-gray-600 text-white mt-1 min-h-[100px]",placeholder:"Detail notifikasi atau kajian..."}),v.content&&s.jsx("p",{className:"text-red-400 text-sm mt-1",children:v.content.message})]}),(b==="study"||b==="event")&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx(Z,{htmlFor:"event_date",className:"text-gray-300 block mb-1",children:"Tanggal Acara (Opsional)"}),s.jsxs(cl,{children:[s.jsx(dl,{asChild:!0,children:s.jsxs(ee,{variant:"outline",className:ce("w-full justify-start text-left font-normal bg-gray-700 border-gray-600 text-white",!h&&"text-muted-foreground"),children:[s.jsx(ho,{className:"mr-2 h-4 w-4"}),h?Ge(new Date(h),"PPP"):s.jsx("span",{children:"Pilih tanggal"})]})}),s.jsx(ss,{className:"w-auto p-0 bg-gray-700 border-gray-600 text-white",children:s.jsx(ms,{mode:"single",selected:h?new Date(h):void 0,onSelect:j=>u("event_date",j?Ge(j,"yyyy-MM-dd"):null),initialFocus:!0})})]}),v.event_date&&s.jsx("p",{className:"text-red-400 text-sm mt-1",children:v.event_date.message})]}),s.jsxs("div",{children:[s.jsx(Z,{htmlFor:"event_time",className:"text-gray-300",children:"Waktu Acara (Opsional, HH:MM)"}),s.jsx(le,{id:"event_time",...c("event_time"),className:"bg-gray-700 border-gray-600 text-white mt-1",placeholder:"Contoh: 19:30"}),v.event_time&&s.jsx("p",{className:"text-red-400 text-sm mt-1",children:v.event_time.message})]})]}),s.jsxs("div",{children:[s.jsx(Z,{htmlFor:"display_order",className:"text-gray-300",children:"Urutan Tampilan"}),s.jsx(le,{id:"display_order",type:"number",...c("display_order"),className:"bg-gray-700 border-gray-600 text-white mt-1"}),v.display_order&&s.jsx("p",{className:"text-red-400 text-sm mt-1",children:v.display_order.message})]}),s.jsxs(Pt,{children:[s.jsx(ee,{type:"button",variant:"outline",onClick:()=>r(!1),className:"text-gray-300 border-gray-600 hover:bg-gray-700",children:"Batal"}),s.jsx(ee,{type:"submit",disabled:p,className:"bg-blue-600 hover:bg-blue-700 text-white",children:p?"Menyimpan...":n?"Simpan Perubahan":"Tambah Item"})]})]})]})})]})]})},ep=at({id:oe().optional(),transaction_type:Jn(["inflow","outflow"],{message:"Tipe transaksi tidak valid."}),amount:Pe.number().min(.01,"Jumlah harus lebih besar dari 0.").max(1e12,"Jumlah terlalu besar."),description:oe().min(1,"Deskripsi tidak boleh kosong.").max(255,"Deskripsi terlalu panjang.")}),tp=[{value:"inflow",label:"Pemasukan"},{value:"outflow",label:"Pengeluaran"}],ap=()=>{const[e,t]=d.useState([]),[a,r]=d.useState(0),[n,o]=d.useState(!1),[i,l]=d.useState(null),c=qe({resolver:Je(ep),defaultValues:{transaction_type:"inflow",amount:0,description:""}}),{handleSubmit:u,register:f,setValue:m,reset:p,formState:{isSubmitting:v,errors:b}}=c,h=d.useCallback(async()=>{const{data:w,error:j}=await O.from("financial_records").select("*").order("created_at",{ascending:!0});if(j)console.error("Error fetching financial records:",j),A.error("Gagal memuat catatan keuangan.");else{t(w||[]);const D=(w||[]).reduce((y,S)=>S.transaction_type==="inflow"?y+S.amount:y-S.amount,0);r(D)}},[]);d.useEffect(()=>{h();const w=O.channel("financial_records_changes").on("postgres_changes",{event:"*",schema:"public",table:"financial_records"},j=>{console.log("Financial record change received!",j),h()}).subscribe();return console.log("FinancialSettings: Subscribed to channel 'financial_records_changes'."),()=>{O.removeChannel(w),console.log("FinancialSettings: Unsubscribed from channel 'financial_records_changes'.")}},[h]);const _=()=>{l(null),p({transaction_type:"inflow",amount:0,description:""}),o(!0)},k=w=>{l(w),p({id:w.id,transaction_type:w.transaction_type,amount:w.amount,description:w.description}),o(!0)},x=async w=>{if(!window.confirm("Apakah Anda yakin ingin menghapus catatan ini?"))return;const{error:j}=await O.from("financial_records").delete().eq("id",w);j?(console.error("Error deleting record:",j),A.error("Gagal menghapus catatan keuangan.")):(A.success("Catatan keuangan berhasil dihapus!"),h())},M=async w=>{const j={transaction_type:w.transaction_type,amount:w.amount,description:w.description};if(i){const{error:D}=await O.from("financial_records").update(j).eq("id",i.id);D?(console.error("Error updating record:",D),A.error("Gagal memperbarui catatan keuangan.")):(A.success("Catatan keuangan berhasil diperbarui!"),o(!1),h())}else{const{error:D}=await O.from("financial_records").insert(j);D?(console.error("Error adding record:",D),A.error("Gagal menambahkan catatan keuangan.")):(A.success("Catatan keuangan berhasil ditambahkan!"),o(!1),h())}};return s.jsxs(Xe,{className:"bg-gray-800 text-white border-gray-700 col-span-full lg:col-span-2",children:[s.jsx(Qe,{children:s.jsx(et,{className:"text-2xl font-semibold text-blue-300",children:"Informasi Keuangan"})}),s.jsxs(tt,{children:[s.jsx("p",{className:"text-gray-400 mb-4",children:"Kelola catatan pemasukan dan pengeluaran masjid."}),s.jsxs("div",{className:"mb-6 p-4 bg-gray-700 rounded-md shadow-inner",children:[s.jsx("h3",{className:"text-xl font-semibold text-yellow-300",children:"Saldo Saat Ini:"}),s.jsxs("p",{className:"text-4xl font-bold text-green-400",children:["Rp ",a.toLocaleString("id-ID",{minimumFractionDigits:0,maximumFractionDigits:0})]})]}),s.jsxs(ee,{onClick:_,className:"w-full bg-green-600 hover:bg-green-700 text-white mb-4",children:[s.jsx($a,{className:"mr-2 h-4 w-4"})," Tambah Transaksi Baru"]}),s.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto pr-2",children:e.length===0?s.jsx("p",{className:"text-gray-400 text-center",children:"Belum ada catatan keuangan. Tambahkan yang pertama!"}):e.map(w=>s.jsxs("div",{className:"flex flex-col items-start bg-gray-700 p-3 rounded-md shadow-sm",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"font-medium text-xl text-blue-200",children:[" ",w.description]}),s.jsxs("p",{className:`text-lg font-semibold ${w.transaction_type==="inflow"?"text-green-400":"text-red-400"}`,children:[" ",w.transaction_type==="inflow"?"Pemasukan":"Pengeluaran",": Rp ",w.amount.toLocaleString("id-ID",{minimumFractionDigits:0,maximumFractionDigits:0})]}),s.jsxs("p",{className:"text-base text-gray-400",children:[" ",Ge(new Date(w.created_at),"dd MMMM yyyy, HH:mm",{locale:vn})]})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx(ee,{variant:"outline",size:"icon",onClick:()=>k(w),className:"text-blue-400 border-blue-400 hover:bg-blue-400 hover:text-white",children:s.jsx(ba,{className:"h-4 w-4"})}),s.jsx(ee,{variant:"outline",size:"icon",onClick:()=>x(w.id),className:"text-red-400 border-red-400 hover:bg-red-400 hover:text-white",children:s.jsx(_a,{className:"h-4 w-4"})})]})]},w.id))}),s.jsx(Bt,{open:n,onOpenChange:o,children:s.jsxs(Tt,{className:"bg-gray-800 text-white border-gray-700",children:[s.jsx(It,{children:s.jsx(Rt,{className:"text-blue-300",children:i?"Edit Catatan Keuangan":"Tambah Transaksi Baru"})}),s.jsxs("form",{onSubmit:u(M),className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Z,{htmlFor:"transaction_type",className:"text-gray-300",children:"Tipe Transaksi"}),s.jsxs(ut,{onValueChange:w=>m("transaction_type",w),defaultValue:c.getValues("transaction_type"),children:[s.jsx(nt,{className:"w-full bg-gray-700 border-gray-600 text-white mt-1",children:s.jsx(ft,{placeholder:"Pilih Tipe"})}),s.jsx(st,{className:"bg-gray-700 text-white border-gray-600",children:tp.map(w=>s.jsx(Re,{value:w.value,children:w.label},w.value))})]}),b.transaction_type&&s.jsx("p",{className:"text-red-400 text-sm mt-1",children:b.transaction_type.message})]}),s.jsxs("div",{children:[s.jsx(Z,{htmlFor:"amount",className:"text-gray-300",children:"Jumlah (Rp)"}),s.jsx(le,{id:"amount",type:"number",step:"0.01",...f("amount"),className:"bg-gray-700 border-gray-600 text-white mt-1",placeholder:"Contoh: 150000"}),b.amount&&s.jsx("p",{className:"text-red-400 text-sm mt-1",children:b.amount.message})]}),s.jsxs("div",{children:[s.jsx(Z,{htmlFor:"description",className:"text-gray-300",children:"Deskripsi"}),s.jsx(le,{id:"description",...f("description"),className:"bg-gray-700 border-gray-600 text-white mt-1",placeholder:"Contoh: Donasi hamba Allah"}),b.description&&s.jsx("p",{className:"text-red-400 text-sm mt-1",children:b.description.message})]}),s.jsxs(Pt,{children:[s.jsx(ee,{type:"button",variant:"outline",onClick:()=>o(!1),className:"text-gray-300 border-gray-600 hover:bg-gray-700",children:"Batal"}),s.jsx(ee,{type:"submit",disabled:v,className:"bg-blue-600 hover:bg-blue-700 text-white",children:v?"Menyimpan...":i?"Simpan Perubahan":"Tambah Transaksi"})]})]})]})})]})]})};var hs="Switch",[rp,rv]=ea(hs),[np,sp]=rp(hs),_l=d.forwardRef((e,t)=>{const{__scopeSwitch:a,name:r,checked:n,defaultChecked:o,required:i,disabled:l,value:c="on",onCheckedChange:u,form:f,...m}=e,[p,v]=d.useState(null),b=Ne(t,M=>v(M)),h=d.useRef(!1),_=p?f||!!p.closest("form"):!0,[k=!1,x]=Zt({prop:n,defaultProp:o,onChange:u});return s.jsxs(np,{scope:a,checked:k,disabled:l,children:[s.jsx(xe.button,{type:"button",role:"switch","aria-checked":k,"aria-required":i,"data-state":Nl(k),"data-disabled":l?"":void 0,disabled:l,value:c,...m,ref:b,onClick:Y(e.onClick,M=>{x(w=>!w),_&&(h.current=M.isPropagationStopped(),h.current||M.stopPropagation())})}),_&&s.jsx(op,{control:p,bubbles:!h.current,name:r,value:c,checked:k,required:i,disabled:l,form:f,style:{transform:"translateX(-100%)"}})]})});_l.displayName=hs;var wl="SwitchThumb",jl=d.forwardRef((e,t)=>{const{__scopeSwitch:a,...r}=e,n=sp(wl,a);return s.jsx(xe.span,{"data-state":Nl(n.checked),"data-disabled":n.disabled?"":void 0,...r,ref:t})});jl.displayName=wl;var op=e=>{const{control:t,checked:a,bubbles:r=!0,...n}=e,o=d.useRef(null),i=Vo(a),l=$c(t);return d.useEffect(()=>{const c=o.current,u=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(u,"checked").set;if(i!==a&&m){const p=new Event("click",{bubbles:r});m.call(c,a),c.dispatchEvent(p)}},[i,a,r]),s.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:a,...n,tabIndex:-1,ref:o,style:{...e.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function Nl(e){return e?"checked":"unchecked"}var kl=_l,ip=jl;const Pa=d.forwardRef(({className:e,...t},a)=>s.jsx(kl,{className:ce("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:a,children:s.jsx(ip,{className:ce("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Pa.displayName=kl.displayName;const lp=()=>{const{settings:e,isLoadingSettings:t,refetchSettings:a}=ya(),[r,n]=Ye.useState(!1),[o,i]=Ye.useState(!0);d.useEffect(()=>{!t&&e?(n(e.is_ramadan_mode_active),i(!1)):!t&&!e&&(n(!1),i(!1))},[e,t]);const l=async c=>{n(c);const{error:u}=await O.from("app_settings").upsert({id:1,is_ramadan_mode_active:c},{onConflict:"id"});u?(console.error("Error saving Ramadan mode setting:",u),A.error("Gagal menyimpan pengaturan mode Ramadan."),n(!c)):(A.success(`Mode Ramadan ${c?"diaktifkan":"dinonaktifkan"}.`),a())};return s.jsxs(Xe,{className:"bg-gray-800 text-white border-gray-700",children:[s.jsx(Qe,{children:s.jsx(et,{className:"text-2xl font-semibold text-blue-300",children:"Pengaturan Mode Ramadan"})}),s.jsxs(tt,{children:[s.jsx("p",{className:"text-gray-400 mb-4",children:"Aktifkan mode Ramadan untuk menampilkan waktu Imsak."}),s.jsxs("div",{className:"flex items-center justify-between space-x-2",children:[s.jsx(Z,{htmlFor:"ramadan-mode",className:"text-gray-300 text-lg",children:"Aktifkan Mode Ramadan"}),o?s.jsx("div",{className:"w-12 h-6 bg-gray-700 rounded-full animate-pulse"}):s.jsx(Pa,{id:"ramadan-mode",checked:r,onCheckedChange:l,className:"data-[state=checked]:bg-green-600 data-[state=unchecked]:bg-gray-600"})]})]})]})},cp=at({backgroundImageUrl:oe().nullable().optional(),backgroundColor:oe().min(1,"Warna latar belakang tidak boleh kosong.").default("#0A0A0A")}),dp=()=>{const{settings:e,isLoadingSettings:t,refetchSettings:a}=ya(),r=qe({resolver:Je(cp),defaultValues:{backgroundImageUrl:null,backgroundColor:"#0A0A0A"}}),{handleSubmit:n,register:o,setValue:i,formState:{isSubmitting:l,errors:c}}=r,[u,f]=d.useState(null);d.useEffect(()=>{!t&&e&&(i("backgroundImageUrl",e.background_image_url),f(e.background_image_url),i("backgroundColor",e.background_color||"#0A0A0A"))},[e,t,i]);const m=async v=>{var w;const b=(w=v.target.files)==null?void 0:w[0];if(!b)return;const h=b.name.split(".").pop(),k=`backgrounds/${`${za()}.${h}`}`,x=A.loading("Mengunggah gambar latar belakang: 0%"),M=u;try{const{data:j,error:D}=await O.storage.from("images").upload(k,b,{cacheControl:"3600",upsert:!1,onUploadProgress:S=>{const L=Math.round(S.loaded*100/S.total);console.log(`Upload progress for background: ${L}%`),A.loading(`Mengunggah gambar latar belakang: ${L}%`,{id:x})}});if(D)throw D;const{data:y}=O.storage.from("images").getPublicUrl(k);if(y!=null&&y.publicUrl){if(i("backgroundImageUrl",y.publicUrl),f(y.publicUrl),A.loading("Mengunggah gambar latar belakang: 100%",{id:x}),A.success("Gambar latar belakang berhasil diunggah!",{id:x}),A.info("Untuk performa terbaik di perangkat rendah, pastikan ukuran file gambar dioptimalkan (misal: format WebP, resolusi sesuai kebutuhan)."),M&&M!==y.publicUrl)try{const S=M.split("/"),L=S.indexOf("public"),q=S.slice(L+2).join("/"),{error:X}=await O.storage.from("images").remove([q]);X?(console.warn("Gagal menghapus gambar latar belakang lama dari storage:",X),A.warning("Gagal menghapus gambar latar belakang lama.")):console.log("Gambar latar belakang lama berhasil dihapus.")}catch(S){console.warn("Error parsing old image path for deletion:",S)}}else throw new Error("Gagal mendapatkan URL publik gambar.")}catch(j){console.error("Error uploading image:",j),A.error(`Gagal mengunggah gambar: ${j.message}`,{id:x})}},p=async v=>{const{data:b,error:h}=await O.from("app_settings").upsert({id:1,background_image_url:v.backgroundImageUrl||null,background_color:v.backgroundColor},{onConflict:"id"});h?(console.error("Error saving display settings:",h),A.error("Gagal menyimpan pengaturan tampilan.")):(A.success("Pengaturan tampilan berhasil disimpan!"),console.log("Display settings saved:",b),a())};return s.jsxs(Xe,{className:"bg-gray-800 text-white border-gray-700",children:[s.jsx(Qe,{children:s.jsx(et,{className:"text-2xl font-semibold text-blue-300",children:"Pengaturan Tampilan"})}),s.jsxs(tt,{children:[s.jsx("p",{className:"text-gray-400 mb-4",children:"Atur gambar atau warna latar belakang untuk tampilan utama."}),s.jsxs("form",{onSubmit:n(p),className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Z,{htmlFor:"backgroundImageUpload",className:"text-gray-300",children:"Unggah Gambar Latar Belakang (Opsional)"}),s.jsx(le,{id:"backgroundImageUpload",type:"file",accept:"image/*",onChange:m,className:"bg-gray-700 border-gray-600 text-white mt-1 file:text-white file:bg-blue-600 file:hover:bg-blue-700 file:border-none file:rounded-md file:px-3 file:py-1"}),u&&s.jsxs("div",{className:"mt-2",children:[s.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"Gambar saat ini:"}),s.jsx("img",{src:u,alt:"Current Background",className:"max-w-full h-32 object-contain rounded-md border border-gray-600"})]}),c.backgroundImageUrl&&s.jsx("p",{className:"text-red-400 text-sm mt-1",children:c.backgroundImageUrl.message})]}),s.jsxs("div",{children:[s.jsx(Z,{htmlFor:"backgroundColor",className:"text-gray-300",children:"Warna Latar Belakang (Hex atau Nama Warna)"}),s.jsx(le,{id:"backgroundColor",type:"text",...o("backgroundColor"),className:"bg-gray-700 border-gray-600 text-white mt-1",placeholder:"Contoh: #0A0A0A atau black"}),c.backgroundColor&&s.jsx("p",{className:"text-red-400 text-sm mt-1",children:c.backgroundColor.message})]}),s.jsx(ee,{type:"submit",disabled:l,className:"w-full bg-blue-600 hover:bg-blue-700 text-white",children:l?"Menyimpan...":"Simpan Pengaturan Tampilan"})]})]})]})},up=at({murottalActive:tn().default(!1),tarhimActive:tn().default(!1),iqomahCountdownDuration:Pe.number().int().min(0,"Durasi harus non-negatif.").default(300),murottalPreAdhanDuration:Pe.number().int().min(0,"Durasi harus non-negatif.").default(10),tarhimPreAdhanDuration:Pe.number().int().min(0,"Durasi harus non-negatif.").default(300),murottalAudioUrlFajr:oe().nullable().optional(),murottalAudioUrlDhuhr:oe().nullable().optional(),murottalAudioUrlAsr:oe().nullable().optional(),murottalAudioUrlMaghrib:oe().nullable().optional(),murottalAudioUrlIsha:oe().nullable().optional(),murottalAudioUrlImsak:oe().nullable().optional(),tarhimAudioUrl:oe().nullable().optional(),khutbahDurationMinutes:Pe.number().int().min(1,"Durasi khutbah harus lebih dari 0 menit.").default(45),isMasterAudioActive:tn().default(!0),adhanBeepAudioUrl:oe().nullable().optional(),iqomahBeepAudioUrl:oe().nullable().optional(),imsakBeepAudioUrl:oe().nullable().optional()}),fp=at({title:oe().max(100,"Judul terlalu panjang.").nullable().optional(),file:Uo(FileList).refine(e=>e.length>0,"File audio harus diunggah.")}),mp=[{name:"murottalAudioUrlFajr",label:"Audio Murottal Subuh"},{name:"murottalAudioUrlDhuhr",label:"Audio Murottal Dzuhur"},{name:"murottalAudioUrlAsr",label:"Audio Murottal Ashar"},{name:"murottalAudioUrlMaghrib",label:"Audio Murottal Maghrib"},{name:"murottalAudioUrlIsha",label:"Audio Murottal Isya"},{name:"murottalAudioUrlImsak",label:"Audio Murottal Imsak (Mode Ramadan)"}],hp={murottalActive:"murottal_active",tarhimActive:"tarhim_active",iqomahCountdownDuration:"iqomah_countdown_duration",murottalPreAdhanDuration:"murottal_pre_adhan_duration",tarhimPreAdhanDuration:"tarhim_pre_adhan_duration",murottalAudioUrlFajr:"murottal_audio_url_fajr",murottalAudioUrlDhuhr:"murottal_audio_url_dhuhr",murottalAudioUrlAsr:"murottal_audio_url_asr",murottalAudioUrlMaghrib:"murottal_audio_url_maghrib",murottalAudioUrlIsha:"murottal_audio_url_isha",murottalAudioUrlImsak:"murottal_audio_url_imsak",tarhimAudioUrl:"tarhim_audio_url",khutbahDurationMinutes:"khutbah_duration_minutes",isMasterAudioActive:"is_master_audio_active",adhanBeepAudioUrl:"adhan_beep_audio_url",iqomahBeepAudioUrl:"iqomah_beep_audio_url",imsakBeepAudioUrl:"imsak_beep_audio_url"},pp=()=>{const{settings:e,isLoadingSettings:t,refetchSettings:a}=ya(),[r,n]=d.useState([]),[o,i]=d.useState(!1),l=qe({resolver:Je(up),defaultValues:{murottalActive:!1,tarhimActive:!1,iqomahCountdownDuration:300,murottalPreAdhanDuration:10,tarhimPreAdhanDuration:300,murottalAudioUrlFajr:null,murottalAudioUrlDhuhr:null,murottalAudioUrlAsr:null,murottalAudioUrlMaghrib:null,murottalAudioUrlIsha:null,murottalAudioUrlImsak:null,tarhimAudioUrl:null,khutbahDurationMinutes:45,isMasterAudioActive:!0,adhanBeepAudioUrl:null,iqomahBeepAudioUrl:null,imsakBeepAudioUrl:null}}),c=qe({resolver:Je(fp),defaultValues:{title:"",file:void 0}}),{handleSubmit:u,register:f,setValue:m,formState:{isSubmitting:p,errors:v}}=l,{handleSubmit:b,register:h,reset:_,formState:{isSubmitting:k,errors:x}}=c,M=d.useCallback(async()=>{try{const{data:y,error:S}=await O.from("media_files").select("id, title, file_path, file_type, source_type").eq("file_type","audio").eq("source_type","upload").order("title",{ascending:!0});S?(console.error("Error fetching available audio files:",S),A.error("Gagal memuat daftar audio.")):n(y||[])}catch(y){console.error("Unexpected error fetching available audio files:",y),A.error("Terjadi kesalahan saat memuat daftar audio.")}},[]);d.useEffect(()=>{M(),!t&&e&&(m("murottalActive",e.murottal_active),m("tarhimActive",e.tarhim_active),m("iqomahCountdownDuration",e.iqomah_countdown_duration),m("murottalPreAdhanDuration",e.murottal_pre_adhan_duration||10),m("tarhimPreAdhanDuration",e.tarhim_pre_adhan_duration||300),m("murottalAudioUrlFajr",e.murottal_audio_url_fajr),m("murottalAudioUrlDhuhr",e.murottal_audio_url_dhuhr),m("murottalAudioUrlAsr",e.murottal_audio_url_asr),m("murottalAudioUrlMaghrib",e.murottal_audio_url_maghrib),m("murottalAudioUrlIsha",e.murottal_audio_url_isha),m("murottalAudioUrlImsak",e.murottal_audio_url_imsak),m("tarhimAudioUrl",e.tarhim_audio_url),m("khutbahDurationMinutes",e.khutbah_duration_minutes||45),m("isMasterAudioActive",e.is_master_audio_active??!0),m("adhanBeepAudioUrl",e.adhan_beep_audio_url),m("iqomahBeepAudioUrl",e.iqomah_beep_audio_url),m("imsakBeepAudioUrl",e.imsak_beep_audio_url))},[e,t,m,M]);const w=async y=>{const S=y.file[0],L=S.name.split(".").pop(),X=`audio/${`${za()}.${L}`}`,H=A.loading("Mengunggah audio: 0%");try{const{data:z,error:re}=await O.storage.from("audio").upload(X,S,{cacheControl:"3600",upsert:!1,onUploadProgress:J=>{const R=Math.round(J.loaded*100/J.total);A.loading(`Mengunggah audio: ${R}%`,{id:H})}});if(re)throw re;const{data:de}=O.storage.from("audio").getPublicUrl(X);if(de!=null&&de.publicUrl){const{error:J}=await O.from("media_files").insert({title:y.title||S.name,file_path:X,file_type:"audio",source_type:"upload",display_order:0});if(J)throw await O.storage.from("audio").remove([X]),J;A.loading("Mengunggah audio: 100%",{id:H}),A.success("Audio berhasil diunggah dan ditambahkan ke daftar!",{id:H}),A.info("Untuk performa terbaik di perangkat rendah, pastikan ukuran file audio dioptimalkan (misal: format MP3, bitrate rendah)."),i(!1),_(),M()}else throw new Error("Gagal mendapatkan URL publik audio.")}catch(z){console.error("Error uploading audio:",z),A.error(`Gagal mengunggah audio: ${z.message}`,{id:H})}},j=async y=>{if(!window.confirm("Apakah Anda yakin ingin menghapus tautan audio ini dari pengaturan? File audio tidak akan dihapus dari penyimpanan."))return;const S=A.loading("Menghapus tautan audio...");try{const L={id:1},q=hp[y];if(!q)throw new Error(`Unknown field name: ${y}`);L[q]=null;const{error:X}=await O.from("app_settings").upsert(L,{onConflict:"id"});if(X)throw X;m(y,null),A.success("Tautan audio berhasil dihapus!",{id:S}),a()}catch(L){console.error("Caught error during audio link removal process:",L),A.error(`Gagal menghapus tautan audio: ${L.message}`,{id:S})}},D=async y=>{const{data:S,error:L}=await O.from("app_settings").upsert({id:1,murottal_active:y.murottalActive,tarhim_active:y.tarhimActive,iqomah_countdown_duration:y.iqomahCountdownDuration,murottal_pre_adhan_duration:y.murottalPreAdhanDuration,tarhim_pre_adhan_duration:y.tarhimPreAdhanDuration,murottal_audio_url_fajr:y.murottalAudioUrlFajr,murottal_audio_url_dhuhr:y.murottalAudioUrlDhuhr,murottal_audio_url_asr:y.murottalAudioUrlAsr,murottal_audio_url_maghrib:y.murottalAudioUrlMaghrib,murottal_audio_url_isha:y.murottalAudioUrlIsha,murottal_audio_url_imsak:y.murottalAudioUrlImsak,tarhim_audio_url:y.tarhimAudioUrl,khutbah_duration_minutes:y.khutbahDurationMinutes,is_master_audio_active:y.isMasterAudioActive,adhan_beep_audio_url:y.adhanBeepAudioUrl,iqomah_beep_audio_url:y.iqomahBeepAudioUrl,imsak_beep_audio_url:y.imsakBeepAudioUrl},{onConflict:"id"});L?(console.error("Error saving audio settings:",L),A.error("Gagal menyimpan pengaturan audio.")):(A.success("Pengaturan audio berhasil disimpan!"),console.log("Audio settings saved:",S),a())};return s.jsxs(Xe,{className:"bg-gray-800 text-white border-gray-700",children:[s.jsx(Qe,{children:s.jsx(et,{className:"text-2xl font-semibold text-blue-300",children:"Pengaturan Audio & Iqomah"})}),s.jsxs(tt,{children:[s.jsx("p",{className:"text-gray-400 mb-4",children:"Atur status audio, durasi hitung mundur Iqomah, dan audio murottal per waktu sholat."}),s.jsxs(ee,{onClick:()=>i(!0),className:"w-full bg-blue-600 hover:bg-blue-700 text-white mb-4",children:[s.jsx(yo,{className:"mr-2 h-4 w-4"})," Unggah Audio Baru"]}),s.jsxs("form",{onSubmit:u(D),className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between space-x-2 border-b border-gray-700 pb-6 mb-6",children:[s.jsx(Z,{htmlFor:"master-audio-active",className:"text-gray-300 text-lg font-bold",children:"Aktifkan Semua Audio (Master Switch)"}),s.jsx(Pa,{id:"master-audio-active",checked:l.watch("isMasterAudioActive"),onCheckedChange:y=>m("isMasterAudioActive",y),className:"data-[state=checked]:bg-purple-600 data-[state=unchecked]:bg-gray-600"})]}),s.jsxs("div",{className:"flex items-center justify-between space-x-2",children:[s.jsx(Z,{htmlFor:"murottal-active",className:"text-gray-300 text-lg",children:"Aktifkan Murottal Otomatis"}),s.jsx(Pa,{id:"murottal-active",checked:l.watch("murottalActive"),onCheckedChange:y=>m("murottalActive",y),className:"data-[state=checked]:bg-green-600 data-[state=unchecked]:bg-gray-600"})]}),s.jsxs("div",{className:"flex items-center justify-between space-x-2",children:[s.jsx(Z,{htmlFor:"tarhim-active",className:"text-gray-300 text-lg",children:"Aktifkan Tarhim"}),s.jsx(Pa,{id:"tarhim-active",checked:l.watch("tarhimActive"),onCheckedChange:y=>m("tarhimActive",y),className:"data-[state=checked]:bg-green-600 data-[state=unchecked]:bg-gray-600"})]}),s.jsxs("div",{children:[s.jsx(Z,{htmlFor:"iqomahCountdownDuration",className:"text-gray-300",children:"Durasi Hitung Mundur Iqomah (detik)"}),s.jsx(le,{id:"iqomahCountdownDuration",type:"number",...f("iqomahCountdownDuration"),className:"bg-gray-700 border-gray-600 text-white mt-1",placeholder:"Contoh: 300 (untuk 5 menit)"}),v.iqomahCountdownDuration&&s.jsx("p",{className:"text-red-400 text-sm mt-1",children:v.iqomahCountdownDuration.message})]}),s.jsxs("div",{className:"border-t border-gray-700 pt-6",children:[s.jsx("h3",{className:"text-xl font-semibold text-blue-300 mb-4",children:"Pengaturan Murottal Otomatis"}),s.jsxs("div",{children:[s.jsx(Z,{htmlFor:"murottalPreAdhanDuration",className:"text-gray-300",children:"Putar Murottal Sebelum Adzan (menit)"}),s.jsx(le,{id:"murottalPreAdhanDuration",type:"number",...f("murottalPreAdhanDuration"),className:"bg-gray-700 border-gray-600 text-white mt-1",placeholder:"Contoh: 10 (untuk 10 menit sebelum adzan)"}),v.murottalPreAdhanDuration&&s.jsx("p",{className:"text-red-400 text-sm mt-1",children:v.murottalPreAdhanDuration.message})]}),s.jsxs("div",{className:"space-y-4 mt-4",children:[mp.map(y=>s.jsxs("div",{children:[s.jsx(Z,{htmlFor:y.name,className:"text-gray-300",children:y.label}),s.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[s.jsxs(ut,{onValueChange:S=>m(y.name,S==="null"?null:S),value:l.watch(y.name)||"null",children:[s.jsx(nt,{className:"w-full bg-gray-700 border-gray-600 text-white",children:s.jsx(ft,{placeholder:"Pilih Audio Murottal"})}),s.jsxs(st,{className:"bg-gray-700 text-white border-gray-600",children:[s.jsx(Re,{value:"null",children:"Tidak Ada"}),r.map(S=>{var L;return s.jsx(Re,{value:((L=O.storage.from("audio").getPublicUrl(S.file_path).data)==null?void 0:L.publicUrl)||"",children:S.title||S.file_path.split("/").pop()},S.id)})]})]}),l.watch(y.name)&&s.jsx(ee,{variant:"destructive",size:"sm",onClick:()=>j(y.name),className:"bg-red-600 hover:bg-red-700 text-white",children:"Hapus"})]}),l.watch(y.name)&&s.jsx("div",{className:"mt-2",children:s.jsx("audio",{controls:!0,src:l.watch(y.name),className:"w-full max-w-xs"})}),v[y.name]&&s.jsx("p",{className:"text-red-400 text-sm mt-1",children:v[y.name].message})]},y.name)),s.jsxs("div",{children:[s.jsx(Z,{htmlFor:"tarhimAudioUrl",className:"text-gray-300",children:"Audio Tarhim (Opsional)"}),s.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[s.jsxs(ut,{onValueChange:y=>m("tarhimAudioUrl",y==="null"?null:y),value:l.watch("tarhimAudioUrl")||"null",children:[s.jsx(nt,{className:"w-full bg-gray-700 border-gray-600 text-white",children:s.jsx(ft,{placeholder:"Pilih Audio Tarhim"})}),s.jsxs(st,{className:"bg-gray-700 text-white border-gray-600",children:[s.jsx(Re,{value:"null",children:"Tidak Ada"}),r.map(y=>{var S;return s.jsx(Re,{value:((S=O.storage.from("audio").getPublicUrl(y.file_path).data)==null?void 0:S.publicUrl)||"",children:y.title||y.file_path.split("/").pop()},y.id)})]})]}),l.watch("tarhimAudioUrl")&&s.jsx(ee,{variant:"destructive",size:"sm",onClick:()=>j("tarhimAudioUrl"),className:"bg-red-600 hover:bg-red-700 text-white",children:"Hapus"})]}),l.watch("tarhimAudioUrl")&&s.jsx("div",{className:"mt-2",children:s.jsx("audio",{controls:!0,src:l.watch("tarhimAudioUrl"),className:"w-full max-w-xs"})}),v.tarhimAudioUrl&&s.jsx("p",{className:"text-red-400 text-sm mt-1",children:v.tarhimAudioUrl.message})]})]})]}),s.jsxs("div",{className:"border-t border-gray-700 pt-6",children:[s.jsx("h3",{className:"text-xl font-semibold text-blue-300 mb-4",children:"Pengaturan Tarhim"}),s.jsxs("div",{children:[s.jsx(Z,{htmlFor:"tarhimPreAdhanDuration",className:"text-gray-300",children:"Putar Tarhim Sebelum Adzan (detik)"}),s.jsx(le,{id:"tarhimPreAdhanDuration",type:"number",...f("tarhimPreAdhanDuration"),className:"bg-gray-700 border-gray-600 text-white mt-1",placeholder:"Contoh: 314 (untuk 5 menit 14 detik)"}),v.tarhimPreAdhanDuration&&s.jsx("p",{className:"text-red-400 text-sm mt-1",children:v.tarhimPreAdhanDuration.message})]})]}),s.jsxs("div",{className:"border-t border-gray-700 pt-6",children:[s.jsx("h3",{className:"text-xl font-semibold text-blue-300 mb-4",children:"Pengaturan Khutbah Jumat"}),s.jsxs("div",{children:[s.jsx(Z,{htmlFor:"khutbahDurationMinutes",className:"text-gray-300",children:"Durasi Khutbah Jumat (menit)"}),s.jsx(le,{id:"khutbahDurationMinutes",type:"number",...f("khutbahDurationMinutes"),className:"bg-gray-700 border-gray-600 text-white mt-1",placeholder:"Contoh: 45"}),v.khutbahDurationMinutes&&s.jsx("p",{className:"text-red-400 text-sm mt-1",children:v.khutbahDurationMinutes.message})]})]}),s.jsxs("div",{className:"border-t border-gray-700 pt-6",children:[s.jsx("h3",{className:"text-xl font-semibold text-blue-300 mb-4",children:"Pengaturan Audio Beep"}),s.jsxs("div",{children:[s.jsx(Z,{htmlFor:"imsakBeepAudioUrl",className:"text-gray-300",children:"Audio Beep Imsak (Opsional)"}),s.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[s.jsxs(ut,{onValueChange:y=>m("imsakBeepAudioUrl",y==="null"?null:y),value:l.watch("imsakBeepAudioUrl")||"null",children:[s.jsx(nt,{className:"w-full bg-gray-700 border-gray-600 text-white",children:s.jsx(ft,{placeholder:"Pilih Audio Beep Imsak"})}),s.jsxs(st,{className:"bg-gray-700 text-white border-gray-600",children:[s.jsx(Re,{value:"null",children:"Tidak Ada"}),r.map(y=>{var S;return s.jsx(Re,{value:((S=O.storage.from("audio").getPublicUrl(y.file_path).data)==null?void 0:S.publicUrl)||"",children:y.title||y.file_path.split("/").pop()},y.id)})]})]}),l.watch("imsakBeepAudioUrl")&&s.jsx(ee,{variant:"destructive",size:"sm",onClick:()=>j("imsakBeepAudioUrl"),className:"bg-red-600 hover:bg-red-700 text-white",children:"Hapus"})]}),l.watch("imsakBeepAudioUrl")&&s.jsx("div",{className:"mt-2",children:s.jsx("audio",{controls:!0,src:l.watch("imsakBeepAudioUrl"),className:"w-full max-w-xs"})}),v.imsakBeepAudioUrl&&s.jsx("p",{className:"text-red-400 text-sm mt-1",children:v.imsakBeepAudioUrl.message})]}),s.jsxs("div",{className:"mt-4",children:[s.jsx(Z,{htmlFor:"adhanBeepAudioUrl",className:"text-gray-300",children:"Audio Beep Adzan (Opsional)"}),s.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[s.jsxs(ut,{onValueChange:y=>m("adhanBeepAudioUrl",y==="null"?null:y),value:l.watch("adhanBeepAudioUrl")||"null",children:[s.jsx(nt,{className:"w-full bg-gray-700 border-gray-600 text-white",children:s.jsx(ft,{placeholder:"Pilih Audio Beep Adzan"})}),s.jsxs(st,{className:"bg-gray-700 text-white border-gray-600",children:[s.jsx(Re,{value:"null",children:"Tidak Ada"}),r.map(y=>{var S;return s.jsx(Re,{value:((S=O.storage.from("audio").getPublicUrl(y.file_path).data)==null?void 0:S.publicUrl)||"",children:y.title||y.file_path.split("/").pop()},y.id)})]})]}),l.watch("adhanBeepAudioUrl")&&s.jsx(ee,{variant:"destructive",size:"sm",onClick:()=>j("adhanBeepAudioUrl"),className:"bg-red-600 hover:bg-red-700 text-white",children:"Hapus"})]}),l.watch("adhanBeepAudioUrl")&&s.jsx("div",{className:"mt-2",children:s.jsx("audio",{controls:!0,src:l.watch("adhanBeepAudioUrl"),className:"w-full max-w-xs"})}),v.adhanBeepAudioUrl&&s.jsx("p",{className:"text-red-400 text-sm mt-1",children:v.adhanBeepAudioUrl.message})]}),s.jsxs("div",{className:"mt-4",children:[s.jsx(Z,{htmlFor:"iqomahBeepAudioUrl",className:"text-gray-300",children:"Audio Beep Iqomah (Opsional)"}),s.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[s.jsxs(ut,{onValueChange:y=>m("iqomahBeepAudioUrl",y==="null"?null:y),value:l.watch("iqomahBeepAudioUrl")||"null",children:[s.jsx(nt,{className:"w-full bg-gray-700 border-gray-600 text-white",children:s.jsx(ft,{placeholder:"Pilih Audio Beep Iqomah"})}),s.jsxs(st,{className:"bg-gray-700 text-white border-gray-600",children:[s.jsx(Re,{value:"null",children:"Tidak Ada"}),r.map(y=>{var S;return s.jsx(Re,{value:((S=O.storage.from("audio").getPublicUrl(y.file_path).data)==null?void 0:S.publicUrl)||"",children:y.title||y.file_path.split("/").pop()},y.id)})]})]}),l.watch("iqomahBeepAudioUrl")&&s.jsx(ee,{variant:"destructive",size:"sm",onClick:()=>j("iqomahBeepAudioUrl"),className:"bg-red-600 hover:bg-red-700 text-white",children:"Hapus"})]}),l.watch("iqomahBeepAudioUrl")&&s.jsx("div",{className:"mt-2",children:s.jsx("audio",{controls:!0,src:l.watch("iqomahBeepAudioUrl"),className:"w-full max-w-xs"})}),v.iqomahBeepAudioUrl&&s.jsx("p",{className:"text-red-400 text-sm mt-1",children:v.iqomahBeepAudioUrl.message})]})]}),s.jsx(ee,{type:"submit",disabled:p,className:"w-full bg-blue-600 hover:bg-blue-700 text-white",children:p?"Menyimpan...":"Simpan Pengaturan"})]}),s.jsx(Bt,{open:o,onOpenChange:i,children:s.jsxs(Tt,{className:"bg-gray-800 text-white border-gray-700",children:[s.jsxs(It,{children:[s.jsx(Rt,{className:"text-blue-300",children:"Unggah Audio Baru"}),s.jsx($t,{children:"Unggah file audio baru untuk digunakan dalam pengaturan murottal, tarhim, atau beep."})]}),s.jsxs("form",{onSubmit:b(w),className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Z,{htmlFor:"uploadAudioTitle",className:"text-gray-300",children:"Judul Audio (Opsional)"}),s.jsx(le,{id:"uploadAudioTitle",...h("title"),className:"bg-gray-700 border-gray-600 text-white mt-1",placeholder:"Contoh: Murottal Al-Fatihah"}),x.title&&s.jsx("p",{className:"text-red-400 text-sm mt-1",children:x.title.message})]}),s.jsxs("div",{children:[s.jsx(Z,{htmlFor:"uploadAudioFile",className:"text-gray-300",children:"Pilih File Audio"}),s.jsx(le,{id:"uploadAudioFile",type:"file",accept:"audio/*",...h("file"),className:"bg-gray-700 border-gray-600 text-white mt-1 file:text-white file:bg-blue-600 file:hover:bg-blue-700 file:border-none file:rounded-md file:px-3 file:py-1"}),x.file&&s.jsx("p",{className:"text-red-400 text-sm mt-1",children:x.file.message})]}),s.jsxs(Pt,{children:[s.jsx(ee,{type:"button",variant:"outline",onClick:()=>i(!1),className:"text-gray-300 border-gray-600 hover:bg-gray-700",children:"Batal"}),s.jsx(ee,{type:"submit",disabled:k,className:"bg-blue-600 hover:bg-blue-700 text-white",children:k?"Mengunggah...":"Unggah Audio"})]})]})]})})]})]})},gp=at({id:oe().optional(),name:oe().min(1,"Nama hari besar tidak boleh kosong.").max(100,"Nama terlalu panjang."),holiday_date:oe().min(1,"Tanggal hari besar tidak boleh kosong."),display_order:Pe.number().int().min(0,"Urutan tampilan harus non-negatif.").default(0)}),vp=()=>{const[e,t]=d.useState([]),[a,r]=d.useState(!1),[n,o]=d.useState(null),[i,l]=d.useState(!1),c=qe({resolver:Je(gp),defaultValues:{name:"",holiday_date:"",display_order:0}}),{handleSubmit:u,register:f,setValue:m,watch:p,reset:v,formState:{isSubmitting:b,errors:h}}=c,_=p("holiday_date"),k=d.useCallback(async()=>{const{data:y,error:S}=await O.from("islamic_holidays").select("*").order("holiday_date",{ascending:!0}).order("display_order",{ascending:!0});S?(console.error("Error fetching Islamic holidays:",S),A.error("Gagal memuat hari besar Islam.")):t(y||[])},[]);d.useEffect(()=>{k();const y=O.channel("islamic_holidays_changes").on("postgres_changes",{event:"*",schema:"public",table:"islamic_holidays"},S=>{console.log("Islamic holiday change received!",S),k()}).subscribe();return console.log("IslamicHolidaySettings: Subscribed to channel 'islamic_holidays_changes'."),()=>{O.removeChannel(y),console.log("IslamicHolidaySettings: Unsubscribed from channel 'islamic_holidays_changes'.")}},[k]);const x=()=>{o(null),v({name:"",holiday_date:"",display_order:0}),r(!0)},M=y=>{o(y),v({id:y.id,name:y.name,holiday_date:y.holiday_date,display_order:y.display_order}),r(!0)},w=async y=>{if(!window.confirm("Apakah Anda yakin ingin menghapus hari besar ini?"))return;const{error:S}=await O.from("islamic_holidays").delete().eq("id",y);S?(console.error("Error deleting holiday:",S),A.error("Gagal menghapus hari besar.")):(A.success("Hari besar berhasil dihapus!"),k())},j=async y=>{const S={name:y.name,holiday_date:y.holiday_date,display_order:y.display_order};if(n){const{error:L}=await O.from("islamic_holidays").update(S).eq("id",n.id);L?(console.error("Error updating holiday:",L),A.error("Gagal memperbarui hari besar.")):(A.success("Hari besar berhasil diperbarui!"),r(!1),k())}else{const{error:L}=await O.from("islamic_holidays").insert(S);L?(console.error("Error adding holiday:",L),A.error("Gagal menambahkan hari besar.")):(A.success("Hari besar berhasil ditambahkan!"),r(!1),k())}},D=async()=>{const y=new Date().getFullYear(),S=prompt(`Masukkan tahun untuk sinkronisasi hari besar (misal: ${y}):`,y.toString());if(!S||isNaN(Number(S))){A.info("Sinkronisasi dibatalkan atau tahun tidak valid.");return}l(!0);const L=A.loading(`Menyinkronkan hari besar untuk tahun ${yearToYear}...`);try{const{data:q,error:X}=await O.functions.invoke("fetch-holidays",{body:{year:Number(S),country:"ID"}});if(X)throw X;A.success(`Berhasil menyinkronkan ${q.count} hari besar untuk tahun ${S}!`,{id:L}),k()}catch(q){console.error("Error syncing holidays:",q),A.error(`Gagal menyinkronkan hari besar: ${q.message||"Terjadi kesalahan."}`,{id:L})}finally{l(!1)}};return s.jsxs(Xe,{className:"bg-gray-800 text-white border-gray-700 col-span-full lg:col-span-2",children:[s.jsx(Qe,{children:s.jsx(et,{className:"text-2xl font-semibold text-blue-300",children:"Pengaturan Hari Besar Islam"})}),s.jsxs(tt,{children:[s.jsx("p",{className:"text-gray-400 mb-4",children:"Kelola daftar hari besar Islam yang akan ditampilkan dengan hitung mundur."}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 mb-4",children:[s.jsxs(ee,{onClick:x,className:"flex-1 bg-green-600 hover:bg-green-700 text-white",children:[s.jsx($a,{className:"mr-2 h-4 w-4"})," Tambah Hari Besar Manual"]}),s.jsxs(ee,{onClick:D,disabled:i,className:"flex-1 bg-purple-600 hover:bg-purple-700 text-white",children:[s.jsx(qc,{className:"mr-2 h-4 w-4"})," ",i?"Menyinkronkan...":"Sinkronkan dari Online"]})]}),s.jsx("div",{className:"space-y-3",children:e.length===0?s.jsx("p",{className:"text-gray-400 text-center",children:"Belum ada hari besar Islam yang tercatat."}):e.map(y=>s.jsxs("div",{className:"flex items-center justify-between bg-gray-700 p-3 rounded-md shadow-sm",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-lg text-blue-200",children:y.name}),s.jsxs("p",{className:"text-sm text-gray-300",children:["Tanggal: ",Ge(new Date(y.holiday_date),"dd MMMM yyyy",{locale:vn})]}),s.jsxs("p",{className:"text-xs text-gray-400",children:["Urutan: ",y.display_order]})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx(ee,{variant:"outline",size:"icon",onClick:()=>M(y),className:"text-blue-400 border-blue-400 hover:bg-blue-400 hover:text-white",children:s.jsx(ba,{className:"h-4 w-4"})}),s.jsx(ee,{variant:"outline",size:"icon",onClick:()=>w(y.id),className:"text-red-400 border-red-400 hover:bg-red-400 hover:text-white",children:s.jsx(_a,{className:"h-4 w-4"})})]})]},y.id))}),s.jsx(Bt,{open:a,onOpenChange:r,children:s.jsxs(Tt,{className:"bg-gray-800 text-white border-gray-700",children:[s.jsxs(It,{children:[s.jsx(Rt,{className:"text-blue-300",children:n?"Edit Hari Besar Islam":"Tambah Hari Besar Islam Baru"}),s.jsx($t,{children:n?"Perbarui detail hari besar Islam ini.":"Isi detail untuk hari besar Islam baru."})]}),s.jsxs("form",{onSubmit:u(j),className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Z,{htmlFor:"name",className:"text-gray-300",children:"Nama Hari Besar"}),s.jsx(le,{id:"name",...f("name"),className:"bg-gray-700 border-gray-600 text-white mt-1",placeholder:"Contoh: Idul Fitri 1445 H"}),h.name&&s.jsx("p",{className:"text-red-400 text-sm mt-1",children:h.name.message})]}),s.jsxs("div",{children:[s.jsx(Z,{htmlFor:"holiday_date",className:"text-gray-300 block mb-1",children:"Tanggal Hari Besar"}),s.jsxs(cl,{children:[s.jsx(dl,{asChild:!0,children:s.jsxs(ee,{variant:"outline",className:ce("w-full justify-start text-left font-normal bg-gray-700 border-gray-600 text-white",!_&&"text-muted-foreground"),children:[s.jsx(ho,{className:"mr-2 h-4 w-4"}),_?Ge(new Date(_),"PPP",{locale:vn}):s.jsx("span",{children:"Pilih tanggal"})]})}),s.jsx(ss,{className:"w-auto p-0 bg-gray-700 border-gray-600 text-white",children:s.jsx(ms,{mode:"single",selected:_?new Date(_):void 0,onSelect:y=>m("holiday_date",y?Ge(y,"yyyy-MM-dd"):""),initialFocus:!0})})]}),h.holiday_date&&s.jsx("p",{className:"text-red-400 text-sm mt-1",children:h.holiday_date.message})]}),s.jsxs("div",{children:[s.jsx(Z,{htmlFor:"display_order",className:"text-gray-300",children:"Urutan Tampilan"}),s.jsx(le,{id:"display_order",type:"number",...f("display_order"),className:"bg-gray-700 border-gray-600 text-white mt-1"}),h.display_order&&s.jsx("p",{className:"text-red-400 text-sm mt-1",children:h.display_order.message})]}),s.jsxs(Pt,{children:[s.jsx(ee,{type:"button",variant:"outline",onClick:()=>r(!1),className:"text-gray-300 border-gray-600 hover:bg-gray-700",children:"Batal"}),s.jsx(ee,{type:"submit",disabled:b,className:"bg-blue-600 hover:bg-blue-700 text-white",children:b?"Menyimpan...":n?"Simpan Perubahan":"Tambah Hari Besar"})]})]})]})})]})]})};var pn="rovingFocusGroup.onEntryFocus",yp={bubbles:!1,cancelable:!0},Hr="RovingFocusGroup",[Pn,Sl,xp]=Ln(Hr),[bp,Cl]=ea(Hr,[xp]),[_p,wp]=bp(Hr),Ml=d.forwardRef((e,t)=>s.jsx(Pn.Provider,{scope:e.__scopeRovingFocusGroup,children:s.jsx(Pn.Slot,{scope:e.__scopeRovingFocusGroup,children:s.jsx(jp,{...e,ref:t})})}));Ml.displayName=Hr;var jp=d.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:a,orientation:r,loop:n=!1,dir:o,currentTabStopId:i,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:f=!1,...m}=e,p=d.useRef(null),v=Ne(t,p),b=Fn(o),[h=null,_]=Zt({prop:i,defaultProp:l,onChange:c}),[k,x]=d.useState(!1),M=ma(u),w=Sl(a),j=d.useRef(!1),[D,y]=d.useState(0);return d.useEffect(()=>{const S=p.current;if(S)return S.addEventListener(pn,M),()=>S.removeEventListener(pn,M)},[M]),s.jsx(_p,{scope:a,orientation:r,dir:b,loop:n,currentTabStopId:h,onItemFocus:d.useCallback(S=>_(S),[_]),onItemShiftTab:d.useCallback(()=>x(!0),[]),onFocusableItemAdd:d.useCallback(()=>y(S=>S+1),[]),onFocusableItemRemove:d.useCallback(()=>y(S=>S-1),[]),children:s.jsx(xe.div,{tabIndex:k||D===0?-1:0,"data-orientation":r,...m,ref:v,style:{outline:"none",...e.style},onMouseDown:Y(e.onMouseDown,()=>{j.current=!0}),onFocus:Y(e.onFocus,S=>{const L=!j.current;if(S.target===S.currentTarget&&L&&!k){const q=new CustomEvent(pn,yp);if(S.currentTarget.dispatchEvent(q),!q.defaultPrevented){const X=w().filter(J=>J.focusable),H=X.find(J=>J.active),z=X.find(J=>J.id===h),de=[H,z,...X].filter(Boolean).map(J=>J.ref.current);El(de,f)}}j.current=!1}),onBlur:Y(e.onBlur,()=>x(!1))})})}),Al="RovingFocusGroupItem",Dl=d.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:a,focusable:r=!0,active:n=!1,tabStopId:o,...i}=e,l=_t(),c=o||l,u=wp(Al,a),f=u.currentTabStopId===c,m=Sl(a),{onFocusableItemAdd:p,onFocusableItemRemove:v}=u;return d.useEffect(()=>{if(r)return p(),()=>v()},[r,p,v]),s.jsx(Pn.ItemSlot,{scope:a,id:c,focusable:r,active:n,children:s.jsx(xe.span,{tabIndex:f?0:-1,"data-orientation":u.orientation,...i,ref:t,onMouseDown:Y(e.onMouseDown,b=>{r?u.onItemFocus(c):b.preventDefault()}),onFocus:Y(e.onFocus,()=>u.onItemFocus(c)),onKeyDown:Y(e.onKeyDown,b=>{if(b.key==="Tab"&&b.shiftKey){u.onItemShiftTab();return}if(b.target!==b.currentTarget)return;const h=Sp(b,u.orientation,u.dir);if(h!==void 0){if(b.metaKey||b.ctrlKey||b.altKey||b.shiftKey)return;b.preventDefault();let k=m().filter(x=>x.focusable).map(x=>x.ref.current);if(h==="last")k.reverse();else if(h==="prev"||h==="next"){h==="prev"&&k.reverse();const x=k.indexOf(b.currentTarget);k=u.loop?Cp(k,x+1):k.slice(x+1)}setTimeout(()=>El(k))}})})})});Dl.displayName=Al;var Np={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function kp(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function Sp(e,t,a){const r=kp(e.key,a);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return Np[r]}function El(e,t=!1){const a=document.activeElement;for(const r of e)if(r===a||(r.focus({preventScroll:t}),document.activeElement!==a))return}function Cp(e,t){return e.map((a,r)=>e[(t+r)%e.length])}var Mp=Ml,Ap=Dl,Rn=["Enter"," "],Dp=["ArrowDown","PageUp","Home"],Tl=["ArrowUp","PageDown","End"],Ep=[...Dp,...Tl],Tp={ltr:[...Rn,"ArrowRight"],rtl:[...Rn,"ArrowLeft"]},Ip={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Xa="Menu",[Va,Pp,Rp]=Ln(Xa),[ta,Il]=ea(Xa,[Rp,xa,Cl]),Zr=xa(),Pl=Cl(),[Op,aa]=ta(Xa),[Fp,Qa]=ta(Xa),Rl=e=>{const{__scopeMenu:t,open:a=!1,children:r,dir:n,onOpenChange:o,modal:i=!0}=e,l=Zr(t),[c,u]=d.useState(null),f=d.useRef(!1),m=ma(o),p=Fn(n);return d.useEffect(()=>{const v=()=>{f.current=!0,document.addEventListener("pointerdown",b,{capture:!0,once:!0}),document.addEventListener("pointermove",b,{capture:!0,once:!0})},b=()=>f.current=!1;return document.addEventListener("keydown",v,{capture:!0}),()=>{document.removeEventListener("keydown",v,{capture:!0}),document.removeEventListener("pointerdown",b,{capture:!0}),document.removeEventListener("pointermove",b,{capture:!0})}},[]),s.jsx(Un,{...l,children:s.jsx(Op,{scope:t,open:a,onOpenChange:m,content:c,onContentChange:u,children:s.jsx(Fp,{scope:t,onClose:d.useCallback(()=>m(!1),[m]),isUsingKeyboardRef:f,dir:p,modal:i,children:r})})})};Rl.displayName=Xa;var Up="MenuAnchor",ps=d.forwardRef((e,t)=>{const{__scopeMenu:a,...r}=e,n=Zr(a);return s.jsx(Tr,{...n,...r,ref:t})});ps.displayName=Up;var gs="MenuPortal",[Lp,Ol]=ta(gs,{forceMount:void 0}),Fl=e=>{const{__scopeMenu:t,forceMount:a,children:r,container:n}=e,o=aa(gs,t);return s.jsx(Lp,{scope:t,forceMount:a,children:s.jsx(Ot,{present:a||o.open,children:s.jsx(Ir,{asChild:!0,container:n,children:r})})})};Fl.displayName=gs;var it="MenuContent",[Vp,vs]=ta(it),Ul=d.forwardRef((e,t)=>{const a=Ol(it,e.__scopeMenu),{forceMount:r=a.forceMount,...n}=e,o=aa(it,e.__scopeMenu),i=Qa(it,e.__scopeMenu);return s.jsx(Va.Provider,{scope:e.__scopeMenu,children:s.jsx(Ot,{present:r||o.open,children:s.jsx(Va.Slot,{scope:e.__scopeMenu,children:i.modal?s.jsx(Bp,{...n,ref:t}):s.jsx($p,{...n,ref:t})})})})}),Bp=d.forwardRef((e,t)=>{const a=aa(it,e.__scopeMenu),r=d.useRef(null),n=Ne(t,r);return d.useEffect(()=>{const o=r.current;if(o)return Vr(o)},[]),s.jsx(ys,{...e,ref:n,trapFocus:a.open,disableOutsidePointerEvents:a.open,disableOutsideScroll:!0,onFocusOutside:Y(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>a.onOpenChange(!1)})}),$p=d.forwardRef((e,t)=>{const a=aa(it,e.__scopeMenu);return s.jsx(ys,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>a.onOpenChange(!1)})}),Wp=Pr("MenuContent.ScrollLock"),ys=d.forwardRef((e,t)=>{const{__scopeMenu:a,loop:r=!1,trapFocus:n,onOpenAutoFocus:o,onCloseAutoFocus:i,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:f,onFocusOutside:m,onInteractOutside:p,onDismiss:v,disableOutsideScroll:b,...h}=e,_=aa(it,a),k=Qa(it,a),x=Zr(a),M=Pl(a),w=Pp(a),[j,D]=d.useState(null),y=d.useRef(null),S=Ne(t,y,_.onContentChange),L=d.useRef(0),q=d.useRef(""),X=d.useRef(0),H=d.useRef(null),z=d.useRef("right"),re=d.useRef(0),de=b?Ha:d.Fragment,J=b?{as:Wp,allowPinchZoom:!0}:void 0,R=$=>{var Q,_e;const P=q.current+$,se=w().filter(ye=>!ye.disabled),me=document.activeElement,Te=(Q=se.find(ye=>ye.ref.current===me))==null?void 0:Q.textValue,Ce=se.map(ye=>ye.textValue),Ae=tg(Ce,P,Te),be=(_e=se.find(ye=>ye.textValue===Ae))==null?void 0:_e.ref.current;(function ye(pe){q.current=pe,window.clearTimeout(L.current),pe!==""&&(L.current=window.setTimeout(()=>ye(""),1e3))})(P),be&&setTimeout(()=>be.focus())};d.useEffect(()=>()=>window.clearTimeout(L.current),[]),Lr();const I=d.useCallback($=>{var se,me;return z.current===((se=H.current)==null?void 0:se.side)&&rg($,(me=H.current)==null?void 0:me.area)},[]);return s.jsx(Vp,{scope:a,searchRef:q,onItemEnter:d.useCallback($=>{I($)&&$.preventDefault()},[I]),onItemLeave:d.useCallback($=>{var P;I($)||((P=y.current)==null||P.focus(),D(null))},[I]),onTriggerLeave:d.useCallback($=>{I($)&&$.preventDefault()},[I]),pointerGraceTimerRef:X,onPointerGraceIntentChange:d.useCallback($=>{H.current=$},[]),children:s.jsx(de,{...J,children:s.jsx(Ga,{asChild:!0,trapped:n,onMountAutoFocus:Y(o,$=>{var P;$.preventDefault(),(P=y.current)==null||P.focus({preventScroll:!0})}),onUnmountAutoFocus:i,children:s.jsx(Rr,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:f,onFocusOutside:m,onInteractOutside:p,onDismiss:v,children:s.jsx(Mp,{asChild:!0,...M,dir:k.dir,orientation:"vertical",loop:r,currentTabStopId:j,onCurrentTabStopIdChange:D,onEntryFocus:Y(c,$=>{k.isUsingKeyboardRef.current||$.preventDefault()}),preventScrollOnEntryFocus:!0,children:s.jsx(Vn,{role:"menu","aria-orientation":"vertical","data-state":ec(_.open),"data-radix-menu-content":"",dir:k.dir,...x,...h,ref:S,style:{outline:"none",...h.style},onKeyDown:Y(h.onKeyDown,$=>{const se=$.target.closest("[data-radix-menu-content]")===$.currentTarget,me=$.ctrlKey||$.altKey||$.metaKey,Te=$.key.length===1;se&&($.key==="Tab"&&$.preventDefault(),!me&&Te&&R($.key));const Ce=y.current;if($.target!==Ce||!Ep.includes($.key))return;$.preventDefault();const be=w().filter(Q=>!Q.disabled).map(Q=>Q.ref.current);Tl.includes($.key)&&be.reverse(),Qp(be)}),onBlur:Y(e.onBlur,$=>{$.currentTarget.contains($.target)||(window.clearTimeout(L.current),q.current="")}),onPointerMove:Y(e.onPointerMove,Ba($=>{const P=$.target,se=re.current!==$.clientX;if($.currentTarget.contains(P)&&se){const me=$.clientX>re.current?"right":"left";z.current=me,re.current=$.clientX}}))})})})})})})});Ul.displayName=it;var zp="MenuGroup",xs=d.forwardRef((e,t)=>{const{__scopeMenu:a,...r}=e;return s.jsx(xe.div,{role:"group",...r,ref:t})});xs.displayName=zp;var Gp="MenuLabel",Ll=d.forwardRef((e,t)=>{const{__scopeMenu:a,...r}=e;return s.jsx(xe.div,{...r,ref:t})});Ll.displayName=Gp;var Dr="MenuItem",co="menu.itemSelect",Kr=d.forwardRef((e,t)=>{const{disabled:a=!1,onSelect:r,...n}=e,o=d.useRef(null),i=Qa(Dr,e.__scopeMenu),l=vs(Dr,e.__scopeMenu),c=Ne(t,o),u=d.useRef(!1),f=()=>{const m=o.current;if(!a&&m){const p=new CustomEvent(co,{bubbles:!0,cancelable:!0});m.addEventListener(co,v=>r==null?void 0:r(v),{once:!0}),Wc(m,p),p.defaultPrevented?u.current=!1:i.onClose()}};return s.jsx(Vl,{...n,ref:c,disabled:a,onClick:Y(e.onClick,f),onPointerDown:m=>{var p;(p=e.onPointerDown)==null||p.call(e,m),u.current=!0},onPointerUp:Y(e.onPointerUp,m=>{var p;u.current||(p=m.currentTarget)==null||p.click()}),onKeyDown:Y(e.onKeyDown,m=>{const p=l.searchRef.current!=="";a||p&&m.key===" "||Rn.includes(m.key)&&(m.currentTarget.click(),m.preventDefault())})})});Kr.displayName=Dr;var Vl=d.forwardRef((e,t)=>{const{__scopeMenu:a,disabled:r=!1,textValue:n,...o}=e,i=vs(Dr,a),l=Pl(a),c=d.useRef(null),u=Ne(t,c),[f,m]=d.useState(!1),[p,v]=d.useState("");return d.useEffect(()=>{const b=c.current;b&&v((b.textContent??"").trim())},[o.children]),s.jsx(Va.ItemSlot,{scope:a,disabled:r,textValue:n??p,children:s.jsx(Ap,{asChild:!0,...l,focusable:!r,children:s.jsx(xe.div,{role:"menuitem","data-highlighted":f?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...o,ref:u,onPointerMove:Y(e.onPointerMove,Ba(b=>{r?i.onItemLeave(b):(i.onItemEnter(b),b.defaultPrevented||b.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Y(e.onPointerLeave,Ba(b=>i.onItemLeave(b))),onFocus:Y(e.onFocus,()=>m(!0)),onBlur:Y(e.onBlur,()=>m(!1))})})})}),Hp="MenuCheckboxItem",Bl=d.forwardRef((e,t)=>{const{checked:a=!1,onCheckedChange:r,...n}=e;return s.jsx(Hl,{scope:e.__scopeMenu,checked:a,children:s.jsx(Kr,{role:"menuitemcheckbox","aria-checked":Er(a)?"mixed":a,...n,ref:t,"data-state":_s(a),onSelect:Y(n.onSelect,()=>r==null?void 0:r(Er(a)?!0:!a),{checkForDefaultPrevented:!1})})})});Bl.displayName=Hp;var $l="MenuRadioGroup",[Zp,Kp]=ta($l,{value:void 0,onValueChange:()=>{}}),Wl=d.forwardRef((e,t)=>{const{value:a,onValueChange:r,...n}=e,o=ma(r);return s.jsx(Zp,{scope:e.__scopeMenu,value:a,onValueChange:o,children:s.jsx(xs,{...n,ref:t})})});Wl.displayName=$l;var zl="MenuRadioItem",Gl=d.forwardRef((e,t)=>{const{value:a,...r}=e,n=Kp(zl,e.__scopeMenu),o=a===n.value;return s.jsx(Hl,{scope:e.__scopeMenu,checked:o,children:s.jsx(Kr,{role:"menuitemradio","aria-checked":o,...r,ref:t,"data-state":_s(o),onSelect:Y(r.onSelect,()=>{var i;return(i=n.onValueChange)==null?void 0:i.call(n,a)},{checkForDefaultPrevented:!1})})})});Gl.displayName=zl;var bs="MenuItemIndicator",[Hl,Yp]=ta(bs,{checked:!1}),Zl=d.forwardRef((e,t)=>{const{__scopeMenu:a,forceMount:r,...n}=e,o=Yp(bs,a);return s.jsx(Ot,{present:r||Er(o.checked)||o.checked===!0,children:s.jsx(xe.span,{...n,ref:t,"data-state":_s(o.checked)})})});Zl.displayName=bs;var qp="MenuSeparator",Kl=d.forwardRef((e,t)=>{const{__scopeMenu:a,...r}=e;return s.jsx(xe.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});Kl.displayName=qp;var Jp="MenuArrow",Yl=d.forwardRef((e,t)=>{const{__scopeMenu:a,...r}=e,n=Zr(a);return s.jsx(Bn,{...n,...r,ref:t})});Yl.displayName=Jp;var Xp="MenuSub",[nv,ql]=ta(Xp),Da="MenuSubTrigger",Jl=d.forwardRef((e,t)=>{const a=aa(Da,e.__scopeMenu),r=Qa(Da,e.__scopeMenu),n=ql(Da,e.__scopeMenu),o=vs(Da,e.__scopeMenu),i=d.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=o,u={__scopeMenu:e.__scopeMenu},f=d.useCallback(()=>{i.current&&window.clearTimeout(i.current),i.current=null},[]);return d.useEffect(()=>f,[f]),d.useEffect(()=>{const m=l.current;return()=>{window.clearTimeout(m),c(null)}},[l,c]),s.jsx(ps,{asChild:!0,...u,children:s.jsx(Vl,{id:n.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":n.contentId,"data-state":ec(a.open),...e,ref:mo(t,n.onTriggerChange),onClick:m=>{var p;(p=e.onClick)==null||p.call(e,m),!(e.disabled||m.defaultPrevented)&&(m.currentTarget.focus(),a.open||a.onOpenChange(!0))},onPointerMove:Y(e.onPointerMove,Ba(m=>{o.onItemEnter(m),!m.defaultPrevented&&!e.disabled&&!a.open&&!i.current&&(o.onPointerGraceIntentChange(null),i.current=window.setTimeout(()=>{a.onOpenChange(!0),f()},100))})),onPointerLeave:Y(e.onPointerLeave,Ba(m=>{var v,b;f();const p=(v=a.content)==null?void 0:v.getBoundingClientRect();if(p){const h=(b=a.content)==null?void 0:b.dataset.side,_=h==="right",k=_?-5:5,x=p[_?"left":"right"],M=p[_?"right":"left"];o.onPointerGraceIntentChange({area:[{x:m.clientX+k,y:m.clientY},{x,y:p.top},{x:M,y:p.top},{x:M,y:p.bottom},{x,y:p.bottom}],side:h}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.onPointerGraceIntentChange(null),300)}else{if(o.onTriggerLeave(m),m.defaultPrevented)return;o.onPointerGraceIntentChange(null)}})),onKeyDown:Y(e.onKeyDown,m=>{var v;const p=o.searchRef.current!=="";e.disabled||p&&m.key===" "||Tp[r.dir].includes(m.key)&&(a.onOpenChange(!0),(v=a.content)==null||v.focus(),m.preventDefault())})})})});Jl.displayName=Da;var Xl="MenuSubContent",Ql=d.forwardRef((e,t)=>{const a=Ol(it,e.__scopeMenu),{forceMount:r=a.forceMount,...n}=e,o=aa(it,e.__scopeMenu),i=Qa(it,e.__scopeMenu),l=ql(Xl,e.__scopeMenu),c=d.useRef(null),u=Ne(t,c);return s.jsx(Va.Provider,{scope:e.__scopeMenu,children:s.jsx(Ot,{present:r||o.open,children:s.jsx(Va.Slot,{scope:e.__scopeMenu,children:s.jsx(ys,{id:l.contentId,"aria-labelledby":l.triggerId,...n,ref:u,align:"start",side:i.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:f=>{var m;i.isUsingKeyboardRef.current&&((m=c.current)==null||m.focus()),f.preventDefault()},onCloseAutoFocus:f=>f.preventDefault(),onFocusOutside:Y(e.onFocusOutside,f=>{f.target!==l.trigger&&o.onOpenChange(!1)}),onEscapeKeyDown:Y(e.onEscapeKeyDown,f=>{i.onClose(),f.preventDefault()}),onKeyDown:Y(e.onKeyDown,f=>{var v;const m=f.currentTarget.contains(f.target),p=Ip[i.dir].includes(f.key);m&&p&&(o.onOpenChange(!1),(v=l.trigger)==null||v.focus(),f.preventDefault())})})})})})});Ql.displayName=Xl;function ec(e){return e?"open":"closed"}function Er(e){return e==="indeterminate"}function _s(e){return Er(e)?"indeterminate":e?"checked":"unchecked"}function Qp(e){const t=document.activeElement;for(const a of e)if(a===t||(a.focus(),document.activeElement!==t))return}function eg(e,t){return e.map((a,r)=>e[(t+r)%e.length])}function tg(e,t,a){const n=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,o=a?e.indexOf(a):-1;let i=eg(e,Math.max(o,0));n.length===1&&(i=i.filter(u=>u!==a));const c=i.find(u=>u.toLowerCase().startsWith(n.toLowerCase()));return c!==a?c:void 0}function ag(e,t){const{x:a,y:r}=e;let n=!1;for(let o=0,i=t.length-1;o<t.length;i=o++){const l=t[o].x,c=t[o].y,u=t[i].x,f=t[i].y;c>r!=f>r&&a<(u-l)*(r-c)/(f-c)+l&&(n=!n)}return n}function rg(e,t){if(!t)return!1;const a={x:e.clientX,y:e.clientY};return ag(a,t)}function Ba(e){return t=>t.pointerType==="mouse"?e(t):void 0}var ng=Rl,sg=ps,og=Fl,ig=Ul,lg=xs,cg=Ll,dg=Kr,ug=Bl,fg=Wl,mg=Gl,hg=Zl,pg=Kl,gg=Yl,vg=Jl,yg=Ql,ws="DropdownMenu",[xg,sv]=ea(ws,[Il]),We=Il(),[bg,tc]=xg(ws),ac=e=>{const{__scopeDropdownMenu:t,children:a,dir:r,open:n,defaultOpen:o,onOpenChange:i,modal:l=!0}=e,c=We(t),u=d.useRef(null),[f=!1,m]=Zt({prop:n,defaultProp:o,onChange:i});return s.jsx(bg,{scope:t,triggerId:_t(),triggerRef:u,contentId:_t(),open:f,onOpenChange:m,onOpenToggle:d.useCallback(()=>m(p=>!p),[m]),modal:l,children:s.jsx(ng,{...c,open:f,onOpenChange:m,dir:r,modal:l,children:a})})};ac.displayName=ws;var rc="DropdownMenuTrigger",nc=d.forwardRef((e,t)=>{const{__scopeDropdownMenu:a,disabled:r=!1,...n}=e,o=tc(rc,a),i=We(a);return s.jsx(sg,{asChild:!0,...i,children:s.jsx(xe.button,{type:"button",id:o.triggerId,"aria-haspopup":"menu","aria-expanded":o.open,"aria-controls":o.open?o.contentId:void 0,"data-state":o.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...n,ref:mo(t,o.triggerRef),onPointerDown:Y(e.onPointerDown,l=>{!r&&l.button===0&&l.ctrlKey===!1&&(o.onOpenToggle(),o.open||l.preventDefault())}),onKeyDown:Y(e.onKeyDown,l=>{r||(["Enter"," "].includes(l.key)&&o.onOpenToggle(),l.key==="ArrowDown"&&o.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});nc.displayName=rc;var _g="DropdownMenuPortal",sc=e=>{const{__scopeDropdownMenu:t,...a}=e,r=We(t);return s.jsx(og,{...r,...a})};sc.displayName=_g;var oc="DropdownMenuContent",ic=d.forwardRef((e,t)=>{const{__scopeDropdownMenu:a,...r}=e,n=tc(oc,a),o=We(a),i=d.useRef(!1);return s.jsx(ig,{id:n.contentId,"aria-labelledby":n.triggerId,...o,...r,ref:t,onCloseAutoFocus:Y(e.onCloseAutoFocus,l=>{var c;i.current||(c=n.triggerRef.current)==null||c.focus(),i.current=!1,l.preventDefault()}),onInteractOutside:Y(e.onInteractOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,f=c.button===2||u;(!n.modal||f)&&(i.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});ic.displayName=oc;var wg="DropdownMenuGroup",jg=d.forwardRef((e,t)=>{const{__scopeDropdownMenu:a,...r}=e,n=We(a);return s.jsx(lg,{...n,...r,ref:t})});jg.displayName=wg;var Ng="DropdownMenuLabel",lc=d.forwardRef((e,t)=>{const{__scopeDropdownMenu:a,...r}=e,n=We(a);return s.jsx(cg,{...n,...r,ref:t})});lc.displayName=Ng;var kg="DropdownMenuItem",cc=d.forwardRef((e,t)=>{const{__scopeDropdownMenu:a,...r}=e,n=We(a);return s.jsx(dg,{...n,...r,ref:t})});cc.displayName=kg;var Sg="DropdownMenuCheckboxItem",dc=d.forwardRef((e,t)=>{const{__scopeDropdownMenu:a,...r}=e,n=We(a);return s.jsx(ug,{...n,...r,ref:t})});dc.displayName=Sg;var Cg="DropdownMenuRadioGroup",Mg=d.forwardRef((e,t)=>{const{__scopeDropdownMenu:a,...r}=e,n=We(a);return s.jsx(fg,{...n,...r,ref:t})});Mg.displayName=Cg;var Ag="DropdownMenuRadioItem",uc=d.forwardRef((e,t)=>{const{__scopeDropdownMenu:a,...r}=e,n=We(a);return s.jsx(mg,{...n,...r,ref:t})});uc.displayName=Ag;var Dg="DropdownMenuItemIndicator",fc=d.forwardRef((e,t)=>{const{__scopeDropdownMenu:a,...r}=e,n=We(a);return s.jsx(hg,{...n,...r,ref:t})});fc.displayName=Dg;var Eg="DropdownMenuSeparator",mc=d.forwardRef((e,t)=>{const{__scopeDropdownMenu:a,...r}=e,n=We(a);return s.jsx(pg,{...n,...r,ref:t})});mc.displayName=Eg;var Tg="DropdownMenuArrow",Ig=d.forwardRef((e,t)=>{const{__scopeDropdownMenu:a,...r}=e,n=We(a);return s.jsx(gg,{...n,...r,ref:t})});Ig.displayName=Tg;var Pg="DropdownMenuSubTrigger",hc=d.forwardRef((e,t)=>{const{__scopeDropdownMenu:a,...r}=e,n=We(a);return s.jsx(vg,{...n,...r,ref:t})});hc.displayName=Pg;var Rg="DropdownMenuSubContent",pc=d.forwardRef((e,t)=>{const{__scopeDropdownMenu:a,...r}=e,n=We(a);return s.jsx(yg,{...n,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});pc.displayName=Rg;var Og=ac,Fg=nc,Ug=sc,gc=ic,vc=lc,yc=cc,xc=dc,bc=uc,_c=fc,wc=mc,jc=hc,Nc=pc;const Lg=Og,Vg=Fg,Bg=d.forwardRef(({className:e,inset:t,children:a,...r},n)=>s.jsxs(jc,{ref:n,className:ce("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...r,children:[a,s.jsx(vo,{className:"ml-auto h-4 w-4"})]}));Bg.displayName=jc.displayName;const $g=d.forwardRef(({className:e,...t},a)=>s.jsx(Nc,{ref:a,className:ce("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));$g.displayName=Nc.displayName;const kc=d.forwardRef(({className:e,sideOffset:t=4,...a},r)=>s.jsx(Ug,{children:s.jsx(gc,{ref:r,sideOffset:t,className:ce("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...a})}));kc.displayName=gc.displayName;const On=d.forwardRef(({className:e,inset:t,...a},r)=>s.jsx(yc,{ref:r,className:ce("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...a}));On.displayName=yc.displayName;const Wg=d.forwardRef(({className:e,children:t,checked:a,...r},n)=>s.jsxs(xc,{ref:n,className:ce("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:a,...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(_c,{children:s.jsx(po,{className:"h-4 w-4"})})}),t]}));Wg.displayName=xc.displayName;const zg=d.forwardRef(({className:e,children:t,...a},r)=>s.jsxs(bc,{ref:r,className:ce("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...a,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(_c,{children:s.jsx(Yc,{className:"h-2 w-2 fill-current"})})}),t]}));zg.displayName=bc.displayName;const Gg=d.forwardRef(({className:e,inset:t,...a},r)=>s.jsx(vc,{ref:r,className:ce("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...a}));Gg.displayName=vc.displayName;const Hg=d.forwardRef(({className:e,...t},a)=>s.jsx(wc,{ref:a,className:ce("-mx-1 my-1 h-px bg-muted",e),...t}));Hg.displayName=wc.displayName;const lr=e=>{const t=/(?:https?:\/\/)?(?:www\.)?(?:m\.)?(?:youtube\.com|youtu\.be)\/(?:watch\?v=|embed\/|v\/|)([\w-]{11})(?:\S+)?/i,a=e.match(t);return a?a[1]:null},Zg=at({id:oe().optional(),title:oe().max(100,"Judul terlalu panjang.").nullable().optional(),file:Uo(FileList).refine(e=>e.length>0,"File media harus diunggah.").optional(),file_type:Jn(["audio","video"],{message:"Tipe file tidak valid."}),display_order:Pe.number().int().min(0,"Urutan tampilan harus non-negatif.").default(0)}),Kg=at({id:oe().optional(),title:oe().max(100,"Judul terlalu panjang.").nullable().optional(),youtubeUrl:oe().url("URL YouTube tidak valid.").min(1,"URL YouTube tidak boleh kosong.").refine(e=>lr(e)!==null,"URL YouTube tidak valid."),display_order:Pe.number().int().min(0,"Urutan tampilan harus non-negatif.").default(0)}),Yg=()=>{var I,$;const[e,t]=d.useState([]),[a,r]=d.useState("none"),[n,o]=d.useState(null),[i,l]=d.useState(null),c=d.useRef(null),u=d.useRef(null),f=qe({resolver:Je(Zg),defaultValues:{title:"",file:void 0,file_type:"audio",display_order:0}}),m=qe({resolver:Je(Kg),defaultValues:{title:"",youtubeUrl:"",display_order:0}}),{handleSubmit:p,register:v,setValue:b,reset:h,formState:{isSubmitting:_,errors:k}}=f,{handleSubmit:x,register:M,setValue:w,reset:j,watch:D,formState:{isSubmitting:y,errors:S}}=m,L=D("youtubeUrl"),q=d.useCallback(async()=>{try{const{data:P,error:se}=await O.from("app_settings").select("active_media_id").eq("id",1).single();se&&se.code!=="PGRST116"?(console.error("Error fetching active media ID:",se),A.error("Gagal memuat pengaturan media aktif.")):l(P?P.active_media_id:null);const{data:me,error:Te}=await O.from("media_files").select("*").order("created_at",{ascending:!1});Te?(console.error("Error fetching media files:",Te),A.error("Gagal memuat file media.")):t(me||[])}catch(P){console.error("Unexpected error fetching media files and settings:",P),A.error("Terjadi kesalahan saat memuat data media.")}},[]);d.useEffect(()=>(q(),c.current||(c.current=O.channel("media_files_changes").on("postgres_changes",{event:"*",schema:"public",table:"media_files"},P=>{console.log("Media file change received!",P),q()}).subscribe(),console.log("MediaPlayerSettings: Subscribed to channel 'media_files_changes'.")),u.current||(u.current=O.channel("app_settings_media_changes").on("postgres_changes",{event:"UPDATE",schema:"public",table:"app_settings",filter:"id=eq.1"},P=>{console.log("App settings media change received!",P),l(P.new.active_media_id)}).subscribe(),console.log("MediaPlayerSettings: Subscribed to channel 'app_settings_media_changes'.")),()=>{c.current&&(O.removeChannel(c.current),console.log("MediaPlayerSettings: Unsubscribed from channel 'media_files_changes'."),c.current=null),u.current&&(O.removeChannel(u.current),console.log("MediaPlayerSettings: Unsubscribed from channel 'app_settings_media_changes'."),u.current=null)}),[q]);const X=()=>{o(null),h(),r("add-upload")},H=()=>{o(null),j(),r("add-youtube")},z=P=>{o(P),P.source_type==="upload"?(h({id:P.id,title:P.title||"",file_type:P.file_type,display_order:P.display_order,file:void 0}),r("edit-upload")):(j({id:P.id,title:P.title||"",youtubeUrl:P.file_path,display_order:P.display_order}),r("edit-youtube"))},re=async P=>{if(!window.confirm("Apakah Anda yakin ingin menghapus media ini? Ini juga akan menghapus file dari penyimpanan jika diunggah."))return;const se=A.loading("Menghapus media...");try{if(P.source_type==="upload"){const Te=P.file_path,{data:Ce,error:Ae}=await O.storage.from("audio").remove([Te]);Ae?(console.error("Gagal menghapus file dari penyimpanan Supabase:",Ae),A.error(`Gagal menghapus file dari penyimpanan: ${Ae.message}`,{id:se})):!Ce||Ce.length===0?(console.warn("File tidak ditemukan di penyimpanan atau tidak ada file yang dihapus:",Te),A.warning("File tidak ditemukan di penyimpanan atau tidak ada file yang dihapus.",{id:se})):console.log("File berhasil dihapus dari penyimpanan:",Ce)}const{error:me}=await O.from("media_files").delete().eq("id",P.id);if(me)throw me;i===P.id&&await O.from("app_settings").upsert({id:1,active_media_id:null},{onConflict:"id"}),A.success("Media berhasil dihapus!",{id:se}),q()}catch(me){console.error("Error deleting media:",me),A.error(`Gagal menghapus media: ${me.message}`,{id:se})}},de=async P=>{const se=A.loading("Mengatur media aktif...");try{const{error:me}=await O.from("app_settings").upsert({id:1,active_media_id:P},{onConflict:"id"});if(me)throw me;A.success("Media berhasil diatur sebagai aktif!",{id:se}),l(P)}catch(me){console.error("Error setting active media:",me),A.error(`Gagal mengatur media aktif: ${me.message}`,{id:se})}},J=async P=>{let se=null,me=P.file_type;const Te="upload",Ce=(n==null?void 0:n.source_type)==="upload"?n.file_path:null;if(P.file&&P.file.length>0){const be=P.file[0],Q=be.name.split(".").pop();se=`media/${`${za()}.${Q}`}`;const ye=A.loading("Mengunggah file media: 0%");try{const{data:pe,error:ge}=await O.storage.from("audio").upload(se,be,{cacheControl:"3600",upsert:!1,onUploadProgress:fe=>{const rt=Math.round(fe.loaded*100/fe.total);console.log(`Upload progress for media player: ${rt}%`),A.loading(`Mengunggah file media: ${rt}%`,{id:ye})}});if(ge)throw ge;if(A.success("File media berhasil diunggah!",{id:ye}),Ce&&Ce!==se)try{const{error:fe}=await O.storage.from("audio").remove([Ce]);fe?(console.warn("Gagal menghapus file media lama dari storage:",fe),A.warning("Gagal menghapus file media lama.")):console.log("File media lama berhasil dihapus.")}catch(fe){console.warn("Error parsing old file path for deletion:",fe)}}catch(pe){A.error(`Gagal mengunggah file: ${pe.message}`,{id:ye});return}}else if(a==="edit-upload"&&(n==null?void 0:n.source_type)==="upload")se=n.file_path,me=n.file_type;else{A.error("File media harus diunggah.");return}if(!se){A.error("File media tidak valid.");return}const Ae={title:P.title||null,file_path:se,file_type:me,source_type:Te,display_order:P.display_order};if(a==="edit-upload"&&n){const{error:be}=await O.from("media_files").update(Ae).eq("id",n.id);be?(console.error("Error updating media in DB:",be),A.error("Gagal memperbarui media.")):(A.success("Media berhasil diperbarui!"),r("none"),q())}else{const{error:be}=await O.from("media_files").insert(Ae);be?(console.error("Error adding media to DB:",be),A.error("Gagal menambahkan media.")):(A.success("Media berhasil ditambahkan!"),r("none"),q())}},R=async P=>{const se=lr(P.youtubeUrl);if(!se){A.error("URL YouTube tidak valid.");return}const me=`https://www.youtube.com/embed/${se}`,Ae={title:P.title||null,file_path:me,file_type:"video",source_type:"youtube",display_order:P.display_order};if(a==="edit-youtube"&&n){const{error:be}=await O.from("media_files").update(Ae).eq("id",n.id);be?(console.error("Error updating media in DB:",be),A.error("Gagal memperbarui media.")):(A.success("Media berhasil diperbarui!"),r("none"),q())}else{const{error:be}=await O.from("media_files").insert(Ae);be?(console.error("Error adding media to DB:",be),A.error("Gagal menambahkan media.")):(A.success("Media berhasil ditambahkan!"),r("none"),q())}};return s.jsxs(Xe,{className:"bg-gray-800 text-white border-gray-700 col-span-full lg:col-span-2",children:[s.jsx(Qe,{children:s.jsx(et,{className:"text-2xl font-semibold text-blue-300",children:"Pengaturan Media Player"})}),s.jsxs(tt,{children:[s.jsx("p",{className:"text-gray-400 mb-4",children:"Kelola file audio/video atau tautan YouTube yang akan diputar di layar utama."}),s.jsxs(Lg,{children:[s.jsx(Vg,{asChild:!0,children:s.jsxs(ee,{className:"w-full bg-green-600 hover:bg-green-700 text-white mb-4",children:[s.jsx($a,{className:"mr-2 h-4 w-4"})," Tambah Media Baru"]})}),s.jsxs(kc,{className:"w-56 bg-gray-700 text-white border-gray-600",children:[s.jsxs(On,{onClick:X,className:"cursor-pointer hover:bg-gray-600",children:[s.jsx(yo,{className:"mr-2 h-4 w-4"})," Unggah File Media"]}),s.jsxs(On,{onClick:H,className:"cursor-pointer hover:bg-gray-600",children:[s.jsx(Jc,{className:"mr-2 h-4 w-4"})," Tambah Tautan YouTube"]})]})]}),s.jsx("div",{className:"space-y-3",children:e.length===0?s.jsx("p",{className:"text-gray-400 text-center",children:"Belum ada file media. Tambahkan yang pertama!"}):e.map(P=>s.jsxs("div",{className:"flex items-center justify-between bg-gray-700 p-3 rounded-md shadow-sm",children:[s.jsxs("div",{className:"flex-grow mr-2",children:[s.jsx("p",{className:"font-medium text-lg text-blue-200",children:P.title||"(Tanpa Judul)"}),s.jsxs("p",{className:"text-sm text-gray-300",children:["Tipe: ",P.file_type," | Sumber: ",P.source_type," | Urutan: ",P.display_order]}),s.jsx("p",{className:"text-xs text-gray-400 truncate",children:P.file_path})]}),s.jsxs("div",{className:"flex space-x-2 items-center",children:[i===P.id?s.jsxs("span",{className:"text-green-400 flex items-center text-sm",children:[s.jsx(Kc,{className:"h-4 w-4 mr-1"})," Aktif"]}):s.jsx(ee,{variant:"outline",size:"sm",onClick:()=>de(P.id),className:"text-purple-400 border-purple-400 hover:bg-purple-400 hover:text-white",children:"Set Aktif"}),s.jsx(ee,{variant:"outline",size:"icon",onClick:()=>z(P),className:"text-blue-400 border-blue-400 hover:bg-blue-400 hover:text-white",children:s.jsx(ba,{className:"h-4 w-4"})}),s.jsx(ee,{variant:"outline",size:"icon",onClick:()=>re(P),className:"text-red-400 border-red-400 hover:bg-red-400 hover:text-white",children:s.jsx(_a,{className:"h-4 w-4"})})]})]},P.id))}),s.jsx(Bt,{open:a==="add-upload"||a==="edit-upload",onOpenChange:P=>{P||r("none")},children:s.jsxs(Tt,{className:"bg-gray-800 text-white border-gray-700",children:[s.jsxs(It,{children:[s.jsx(Rt,{className:"text-blue-300",children:a==="edit-upload"?"Edit Media Unggahan":"Unggah File Media Baru"}),s.jsx($t,{children:a==="edit-upload"?"Perbarui detail media unggahan ini.":"Unggah file audio atau video baru untuk diputar di layar utama."})]}),s.jsxs("form",{onSubmit:p(J),className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Z,{htmlFor:"uploadTitle",className:"text-gray-300",children:"Judul (Opsional)"}),s.jsx(le,{id:"uploadTitle",...v("title"),className:"bg-gray-700 border-gray-600 text-white mt-1",placeholder:"Judul media (mis: Rekaman Kajian)"}),k.title&&s.jsx("p",{className:"text-red-400 text-sm mt-1",children:k.title.message})]}),s.jsxs("div",{children:[s.jsx(Z,{htmlFor:"file",className:"text-gray-300",children:"Unggah File Media (Audio/Video)"}),s.jsx(le,{id:"file",type:"file",accept:"audio/*,video/*",...v("file"),className:"bg-gray-700 border-gray-600 text-white mt-1 file:text-white file:bg-blue-600 file:hover:bg-blue-700 file:border-none file:rounded-md file:px-3 file:py-1"}),k.file&&s.jsx("p",{className:"text-red-400 text-sm mt-1",children:k.file.message}),a==="edit-upload"&&(n==null?void 0:n.source_type)==="upload"&&n.file_path&&s.jsxs("div",{className:"mt-2",children:[s.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"File saat ini:"}),n.file_type==="audio"?s.jsx("audio",{controls:!0,src:(I=O.storage.from("audio").getPublicUrl(n.file_path).data)==null?void 0:I.publicUrl,className:"w-full max-w-xs"}):s.jsx("video",{controls:!0,src:($=O.storage.from("audio").getPublicUrl(n.file_path).data)==null?void 0:$.publicUrl,className:"w-full max-w-xs h-32 object-contain"})]})]}),s.jsxs("div",{children:[s.jsx(Z,{htmlFor:"file_type",className:"text-gray-300",children:"Tipe File"}),s.jsxs(ut,{onValueChange:P=>b("file_type",P),defaultValue:f.getValues("file_type"),children:[s.jsx(nt,{className:"w-full bg-gray-700 border-gray-600 text-white mt-1",children:s.jsx(ft,{placeholder:"Pilih Tipe File"})}),s.jsxs(st,{className:"bg-gray-700 text-white border-gray-600",children:[s.jsx(Re,{value:"audio",children:"Audio"}),s.jsx(Re,{value:"video",children:"Video"})]})]}),k.file_type&&s.jsx("p",{className:"text-red-400 text-sm mt-1",children:k.file_type.message})]}),s.jsxs("div",{children:[s.jsx(Z,{htmlFor:"uploadDisplayOrder",className:"text-gray-300",children:"Urutan Tampilan"}),s.jsx(le,{id:"uploadDisplayOrder",type:"number",...v("display_order"),className:"bg-gray-700 border-gray-600 text-white mt-1"}),k.display_order&&s.jsx("p",{className:"text-red-400 text-sm mt-1",children:k.display_order.message})]}),s.jsxs(Pt,{children:[s.jsx(ee,{type:"button",variant:"outline",onClick:()=>r("none"),className:"text-gray-300 border-gray-600 hover:bg-gray-700",children:"Batal"}),s.jsx(ee,{type:"submit",disabled:_,className:"bg-blue-600 hover:bg-blue-700 text-white",children:_?"Menyimpan...":a==="edit-upload"?"Simpan Perubahan":"Unggah Media"})]})]})]})}),s.jsx(Bt,{open:a==="add-youtube"||a==="edit-youtube",onOpenChange:P=>{P||r("none")},children:s.jsxs(Tt,{className:"bg-gray-800 text-white border-gray-700",children:[s.jsxs(It,{children:[s.jsx(Rt,{className:"text-blue-300",children:a==="edit-youtube"?"Edit Tautan YouTube":"Tambah Tautan YouTube Baru"}),s.jsx($t,{children:a==="edit-youtube"?"Perbarui detail tautan YouTube ini.":"Tambahkan tautan video YouTube baru untuk diputar di layar utama."})]}),s.jsxs("form",{onSubmit:x(R),className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(Z,{htmlFor:"youtubeTitle",className:"text-gray-300",children:"Judul (Opsional)"}),s.jsx(le,{id:"youtubeTitle",...M("title"),className:"bg-gray-700 border-gray-600 text-white mt-1",placeholder:"Judul video (mis: Khutbah Jumat Terbaru)"}),S.title&&s.jsx("p",{className:"text-red-400 text-sm mt-1",children:S.title.message})]}),s.jsxs("div",{children:[s.jsx(Z,{htmlFor:"youtubeUrl",className:"text-gray-300",children:"URL Video YouTube"}),s.jsx(le,{id:"youtubeUrl",type:"url",...M("youtubeUrl"),className:"bg-gray-700 border-gray-600 text-white mt-1",placeholder:"Contoh: https://www.youtube.com/watch?v=dQw4w9WgXcQ"}),S.youtubeUrl&&s.jsx("p",{className:"text-red-400 text-sm mt-1",children:S.youtubeUrl.message}),L&&lr(L)&&s.jsxs("div",{className:"mt-2",children:[s.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"Pratinjau Video:"}),s.jsx("div",{className:"relative w-full",style:{paddingTop:"56.25%"},children:s.jsx("iframe",{className:"absolute top-0 left-0 w-full h-full rounded-md border border-gray-600",src:`https://www.youtube.com/embed/${lr(L)}?autoplay=0&controls=1&modestbranding=1&rel=0`,title:"YouTube video player",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0})})]})]}),s.jsxs("div",{children:[s.jsx(Z,{htmlFor:"youtubeDisplayOrder",className:"text-gray-300",children:"Urutan Tampilan"}),s.jsx(le,{id:"youtubeDisplayOrder",type:"number",...M("display_order"),className:"bg-gray-700 border-gray-600 text-white mt-1"}),S.display_order&&s.jsx("p",{className:"text-red-400 text-sm mt-1",children:S.display_order.message})]}),s.jsxs(Pt,{children:[s.jsx(ee,{type:"button",variant:"outline",onClick:()=>r("none"),className:"text-gray-300 border-gray-600 hover:bg-gray-700",children:"Batal"}),s.jsx(ee,{type:"submit",disabled:y,className:"bg-blue-600 hover:bg-blue-700 text-white",children:y?"Menyimpan...":a==="edit-youtube"?"Simpan Perubahan":"Tambah Tautan"})]})]})]})})]})]})},gn=[{id:"masjid-info",title:"Informasi Masjid",component:fu},{id:"prayer-time",title:"Waktu Sholat",component:Ff},{id:"audio",title:"Audio & Iqomah",component:pp},{id:"ramadan-mode",title:"Mode Ramadan",component:lp},{id:"display",title:"Tampilan",component:dp},{id:"info-slides",title:"Slide Informasi",component:tm},{id:"media-player",title:"Media Player",component:Yg},{id:"running-text",title:"Teks Berjalan",component:Lf},{id:"imam-muezzin",title:"Jadwal Imam & Muadzin",component:sm},{id:"notifications-studies",title:"Notifikasi & Kajian",component:Qh},{id:"financial",title:"Keuangan",component:ap},{id:"islamic-holidays",title:"Hari Besar Islam",component:vp}],qg=()=>{var o;const e=zc(),[t,a]=d.useState(gn[0].id),r=(o=gn.find(i=>i.id===t))==null?void 0:o.component,n=async()=>{await cd(),e("/login")};return s.jsxs("div",{className:"flex h-screen bg-gray-900 text-white",children:[s.jsxs("aside",{className:"w-64 bg-gray-800 border-r border-gray-700 flex flex-col",children:[s.jsx("div",{className:"p-4 border-b border-gray-700",children:s.jsx("h2",{className:"text-2xl font-bold text-blue-300",children:"Admin Panel"})}),s.jsx(Gc,{className:"flex-grow py-4",children:s.jsx("nav",{className:"space-y-1 px-4",children:gn.map(i=>s.jsx(ee,{variant:"ghost",className:ce("w-full justify-start text-lg py-2 px-3 rounded-md",t===i.id?"bg-blue-700 text-white hover:bg-blue-600":"text-gray-300 hover:bg-gray-700 hover:text-white"),onClick:()=>a(i.id),children:i.title},i.id))})}),s.jsxs("div",{className:"p-4 border-t border-gray-700 space-y-2",children:[s.jsx(ee,{onClick:()=>e("/"),className:"w-full bg-blue-600 hover:bg-blue-700 text-white",children:"Kembali ke Display"}),s.jsx(ee,{onClick:n,className:"w-full bg-red-600 hover:bg-red-700 text-white",children:"Logout"})]})]}),s.jsx("main",{className:"flex-1 overflow-y-auto p-8",children:r?s.jsx(r,{}):s.jsx("div",{className:"text-center text-gray-400 text-xl",children:"Pilih bagian dari sidebar untuk mengelola pengaturan."})})]})},ov=()=>s.jsx(qg,{});export{ov as default};
